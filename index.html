<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Future Finders Chama Group</title>
<style>
   body { 
  font-family: Arial, sans-serif; 
  margin: 0; 
  padding: 0; 
  background: #f9f9f9; 
  padding-bottom: 60px; /* prevent overlap with footer */
}

header { 
  background: #00695c; 
  color: white; 
  padding: 1.5rem; 
  text-align: center; 
}

/* NAV BUTTONS */
#navButtons { 
  display: flex; 
  flex-wrap: wrap; 
  gap: 0.8rem; 
  justify-content: center; 
  margin: 1.5rem; 
}

.nav-btn {
  flex: 1 1 180px; 
  background-color: #00796b; 
  color: white;
  padding: 1rem; 
  text-align: center; 
  border-radius: 6px;
  text-decoration: none; 
  font-weight: bold; 
  position: relative;
  box-shadow: 0 3px 6px rgba(0,0,0,0.2); 
  cursor: pointer;
}
.nav-btn:hover { background-color: #004d40; }

/* Spinner */
.spinner {
  display: none; 
  border: 3px solid #f3f3f3; 
  border-top: 3px solid white;
  border-radius: 50%; 
  width: 18px; 
  height: 18px; 
  animation: spin 1s linear infinite;
  position: absolute; 
  right: 12px; 
  top: 50%; 
  transform: translateY(-50%);
}
@keyframes spin { 
  0% { transform: translateY(-50%) rotate(0deg);} 
  100% { transform: translateY(-50%) rotate(360deg);} 
}

/* Sections */
section {
  padding: 2rem; 
  background: white; 
  margin: 1rem auto; 
  border-radius: 8px;
  max-width: 900px; 
  box-shadow: 0 2px 8px rgba(0,0,0,0.1); 
  display: none;
}
section.active { display: block; }

input, select {
  padding: 10px; 
  margin: 10px auto; 
  width: 80%; 
  display: block;
  border: 1px solid #ccc; 
  border-radius: 5px;
}

.action-btn {
  display: block; 
  background-color: #388e3c; 
  color: white;
  padding: 0.9rem; 
  margin: 0.5rem auto; 
  text-align: center;
  border-radius: 6px; 
  text-decoration: none; 
  font-weight: bold;
  position: relative; 
  max-width: 250px; 
  cursor: pointer;
}
.action-btn:hover { background-color: #1b5e20; }

#dashboard, #admin { 
  display: none; 
  padding: 1rem; 
  border-radius: 6px; 
  margin-top: 20px; 
  background: #f1f8e9; 
}

/* Popup Overlay */
.popup-overlay {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.5);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

/* Popup Box */
.popup-box {
  background: white;
  padding: 20px 30px;
  border-radius: 10px;
  text-align: center;
  max-width: 350px;
  box-shadow: 0px 5px 15px rgba(0,0,0,0.3);
  animation: popupFade 0.3s ease;
}

.popup-box h3 {
  margin-bottom: 10px;
}

.popup-success {
  border-top: 6px solid #4caf50;
}
.popup-error {
  border-top: 6px solid #f44336;
}

.popup-btn {
  margin-top: 15px;
  padding: 8px 16px;
  background: #1976d2;
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
}

@keyframes popupFade {
  from { transform: scale(0.8); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

/* Glow effect */
.glow {
  font-weight: bold;
  color: #fff;
  text-shadow: 0 0 5px #ff0, 0 0 10px #ff0, 0 0 20px #ffa500;
  font-size: 18px;
}

/* Footer */
footer {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  background: #111;
  color: white;
  text-align: center;
  padding: 12px 0;
  z-index: 1000;
  overflow: hidden;
}

/* Modern marquee effect */
.footer-marquee {
  display: inline-block;
  white-space: nowrap;
  animation: marquee 12s linear infinite;
}

@keyframes marquee {
  from { transform: translateX(100%); }
  to   { transform: translateX(-100%); }
}
/* Check Loan Eligibility Button */
.check-loan-btn {
  background: linear-gradient(135deg, #1976d2, #0d47a1);
  color: white;
  font-size: 16px;
  font-weight: bold;
  padding: 12px 20px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  display: inline-block;
}

.check-loan-btn:hover {
  background: linear-gradient(135deg, #2196f3, #1565c0);
  transform: scale(1.05);
  box-shadow: 0 6px 12px rgba(0,0,0,0.25);
}

.check-loan-btn:active {
  transform: scale(0.97);
  box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}
/* Shake animation */
@keyframes shake {
  0% { transform: translateX(0); }
  20% { transform: translateX(-5px); }
  40% { transform: translateX(5px); }
  60% { transform: translateX(-5px); }
  80% { transform: translateX(5px); }
  100% { transform: translateX(0); }
}

.shake {
  animation: shake 0.4s ease;
}
/* Red glow effect */
.input-error {
  border: 2px solid #f44336 !important;
  box-shadow: 0 0 8px #f44336;
}
/* ğŸ² Dice container */
#diceBox {
  width: 80px;
  height: 80px;
  margin: 20px auto;
  background: #fff;
  border: 3px solid #333;
  border-radius: 12px;
  font-size: 30px;
  font-weight: bold;
  display: flex;
  justify-content: center;
  align-items: center;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  transition: transform 0.6s ease;
}

/* Rolling animation */
.roll {
  animation: rollDice 0.3s linear infinite;
}

@keyframes rollDice {
  0%   { transform: rotate(0deg); }
  25%  { transform: rotate(90deg); }
  50%  { transform: rotate(180deg); }
  75%  { transform: rotate(270deg); }
  100% { transform: rotate(360deg); }
}

/* Pop-up effect when showing final number */
.lucky-popup {
  animation: popUp 0.6s ease forwards;
  color: #1976d2;
}

@keyframes popUp {
  0%   { transform: scale(0.2); opacity: 0; }
  60%  { transform: scale(1.3); opacity: 1; }
  100% { transform: scale(1); }
}
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
/* Contact Buttons */
.contact-btn {
  display: inline-block;
  margin: 8px;
  padding: 12px 18px;
  border: none;
  border-radius: 6px;
  font-size: 16px;
  font-weight: bold;
  cursor: pointer;
  color: white;
  transition: transform 0.2s ease, opacity 0.3s;
}

.contact-btn:hover {
  transform: scale(1.05);
  opacity: 0.9;
}

/* Specific colors */
.contact-btn.email {
  background: #1976d2; /* Blue */
}
.contact-btn.phone {
  background: #d32f2f; /* Red */
}
.contact-btn.whatsapp {
  background: #25d366; /* WhatsApp Green */
}
/* Initial hidden state */
.fade-in {
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.8s ease-out, transform 0.8s ease-out;
}

/* Visible state */
.fade-in.visible {
  opacity: 1;
  transform: translateY(0);
}
/* show password css */
.switch {
  position: relative;
  display: inline-block;
  width: 50px;
  height: 24px;
  margin-top: 10px;
  vertical-align: middle;
}

.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.slider {
  position: absolute;
  cursor: pointer;
  top: 0; left: 0;
  right: 0; bottom: 0;
  background-color: #ccc;
  transition: .4s;
  border-radius: 24px;
}

.slider:before {
  position: absolute;
  content: "";
  height: 18px;
  width: 18px;
  left: 3px;
  bottom: 3px;
  background-color: white;
  transition: .4s;
  border-radius: 50%;
}

input:checked + .slider {
  background-color: #388e3c; /* Green when active */
}

input:checked + .slider:before {
  transform: translateX(26px);
}

.toggle-label {
  margin-left: 60px;
  font-size: 14px;
  color: #333;
}
/* About Us Section */
#about {
  background: #f9f9f9;
  padding: 40px 20px;
  border-radius: 10px;
  margin: 20px auto;
  max-width: 900px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}

#about h2 {
  text-align: center;
  font-size: 28px;
  color: #1976d2;
  margin-bottom: 20px;
  border-bottom: 2px solid #1976d2;
  display: inline-block;
  padding-bottom: 5px;
}

#about h3 {
  margin-top: 20px;
  font-size: 22px;
  color: #333;
  border-left: 4px solid #1976d2;
  padding-left: 10px;
}

#about p {
  font-size: 16px;
  line-height: 1.6;
  margin: 10px 0;
  color: #444;
}

#about ul {
  list-style: none;
  padding: 0;
}

#about ul li {
  background: #e3f2fd;
  margin: 8px 0;
  padding: 10px 12px;
  border-radius: 6px;
  font-size: 16px;
  color: #1976d2;
  transition: transform 0.2s ease, background 0.3s;
}

#about ul li:hover {
  transform: scale(1.05);
  background: #bbdefb;
}

/* About Logo/Image */
#about img {
  transition: transform 0.4s ease;
}

#about img:hover {
  transform: scale(1.1) rotate(3deg);
}
body {
  background-image: url("https://github.com/bony87/my-future-finder-chama-group/blob/main/ChatGPT%20Image%20Sep%2010,%202025,%2005_43_14%20PM.png?raw=true");
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  background-attachment: fixed;
  margin: 0;
  font-family: Arial, sans-serif;
  position: relative;
  z-index: 0;
}

/* Overlay */
body::before {
  content: "";
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(255, 255, 255, 0.8); /* White overlay, 80% opaque */
  z-index: -1; /* Push behind content */
}
/* Dice styling */
#diceBox {
  font-size: 70px;
  text-align: center;
  margin: 20px auto;
  width: 100px;
  height: 100px;
  line-height: 100px;
  border: 3px solid #1976d2;
  border-radius: 12px;
  background: white;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  transition: transform 0.3s ease, background 0.3s ease;
}

/* Rolling spin */
#diceBox.roll {
  animation: rollDice 0.5s infinite;
}

@keyframes rollDice {
  0%   { transform: rotate(0deg);   }
  25%  { transform: rotate(90deg);  }
  50%  { transform: rotate(180deg); background:#ffeb3b; } /* yellow flash */
  75%  { transform: rotate(270deg); background:#4caf50; } /* green flash */
  100% { transform: rotate(360deg); background:#f44336; } /* red flash */
}


@keyframes rollDice {
  0%   { transform: rotate(0deg);   }
  25%  { transform: rotate(90deg);  }
  50%  { transform: rotate(180deg); }
  75%  { transform: rotate(270deg); }
  100% { transform: rotate(360deg); }
}


@keyframes rollDice {
  0%   { transform: rotate(0deg);   }
  25%  { transform: rotate(90deg);  }
  50%  { transform: rotate(180deg); }
  75%  { transform: rotate(270deg); }
  100% { transform: rotate(360deg); }
}
.spinner {
  display: none;
  border: 2px solid #f3f3f3;
  border-top: 2px solid white;
  border-radius: 50%;
  width: 14px;
  height: 14px;
  animation: spin 1s linear infinite;
  margin-left: 8px;
  vertical-align: middle;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
/* Container for the form */
#registerForm {
  width: 320px;
  margin: 30px auto;
  padding: 20px;
  border-radius: 8px;
  background: #fff;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  text-align: center;
  font-family: Arial, sans-serif;
}

/* Form Title */
#registerForm h3 {
  margin-bottom: 20px;
  color: #333;
  font-size: 20px;
}

/* Input fields */
#registerForm input {
  width: 90%;
  padding: 10px;
  margin: 10px 0;
  border: 1px solid #ccc;
  border-radius: 5px;
  font-size: 14px;
  transition: border 0.3s;
}

#registerForm input:focus {
  border-color: #1976d2;
  outline: none;
}

/* Register button */
#registerForm button {
  width: 95%;
  padding: 12px;
  margin-top: 15px;
  background: #1976d2;
  color: #fff;
  border: none;
  border-radius: 6px;
  font-size: 16px;
  cursor: pointer;
  transition: background 0.3s;
}

#registerForm button:hover {
  background: #1565c0;
}

/* Back to services button */
.action-btn {
  display: inline-block;
  padding: 10px 18px;
  margin: 20px auto;
  border-radius: 6px;
  color: #fff;
  font-size: 14px;
  text-decoration: none;
  cursor: pointer;
  transition: background 0.3s;
}

.action-btn:hover {
  background: #b71c1c !important;
}
.summary-card {
  flex: 1;
  min-width: 220px;
  padding: 12px;
  background: #f4f6f9;
  border: 1px solid #ddd;
  border-radius: 6px;
  font-weight: bold;
  color: #333;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}
.fade-out {
  animation: fadeOut 0.6s ease forwards;
}

@keyframes fadeOut {
  from { opacity: 1; transform: scale(1); }
  to { opacity: 0; transform: scale(0.97); }
}
.fade-in {
  animation: fadeIn 0.6s ease forwards;
}

@keyframes fadeIn {
  from { opacity: 0; transform: scale(0.97); }
  to { opacity: 1; transform: scale(1); }
}
/* Popup Box */
.popup-box {
  background: white;
  padding: 20px 30px;
  border-radius: 10px;
  text-align: center;
  max-width: 350px;
  box-shadow: 0px 5px 15px rgba(0,0,0,0.3);
  animation: slideIn 0.5s ease forwards;
  transform: translateY(-30px);
  opacity: 0;
}

@keyframes slideIn {
  from { transform: translateY(-30px); opacity: 0; }
  to   { transform: translateY(0); opacity: 1; }
}


/* General Button Styles */
.download-btn {
  margin-top: 10px;
  padding: 10px 14px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-weight: bold;
  color: #fff;
  transition: transform 0.15s ease, box-shadow 0.15s ease;
}

.download-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}

.csv-btn {
  background: #388e3c;
}

.pdf-btn {
  background: #1976d2;
}

.latest-btn {
  background: #009688;
}

/* Toast Notification */
.toast {
  visibility: hidden;
  min-width: 250px;
  margin-left: -125px;
  background: #323232;
  color: #fff;
  text-align: center;
  border-radius: 6px;
  padding: 12px;
  position: fixed;
  z-index: 9999;
  left: 50%;
  bottom: 30px;
  font-size: 14px;
  opacity: 0;
  transition: opacity 0.5s, bottom 0.5s;
}

.toast.show {
  visibility: visible;
  opacity: 1;
  bottom: 50px;
}

.download-btn {
  margin: 2px;
  padding: 6px 10px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-weight: bold;
  color: #fff;
}
.pdf-btn { background: #1976d2; }

/* General Card Layout */
.card {
  max-width: 800px;
  margin: 20px auto;
  padding: 20px;
  background: #fff;
  border-radius: 8px;
  box-shadow: 0 3px 8px rgba(0,0,0,0.1);
}

/* Buttons */
.action-btn {
  display: inline-block;
  margin: 6px 4px;
  padding: 10px 16px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-weight: bold;
  background: #00796b;
  color: white;
  transition: 0.2s;
}
.action-btn:hover { opacity: 0.9; }
.action-btn.primary { background: #1976d2; }
.action-btn.danger { background: #d32f2f; }

/* Spinner inside button */
.spinner {
  display: none;
  margin-left: 8px;
  border: 2px solid #f3f3f3;
  border-top: 2px solid white;
  border-radius: 50%;
  width: 14px;
  height: 14px;
  animation: spin 1s linear infinite;
  vertical-align: middle;
}
@keyframes spin { 100% { transform: rotate(360deg); } }

/* Password Input */
.password-container {
  display: flex;
  align-items: center;
  margin: 12px 0;
}
.password-container input {
  flex: 1;
  padding: 8px;
  border-radius: 6px;
  border: 1px solid #ccc;
}
.password-container .toggle-eye {
  margin-left: 8px;
  cursor: pointer;
  font-size: 14px;
}

/* Info Box */
.info-box {
  margin: 20px 0;
  padding: 15px;
  background: #e3f2fd;
  border-left: 6px solid #1976d2;
  border-radius: 8px;
}

/* Tables */
.table-container {
  overflow-x: auto;
}
table {
  width: 100%;
  border-collapse: collapse;
  margin: 12px 0;
}
table th, table td {
  border: 1px solid #ddd;
  padding: 8px;
}
table th {
  background: #00796b;
  color: white;
}
.highlight {
  background: #17da48 !important;
}

/* Download buttons */
.download-buttons {
  margin: 15px 0;
}
.download-btn {
  margin: 5px;
  padding: 8px 12px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-weight: bold;
  color: white;
}
.csv-btn { background: #388e3c; }
.pdf-btn { background: #1976d2; }

/* Toast */
.toast {
  visibility: hidden;
  min-width: 250px;
  background: #323232;
  color: #fff;
  text-align: center;
  border-radius: 6px;
  padding: 12px;
  position: fixed;
  z-index: 9999;
  left: 50%;
  bottom: 30px;
  transform: translateX(-50%);
  font-size: 14px;
  opacity: 0;
  transition: opacity 0.5s, bottom 0.5s;
}
.toast.show {
  visibility: visible;
  opacity: 1;
  bottom: 50px;
}


#countdown {
      font-size: 1.5em;
      font-weight: bold;
      padding: 15px;
      border: 2px solid;
      display: inline-block;
      border-radius: 8px;
      margin-bottom: 20px;
    }
    .green { background: #e8f5e9; border-color: #4caf50; color: #2e7d32; }
    .yellow { background: #fffde7; border-color: #ffeb3b; color: #f57f17; }
    .red { background: #ffebee; border-color: #f44336; color: #b71c1c; }

    /* Progress Bar */
    .progress-container {
      width: 80%;
      background: #ddd;
      border-radius: 10px;
      margin: 0 auto;
      height: 20px;
      overflow: hidden;
    }
    .progress-bar {
      height: 100%;
      text-align: center;
      line-height: 20px;
      color: white;
      width: 100%;
      transition: width 1s linear;
    }
    .progress-green { background: #4caf50; }
    .progress-yellow { background: #ff9800; }
    .progress-red { background: #f44336; }

#countdownBar > span:first-child {
  font-weight: 700;
  font-size: 1.1rem;
  padding: 6px 12px;
  border-radius: 6px;
  background: linear-gradient(135deg, #1976d2, #0d47a1);
  color: #fff;
  box-shadow: 0 2px 6px rgba(0,0,0,0.2);
  letter-spacing: 0.5px;
}


.fine-text {
  background: #ffebee;
  border: 2px solid #c62828;
  color: #b71c1c;
  font-weight: bold;
  padding: 10px 12px;
  border-radius: 5px;
  font-size: 17px;
  text-align: center;
}

#personalNote {
  font-weight: bold;
}



/* Login Section */
#loginForm {
  max-width: 420px;
  margin: 60px auto;
  padding: 30px 25px;
  background: linear-gradient(135deg, #ffffff, #f1f8f6);
  border-radius: 15px;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.12);
  text-align: center;
  font-family: "Segoe UI", Tahoma, sans-serif;
}

/* Headings */
#loginForm h2 {
  margin-bottom: 5px;
  color: #00695c;
  font-size: 22px;
}

#loginForm h1 {
  font-size: 20px;
  margin-bottom: 20px;
  color: #2e7d32;
}

/* Labels */
#loginForm label {
  display: block;
  text-align: left;
  margin-bottom: 6px;
  font-size: 14px;
  color: #333;
}

/* Select & Inputs */
#loginForm select,
#loginForm input {
  width: 100%;
  padding: 12px;
  border-radius: 8px;
  border: 1px solid #ccc;
  font-size: 14px;
  outline: none;
  transition: 0.3s;
}

#loginForm select:focus,
#loginForm input:focus {
  border-color: #00796b;
  box-shadow: 0 0 5px rgba(0, 121, 107, 0.4);
}

/* Password Container */
.password-container {
  position: relative;
  margin-top: 15px;
}

/* Eye Toggle */
.toggle-eye {
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 13px;
  cursor: pointer;
  color: #00796b;
  user-select: none;
}

.toggle-eye:hover {
  text-decoration: underline;
}

/* Login Button */
.action-btn {
  display: block;
  margin-top: 20px;
  padding: 14px;
  background: linear-gradient(135deg, #00796b, #2e7d32);
  color: white;
  text-decoration: none;
  border-radius: 30px;
  font-weight: bold;
  font-size: 15px;
  cursor: pointer;
  transition: 0.3s;
  position: relative;
}

.action-btn:hover {
  background: linear-gradient(135deg, #004d40, #1b5e20);
  transform: translateY(-2px);
}

/* Spinner inside button */
.spinner {
  display: none;
  width: 16px;
  height: 16px;
  border: 3px solid white;
  border-top: 3px solid transparent;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-left: 8px;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* Login Message */
#loginMessage {
  margin-top: 15px;
  font-size: 14px;
  font-weight: bold;
}

/* Disabled names styling */
#loginForm option:disabled {
  color: #b71c1c;
  font-style: italic;
}
.password-container {
  position: relative;
  margin-top: 15px;
}

.password-container input {
  width: 100%;
  padding: 12px 40px 12px 12px; /* space for eye */
  border-radius: 8px;
  border: 1px solid #ccc;
  font-size: 14px;
}

.toggle-eye {
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  cursor: pointer;
  font-size: 18px;
  color: #00796b;
  user-select: none;
  transition: 0.2s;
}

.toggle-eye:hover {
  color: #004d40;
}

/* ğŸ‰ New Year Bouncing Animation */
@keyframes bounceLive {
  0%, 20%, 50%, 80%, 100% {
    transform: translateY(0);
  }
  40% {
    transform: translateY(-18px);
  }
  60% {
    transform: translateY(-10px);
  }
}

/* Apply bounce */
.new-year-blink {
  animation: bounceLive 1.4s infinite;
}
/* ğŸ† Glowing Happy New Year Text */
@keyframes glowText {
  0% {
    text-shadow:
      0 0 5px #ffeb3b,
      0 0 10px #ffeb3b,
      0 0 20px #ff9800;
    color: #2e7d32;
  }
  50% {
    text-shadow:
      0 0 10px #fff176,
      0 0 20px #ffb300,
      0 0 35px #ff6f00;
    color: #1b5e20;
  }
  100% {
    text-shadow:
      0 0 5px #ffeb3b,
      0 0 10px #ffeb3b,
      0 0 20px #ff9800;
    color: #2e7d32;
  }
}

/* Apply glow */
.glow-title {
  animation: glowText 1.6s infinite alternate;
  font-weight: bold;
}

/* ğŸ’¥ Boom then Fade animation */
@keyframes boomFade {
  0% {
    transform: scale(1);
    opacity: 1;
  }
  40% {
    transform: scale(1.25); /* BOOM */
    opacity: 1;
  }
  100% {
    transform: scale(0.7);
    opacity: 0;
  }
}

/* Apply when closing */
.boom-fade {
  animation: boomFade 0.6s ease forwards;
}

  </style>
</head>
<body>
  <!-- ğŸ’¸ Member Fines Popup -->
<div id="finePopup" style="
  display:none;
  position:fixed;
  top:0; left:0; width:100%; height:100%;
  background:rgba(0,0,0,0.6);
  z-index:9999;
  align-items:center;
  justify-content:center;
">
  <div style="
    background:white;
    padding:25px;
    border-radius:10px;
    max-width:450px;
    width:90%;
    box-shadow:0 5px 15px rgba(0,0,0,0.3);
    text-align:center;
    position:relative;
  ">
    <h2 style="color:#c62828;">ğŸ’¸ Fines Summary</h2>
    <p id="fineText" style="font-size:16px; color:#333; margin:20px 0;">Loading your fines...</p>
    <button onclick="closeFinePopup()" style="
      background:#c62828;
      color:white;
      padding:10px 20px;
      border:none;
      border-radius:5px;
      cursor:pointer;
    ">Close</button>
  </div>
</div>
<!-- ğŸ‰ Happy New Year Popup -->
<div class="popup-overlay" id="newYearPopup">
  <div class="popup-box popup-success">
    <h3 class="glow-title">ğŸ‰ Happy New Year 2026! ğŸ†</h3>

    <p>
      Wishing all <b>Future Finders Chama</b> members a prosperous year filled with
      growth, savings, and success ğŸ’°ğŸŒ±
    </p>
    <button class="popup-btn" onclick="closeNewYearPopup()">ğŸŠ Thank You</button>
  </div>
</div>






  <!-- ğŸ—’ï¸ Member Note Popup -->
<div id="notePopup" style="
  display:none;
  position:fixed;
  top:0; left:0; width:100%; height:100%;
  background:rgba(0,0,0,0.6);
  z-index:9999;
  align-items:center;
  justify-content:center;
">
  <div style="
    background:white;
    padding:25px;
    border-radius:10px;
    max-width:450px;
    width:90%;
    box-shadow:0 5px 15px rgba(0,0,0,0.3);
    text-align:center;
    position:relative;
  ">
    <h2 style="color:#2e7d32;">ğŸ—’ï¸ Personal Note/your fines </h2>
    <p id="noteText" style="font-size:16px; color:#333; margin:20px 0;">Loading your note...</p>
    <button onclick="closeNotePopup()" style="
      background:#2e7d32;
      color:white;
      padding:10px 20px;
      border:none;
      border-radius:5px;
      cursor:pointer;
    ">Close</button>
  </div>
</div>

    <!-- Success Popup -->
<div id="successPopup" 
     style="display:none; position:fixed; top:20px; right:20px; background:#4caf50; color:#fff; 
            padding:10px 20px; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,0.2); 
            font-weight:bold; z-index:1000;">
  âœ… Download successful!
</div>

<!-- Fixed Countdown Bar -->
<div id="countdownBar">
<span>â³ Weekly Contributions Countdown: </span>
<span id="countdown">Loading...</span>
</div>
<!-- Progress Bar -->
<div class="progress-container">
<div class="progress-bar" id="progressBar">100%</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>


<!-- WhatsApp Contact Popup -->
<div class="popup-overlay" id="whatsappOverlay">
<div class="popup-box" style="max-width:400px; text-align:left;">
<h3>ğŸ’¬ Describe Your Issue</h3>
<textarea id="whatsappMessage" placeholder="Type your message here..." rows="4" style="width:100%; padding:10px; border:1px solid #ccc; border-radius:6px; resize:none;"></textarea>
<div style="margin-top:15px; text-align:right;">
<button onclick="sendWhatsApp()" style="padding:10px 16px; background:#25d366; color:white; border:none; border-radius:6px; cursor:pointer; font-weight:bold;">
        ğŸš€ Send
      </button>
<button onclick="closeWhatsAppForm()" style="padding:10px 16px; background:#d32f2f; color:white; border:none; border-radius:6px; cursor:pointer;">
        âŒ Cancel
      </button>
</div>
</div>
</div>
<!-- Custom Popup -->
<div class="popup-overlay" id="popup">
<div class="popup-box" id="popupBox">
<h3 id="popupTitle"></h3>
<p id="popupMessage"></p>
<button class="popup-btn" onclick="closePopup()">OK</button>
</div>
</div>
<!-- Logo at the Top -->
<div style="margin:20px 0; text-align:center;">
<img alt="Future Finders Logo" src="https://github.com/bony87/my-future-finder-chama-group/blob/main/ChatGPT%20Image%20Sep%2010,%202025,%2005_43_14%20PM.png?raw=true" style="width:150px; border-radius:10px; box-shadow:0 2px 6px rgba(0,0,0,0.2);"/>
<p style="margin-top:10px; font-style:italic; color:#555;">Our Identity, Our Strength</p>
</div>
<!-- System Update Banner -->
<div id="systemBanner" style="display:none; background:#1976d2; color:white; text-align:center; padding:10px; font-weight:bold; position:fixed; top:0; left:0; width:100%; z-index:2000;">
<span id="bannerMessage">ğŸš€ System Update: New features available!</span>
<button onclick="closeBanner()" style="margin-left:20px; background:#fff; color:#1976d2; border:none; padding:5px 10px; border-radius:4px; cursor:pointer;">âœ– Close</button>
</div>
<header>
<h1>ğŸŒ Future Finders Chama Group</h1>
<p>Empowering our members through savings, merry-go-round, and loans.</p>
</header>
<!-- NAVIGATION -->
<div id="navButtons">
<a class="nav-btn" onclick="simulateAction(this,'home')">ğŸ  Home <span class="spinner"></span></a>
<a class="nav-btn" onclick="simulateAction(this,'about')">â„¹ï¸ About Us <span class="spinner"></span></a>
<a class="nav-btn" onclick="simulateAction(this,'membership')">ğŸ‘¥ Membership <span class="spinner"></span></a>
<a class="nav-btn" onclick="simulateAction(this,'picker')">ğŸ² Pick Number <span class="spinner"></span></a>
<a class="nav-btn" onclick="simulateAction(this,'services')">ğŸ’¼ Services <span class="spinner"></span></a>
<a class="nav-btn" onclick="simulateAction(this,'updates')">
  ğŸ“° News 
  <span id="newsBadge" style="display:none; color:red; font-weight:bold; margin-left:5px;">â—</span>
<span class="spinner"></span>
</a>
<a class="nav-btn" onclick="simulateAction(this,'loginForm')">ğŸ”‘ Member Login <span class="spinner"></span></a>
<a class="nav-btn" onclick="simulateAction(this,'adminLogin')">âš™ï¸ Admin <span class="spinner"></span></a>
<a class="nav-btn" onclick="simulateAction(this,'rules')">
  ğŸ“œ Rules and Regulations <span class="spinner"></span>
</a>
<a class="nav-btn" onclick="simulateAction(this,'contact')">ğŸ“ Contact <span class="spinner"></span>
</a>
<a class="nav-btn" id="backBtn" onclick="showAllButtons()" style="display:none; background:#d32f2f;">â¬…ï¸ Back to Menu <span class="spinner"></span></a>
</div>
<!-- ğŸ“œ Rules & Regulations (Green Theme with Tooltip) -->
<section id="rules" style="background:#f5fff7; padding:30px; border-radius:12px; box-shadow:0 2px 12px rgba(0,0,0,0.08); font-family:'Poppins', sans-serif; color:#2e3b32;">
  
  <h2 style="text-align:center; color:#2e7d32; font-size:28px; margin-bottom:10px;">ğŸ“œ Rules &amp; Regulations</h2>
  <p style="text-align:center; color:#4e5d50; font-size:16px;">
    These rules guide how members of <b>Future Finders Chama Group</b> operate, ensuring fairness, transparency, and unity among members.
  </p>

  <hr style="border:0; height:2px; background:#a5d6a7; margin:25px 0; border-radius:2px;">

  <!-- Membership -->
  <h3 style="color:#1b5e20;">ğŸ‘¥ Membership</h3>
  <ul style="line-height:1.8;">
    <li>âœ… Every member must register and keep their contact details up to date.</li>
    <li>âœ… New members may join only with approval from existing members.</li>
    <li>âœ… Membership becomes official after a minimum of <b>4 months</b> of active participation.</li>
    <li>ğŸ†• Starting <b>January 2026</b>, all new members will be required to register with a one-time fee of <b>Ksh 200</b>. This amount will be used to support logistics in case of any future <b>physical meetings</b>.</li>
    <li>ğŸ’¡ From <b>2026 onwards</b>, the chama will have <b>two categories</b> of participation:
      <ul style="margin-top:8px; line-height:1.6;">
        <li>ğŸ’ <b>Category A:</b> Weekly contribution of <b>Ksh 200</b> + minimum savings of <b>Ksh 50</b>.</li>
        <li>ğŸ’¼ <b>Category B:</b> Contribution of <b>Ksh 500 twice a month</b> + minimum savings of <b>Ksh 50</b>.</li>
      </ul>
    </li>
  </ul>

  <!-- Savings -->
<h3 style="color:#2e7d32;">ğŸ’° Savings &amp; Contributions</h3>
<ul style="line-height:1.8;">
  <li>âœ… Every member must contribute according to their chosen category.</li>
  <li>âœ… Savings above the minimum are encouraged and can increase loan eligibility.</li>
  <li>âœ… All weekly or bi-monthly contributions must be received by the agreed deadlines.</li>
  <li>âš ï¸ Failure to pay by the deadline attracts a fine of <b>Ksh 30</b>, added to the memberâ€™s account.</li>
  <li>âœ… Savings and contributions records will be transparent and accessible to all members.</li>
  <li>ğŸ“Œ Members are <b>strongly encouraged to save every week</b> or as required according to their category. 
  Consistent saving demonstrates <b>trust, commitment, and seriousness</b> towards the chama.</li>

  <li>âš ï¸ Any member with <b>zero savings</b> or total savings <b>below Ksh 1,500</b> may <b>not be assisted</b> in case of emergencies or welfare issues.</li>

  <!-- Christmas Payout Rule 1 -->
  <li>ğŸ„ Members who have saved above <b>Ksh 1,500</b> for a continuous period of <b>12 months</b> will receive <b>60% of their total savings</b> shared back to their accounts on <b>Christmas Day</b>. The remaining <b>30%</b> will stay in their account for future <b>loans, investments, or emergencies</b>. A portion of this remaining amount will go to the <b>investment side</b>, while the rest will support <b>2026 activities</b> such as loans, welfare, and birthday startup.</li>

  <!-- Christmas Payout Rule 2 -->
  <li>ğŸ Members who started saving in the <b>middle of the year</b> and have saved for at least <b>6 months</b> with total savings above <b>Ksh 1,200</b> will receive <b>50% of their total savings</b> on <b>Christmas Day</b>. The remaining <b>40%</b> will stay in their accounts for <b>loans, investments, or emergencies</b>. A section of this remaining amount will also be directed to the <b>investment side</b>, with the balance supporting <b>2026 loans, welfare, and birthday startup activities</b>.</li>
</ul>


  <!-- Loans -->
  <h3 style="color:#43a047;">ğŸ¦ Loans</h3>
  <ul style="line-height:1.8;">
    <li>âœ… A member qualifies for a loan after saving at least <b>Ksh 1,500</b> and being active for <b>4 months</b>.</li>
    <li>âœ… Loans are given based on savings history and repayment ability.</li>
    <li>âœ… All loans must be approved by the leadership.</li>
    <li>âœ… Repayments must be done within the agreed period, with penalties for late payment.</li>
    <li>ğŸ’¸ Upon loan repayment, the <b>interest earned</b> will be divided as follows:
      <span style="position:relative; display:inline-block; cursor:pointer;">
        <span style="background:#2e7d32; color:white; border-radius:50%; padding:3px 8px; font-size:13px; margin-left:6px;">?</span>
        <span style="visibility:hidden; width:250px; background-color:#2e7d32; color:#fff; text-align:left; border-radius:8px; padding:8px; position:absolute; z-index:1; bottom:125%; left:50%; margin-left:-125px; opacity:0; transition:opacity 0.3s;">
          ğŸ“˜ Example: If a member pays Ksh 500 interest â€” Ksh 200 (40%) goes to their savings, and Ksh 300 (60%) is shared among members.
        </span>
      </span>
      <script>
        const tooltip = document.currentScript.previousElementSibling;
        const icon = tooltip.querySelector('span');
        icon.addEventListener('mouseenter', () => tooltip.querySelectorAll('span')[1].style.visibility = 'visible');
        icon.addEventListener('mouseleave', () => tooltip.querySelectorAll('span')[1].style.visibility = 'hidden');
      </script>
      <ul style="margin-top:8px; line-height:1.6;">
        <li>ğŸŒ¿ <b>40%</b> of the interest goes back into the borrowerâ€™s <b>savings account</b>.</li>
        <li>ğŸ¤ The remaining <b>60%</b> is shared among all members according to their individual <b>savings ratio</b>.</li>
      </ul>
    </li>
  </ul>

  <!-- Example box -->
  <div style="background:#e8f5e9; border-left:5px solid #43a047; padding:12px 15px; border-radius:8px; margin:10px 0 25px;">
    <p style="margin:0; color:#2e3b32;">
      ğŸ“˜ <b>Detailed Example:</b> If a member borrows <b>Ksh 5,000</b> and repays with <b>Ksh 500 interest</b> â€”  
      <br>âœ… <b>Ksh 200 (40%)</b> goes back into their savings.  
      <br>âœ… <b>Ksh 300 (60%)</b> is shared among all members according to their total savings.  
      <br>â¡ï¸ This encourages saving and rewards every memberâ€™s participation.
    </p>
  </div>

  <!-- Conduct -->
  <h3 style="color:#388e3c;">ğŸ¤ Conduct</h3>
  <ul style="line-height:1.8;">
    <li>âœ… Respect, honesty, and transparency are expected in all group dealings.</li>
    <li>âœ… Members must attend scheduled meetings or provide an apology in advance.</li>
    <li>âœ… Confidentiality of group matters must be maintained.</li>
  </ul>

 <!-- Leadership --> 
<h3 style="color:#1b5e20;">ğŸ§‘â€ğŸ’¼ Leadership</h3>
<ul style="line-height:1.8;">
  <li>âœ… The chama currently has <b>two leaders</b>:
    <ul style="margin-top:8px; line-height:1.6;">
      <li style="color:#2e7d32; font-weight:bold;">
        <span style="position:relative; display:inline-block; cursor:pointer;">
          ğŸ’° <b>Chairman:</b>
          <span style="visibility:hidden; width:220px; background-color:#2e7d32; color:#fff; text-align:left; border-radius:8px; padding:6px 10px; position:absolute; z-index:1; bottom:125%; left:50%; margin-left:-110px; opacity:0; transition:opacity 0.3s;">
            Founder of the group who oversees all financial matters and fund control.
          </span>
        </span> Founder of the group who oversees all <b>financial matters and fund control</b>, approves loans, and ensures proper allocation of contributions and welfare support.
      </li>
      <li style="color:#388e3c;">
        <span style="position:relative; display:inline-block; cursor:pointer;">
          ğŸ‘©â€ğŸ’¼ <b>Chairlady:</b>
          <span style="visibility:hidden; width:220px; background-color:#388e3c; color:#fff; text-align:left; border-radius:8px; padding:6px 10px; position:absolute; z-index:1; bottom:125%; left:50%; margin-left:-110px; opacity:0; transition:opacity 0.3s;">
            Assists in coordination, member welfare, communication, and monitoring contributions and activities.
          </span>
        </span> Assists in coordination, member welfare, communication, and helps monitor contributions and activities to ensure smooth operations.
      </li>
    </ul>
  </li>
  <li>âœ… Since the chama operates <b>online</b>, leadership is kept minimal for efficiency and transparency.</li>
  <li>âœ… Both leaders oversee contributions, savings, loans, and welfare matters to ensure smooth group operations.</li>
  <li>âœ… Leaders serve for agreed terms and can be re-elected or replaced through a transparent vote by members.</li>
  <li>âœ… Regular updates on group finances and activities will be shared with all members to maintain accountability.</li>
</ul>




 <!-- Welfare --> 
<h3 style="color:#2e7d32;">ğŸ’ Member Assistance &amp; Welfare</h3>
<ul style="line-height:1.8;">
  <li>ğŸ•Šï¸ In the event that a member <b>loses a parent or guardian</b>, every member will be <b>deducted or required to contribute Ksh 150</b> in support of the affected member.</li>

  <li>ğŸ‘¶ If a member <b>loses a child</b>, every member will be <b>deducted or required to contribute Ksh 100</b> in support of the affected member.</li>

  <li>ğŸš‘ In the event of a personal <b>emergency</b>, a member with total savings of <b>Ksh 1,500 and above</b> may be assisted with up to <b>30%</b> of their savings. When their turn to receive money comes, <b>20%</b> will be deducted to recover part of the assistance. This assistance applies <b>only once per round</b>.</li>

  <li>â¤ï¸ Additional support may be provided upon agreement by members, depending on the situation and available funds.</li>
 </ul>
 <li>ğŸ“¢ Members are advised to <b>inform the admin early</b> if they anticipate any financial or personal challenge that may affect their contributions or savings.</li>

<p style="margin-top:10px; color:#33691e; font-style:italic;">
  ğŸ’¡ <b>Note:</b> Members are encouraged to plan their finances carefully to minimize frequent emergencies and ensure long-term stability within the group.
</p>

<h3 style="color:#2e7d32;">ğŸ” Savings Withdrawal &amp; Exit Policy</h3> 
<ul style="line-height:1.8;">
  <li>ğŸšª Any member who requests to receive their <b>full savings</b> back shall be considered as a member who is <b>leaving the chama completely</b>.</li>
  <li>â³ Full savings withdrawal will be processed and released within a period of <b>up to 7 days</b> after official notification.</li>
  <li>ğŸ“© The member must <b>inform the admin in advance</b> to allow proper planning and smooth processing.</li>
</ul>


  <!-- Discipline --> 
<h3 style="color:#558b2f;">âš–ï¸ Disciplinary Actions</h3>
<ul style="line-height:1.8;">
  <li>âš ï¸ Members who fail to meet obligations, including late payments or failure to save consistently, may face <b>progressive penalties</b> as agreed by members.</li>

  <li>ğŸ“‰ Members who remain <b>inactive</b> (no savings or contributions) for a prolonged period without communication may be <b>suspended</b> until compliance.</li>

  <li>ğŸ—£ï¸ Any form of <b>disrespect, insults, or disruptive behavior</b> towards members or leaders is prohibited and may lead to penalties or suspension.</li>

  <li>ğŸ”• Sharing chama information, financial records, or member details with <b>non-members without approval</b> is strictly forbidden.</li>

  <li>ğŸš« Any member who provides <b>false information</b>, misleads the group, or attempts to <b>defraud the chama</b> shall face immediate disciplinary action, including possible removal.</li>

  <li>âš–ï¸ Before removal or major disciplinary action, the affected member shall be given a <b>fair hearing</b> and an opportunity to explain their case.</li>

  <li>ğŸ§‘â€âš–ï¸ In urgent or serious cases, the <b>leadership may take temporary action</b> to protect the chama, subject to later member approval.</li>

  <li>âŒ Continuous misconduct or serious violations may lead to <b>permanent removal</b> from the group.</li>

  <li>ğŸ¤ Disputes shall be resolved through <b>dialogue</b> and, where necessary, a <b>member vote</b>.</li>
</ul>

<hr style="border:0; height:2px; background:#a5d6a7; margin:25px 0; border-radius:2px;">

<p style="text-align:center; color:#1b5e20; font-style:italic;">
  âš ï¸ <b>Please adhere to all the above rules and regulations.</b><br>
  For any questions or concerns, kindly reach out to the <b>Chairperson</b> through the 
  <a href="#contact" style="color:#2e7d32; text-decoration:none; font-weight:bold;">Contact Section</a>.
</p>

  <!-- Back Button -->
  <div style="text-align:center; margin-top:25px;">
    <a class="action-btn" onclick="simulateAction(this,'home')" 
       style="background:#2e7d32; color:white; padding:12px 24px; border-radius:8px; text-decoration:none; font-weight:bold; box-shadow:0 2px 5px rgba(46,125,50,0.3);">
      â¬…ï¸ Back to Home <span class="spinner"></span>
    </a>
  </div>
</section>


<!-- ğŸ’¼ Services -->
<section id="services">
<h2>ğŸ’¼ Our Services</h2>
<ul style="list-style:none; padding:0; font-size:16px;">
<li>ğŸ’° <b>Monthly Savings:</b> Contribute consistently and grow your financial discipline.</li>
<li>ğŸ“Š <b>Group Contributions:</b> Transparent tracking of all members' contributions.</li>
<li>ğŸ¦ <b>Loan Services:</b> Apply for loans based on your savings history and eligibility.</li>
<li>ğŸ² <b>Lucky Number Draw:</b> Fun reward system to encourage participation.</li>
<li>ğŸ“° <b>System Updates:</b> Get notified instantly about changes and new features.</li>
<li>ğŸ¤ <b>Member Support:</b> Assistance via WhatsApp, phone, or email directly from the app.</li>
</ul>
<!-- Optional Buttons -->
<div style="margin-top:15px; display:flex; gap:10px; flex-wrap:wrap; justify-content:center;">
<!-- Register Button -->
<a class="action-btn" onclick="simulateAction(this,'membership')" style="background:#388e3c;">
    ğŸ“ Register as Member <span class="spinner"></span>
</a>
<!-- Contact Button -->
<a class="action-btn" onclick="simulateAction(this,'contact')" style="background:#1976d2;">
    ğŸ“ Contact Support <span class="spinner"></span>
</a>
<!-- Back Button -->
<a class="action-btn" onclick="simulateAction(this,'services')" style="background:#d32f2f; margin-top:15px;">
    â¬…ï¸ Back to Services <span class="spinner"></span>
</a>
</div>
</section>
<!-- ğŸ“° News & Updates Section -->
<!-- ğŸ“° NEWS & UPDATES SECTION -->
<section id="updates">
  <h2>ğŸ“° News & Updates</h2>

  <!-- ========================= -->
  <!-- ğŸ”’ PREVIOUS MEETING -->
  <!-- ========================= -->
  <div style="margin-top:15px; padding:15px; background:#fbe9e7; border-left:6px solid #d32f2f; border-radius:8px;">
    <h3 style="color:#b71c1c;">ğŸ—“ï¸ FUTURE FINDERS CHAMA â€“ PREVIOUS MEETING</h3>

    <p>
      <b>Date:</b> Sunday<br>
      <b>Time:</b> 8:30 PM<br>
      <b>Platform:</b> WhatsApp Group
    </p>

    <p><b>Agenda Covered:</b></p>
    <ol>
      <li>ğŸ§¾ Polishing of Rules & Regulations</li>
      <li>ğŸ“ˆ Chama Progress Discussion</li>
      <li>ğŸ’¸ Fine of Ksh 30</li>
    </ol>

    <div style="margin-top:15px; font-weight:bold; font-size:18px; color:#d32f2f;">
      ğŸ”’ MEETING CLOSED<br>
      Thank you all for attending ğŸ™
    </div>
  </div>

  <!-- ========================= -->
  <!-- â³ UPCOMING MEETING -->
  <!-- ========================= -->
  <div style="margin-top:25px; padding:15px; background:#e3f2fd; border-left:6px solid #1565c0; border-radius:8px;">
    <h3 style="color:#0d47a1;">ğŸ—“ï¸ FUTURE FINDERS CHAMA â€“ UPCOMING MEETING</h3>

    <p>
      <b>Date:</b> Tuesday, <b>21st January 2026</b><br>
      <b>Time:</b> 8:30 PM â€“ 10:00 PM<br>
      <b>Platform:</b> WhatsApp Group
    </p>

    <p><b>Agenda:</b></p>
    <ol>
      <li>
        Two Category Chama Discussion â€“  
        How the categories will run, especially the <b>Bi-Monthly Chama</b>
      </li>
      <li>Update on Rules</li>
      <li>A.O.B (Any Other Business)</li>
    </ol>

    <p style="font-style:italic; color:#0d47a1;">
      All members are kindly requested to attend on time.<br>
      <b>Together we grow â€” Future Finders, Our Identity, Our Strength.</b>
    </p>

    <!-- COUNTDOWN OUTPUT -->
    <div id="upcomingCountdown"
         style="margin-top:20px; font-weight:bold; font-size:18px; color:#1565c0;">
      â³ Countdown loading...
    </div>
  </div>

</section>

<!-- ================================= -->
<!-- â° JAVASCRIPT FOR UPCOMING MEETING -->
<!-- ================================= -->
<script>
  // UPCOMING MEETING TIMES
  const upcomingStart = new Date("January 21, 2026 20:30:00"); // 8:30 PM
  const upcomingEnd   = new Date("January 21, 2026 22:00:00"); // 10:00 PM

  function updateUpcomingMeeting() {
    const el = document.getElementById("upcomingCountdown");
    const now = new Date();

    // BEFORE MEETING
    if (now < upcomingStart) {
      const diff = upcomingStart - now;

      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
      const minutes = Math.floor((diff / (1000 * 60)) % 60);
      const seconds = Math.floor((diff / 1000) % 60);

      el.style.color = "#1565c0";
      el.innerHTML =
        `â³ Meeting starts in <b>${days}d ${hours}h ${minutes}m ${seconds}s</b>`;
    }

    // MEETING LIVE
    else if (now >= upcomingStart && now < upcomingEnd) {
      el.style.color = "#2e7d32";
      el.innerHTML =
        "ğŸŸ¢ <b>MEETING IS LIVE</b><br>Join on WhatsApp now";
    }

    // MEETING CLOSED
    else {
      el.style.color = "#d32f2f";
      el.innerHTML =
        "ğŸ”’ <b>MEETING CLOSED</b><br>Thank you all for attending ğŸ™";
      clearInterval(upcomingTimer);
    }
  }

  const upcomingTimer = setInterval(updateUpcomingMeeting, 1000);
  updateUpcomingMeeting();
</script>


<!-- Contact -->
<section id="contact">
<h2>ğŸ“ Contact Us</h2>
<button class="contact-btn email" onclick="contactEmail()">ğŸ“§ Email Us</button>
<button class="contact-btn phone" onclick="contactPhone()">ğŸ“ Call Us</button>
<button class="contact-btn whatsapp" onclick="contactWhatsApp()">ğŸ’¬ WhatsApp Chat</button>
</section>
<section class="active" id="home">
<h2>ğŸ  Home</h2>
<p>Welcome to Future Finders Chama. Together we save, invest, and grow.</p>
</section>
<!-- Random Picker -->
<section id="picker">
<h2>ğŸ‰ Random Number Picker</h2>
<!-- Select member -->
<label for="memberSelect"><b>Select Your Name:</b></label>
<select id="memberSelect" required="">
<option value="">-- Choose your name --</option>
<option>BONIFACE CHELLUGET</option>
<option>HILDA ODERO</option>
<option>JOEL EGESA</option>
<option>SHALIK SHIVERENGE</option>
<option>EVERLINE MAINA</option>
<option>ELVIS KAMASH</option>
<option>JULIUS KEBASO</option>
<option>CHRISTINE PIUS</option>
<option>EDNAH NANCY</option>
<option>JACKIENYARANGI</option>
<option>JUDITH OMWOYO</option>
<option>JANET NYAKUNDI</option>
<option>ANASTANCIA OMWOYO</option>
<option>PIUS NYAKUNDI</option>
<option>SAMUEL OYUGI</option>
<option>PURITY MOMANYI</option>
<option>KEFFA MOMANYI</option>
<option>KENNEDY MUTAYI</option>
<option>MIKE MORRIS</option>
<option>DAVY OMBATI</option>
<option>FAITH MOKOGI</option>
<option>SADLER KARAN</option>
<option>SHARON CHEPTOO</option>
<option>SHAMIM KAMASH</option>
<option>CLAUDIA MORAA</option>
<option>ESTHER OBEGI</option>
</select>
<!-- Choose send method -->
<div style="margin: 10px 0;">
<label><input name="sendOption" type="radio" value="whatsapp"/> Send via WhatsApp ğŸ’¬</label>
</div>
<!-- Pick button -->
<a class="action-btn" id="pickBtn" onclick="pickNumber()">
  Pick Lucky Number <span class="spinner"></span>
</a>
<div id="diceBox">ğŸ²</div>
<div id="result" style="text-align:center; font-size:18px; margin-top:10px;"></div>
<audio id="diceSound" preload="auto" src="dice-roll.mp3"></audio>
<p id="result"></p>
</section>
<!-- â„¹ï¸ About Us -->
<section id="about">
  <h2>â„¹ï¸ About Us</h2>

  <p>
    Welcome to <b>Future Finders Chama Group</b> â€“ a community of dedicated individuals
    who believe in the power of <b>saving, supporting, and growing together</b>.
    We are built on trust, discipline, and a shared vision of financial independence.
  </p>

  <!-- Mission & Vision -->
  <h3>ğŸŒŸ Our Mission</h3>
  <p>
    To empower members through disciplined savings, merry-go-round contributions,
    and access to affordable loans that support financial growth.
  </p>

  <h3>ğŸ‘ï¸ Our Vision</h3>
  <p>
    To build a financially independent and empowered community where members grow
    together and achieve long-term prosperity.
  </p>

  <!-- Core Values -->
  <h3>ğŸ’¡ Our Core Values</h3>
  <ul>
    <li>ğŸ¤ Unity &amp; Teamwork</li>
    <li>ğŸ“ˆ Growth &amp; Prosperity</li>
    <li>ğŸ’° Financial Discipline</li>
    <li>ğŸŒ Community Empowerment</li>
    <li>ğŸ” Transparency &amp; Accountability</li>
  </ul>

  <!-- What We Do -->
  <h3>ğŸ“Š What We Do</h3>
  <ul>
    <li>ğŸ’° Encourage consistent saving among members</li>
    <li>ğŸ” Operate a transparent merry-go-round system</li>
    <li>ğŸ¦ Provide affordable loans based on savings history</li>
    <li>ğŸ¤ Support members during emergencies and milestones</li>
  </ul>

  <!-- Who Can Join -->
  <h3>ğŸ‘¥ Who Can Join</h3>
  <p>
    Membership is open to disciplined individuals who value commitment, teamwork,
    and long-term financial growth within a supportive community.
  </p>

  <!-- Leadership -->
  <h3>ğŸ§‘â€ğŸ’¼ Our Leadership</h3>
  <p>
    Founded by <b>BONIFACE KAISER</b>, the group is guided by dedicated leaders and
    members who work together to ensure transparency, accountability, and unity.
  </p>

  <!-- Journey / History -->
  <h3>ğŸ“œ Our Journey</h3>
  <p>
    Established in <b>January 2024</b>, Future Finders Chama began as a small savings
    initiative. Today, it has grown into a vibrant community offering savings,
    loans, investments, and member welfare support.
  </p>

  <!-- Meetings -->
  <h3>ğŸ“… Our Meetings</h3>
  <p>
    Meetings are held <b> online via WhatsApp</b>, where members discuss
    contributions, loans, updates, and overall group progress.
  </p>

  <!-- Long-Term Goals -->
  <h3>ğŸ¯ Our Long-Term Goals</h3>
  <ul>
    <li>ğŸ“ˆ Build a strong and sustainable investment fund</li>
    <li>ğŸ  Support members with major life and business projects</li>
    <li>ğŸ’¼ Create income-generating opportunities</li>
    <li>ğŸŒ Promote long-term financial stability for all members</li>
  </ul>

  <!-- Community Culture -->
  <h3>ğŸ¤ Our Community Culture</h3>
  <p>
    At Future Finders Chama, we value respect, honesty, and accountability.
    We celebrate achievements together and stand by one another during challenges.
  </p>

  <!-- Call to Action -->
  <h3>ğŸ“ Join or Learn More</h3>
  <p>
    Interested in joining or learning more about how we operate?
    Visit the <b>Membership</b> section or reach out through the <b>Contact</b> page.
  </p>

  <!-- Logo -->
  <div style="margin:20px 0; text-align:center;">
    <img
      alt="Future Finders Chama Logo"
      src="logo.png"
      style="width:150px; border-radius:10px; box-shadow:0 2px 6px rgba(0,0,0,0.2);"
    />
    <p style="margin-top:10px; font-style:italic; color:#555;">
      Our Identity, Our Strength
    </p>
  </div>
</section>

<!-- âš™ï¸ Admin Login -->
<section id="adminLogin">
  <h2>âš™ï¸ Admin Login</h2>
  <input id="adminUser" placeholder="Admin Name" type="text" />

  <!-- Admin Password -->
  <div class="password-container">
    <input id="adminPass" placeholder="Admin Password" type="password" />
    <span class="toggle-eye" onclick="togglePassword('adminPass', this)">ğŸ‘ï¸</span>
  </div>

  <a class="action-btn" id="adminBtn" onclick="adminLogin()">
    Admin Login <span class="spinner"></span>
  </a>
  <p id="adminLoginMessage"></p>
</section>

<!-- =================== ADMIN PANEL =================== -->
<section id="admin" style="display:none;">
  <!-- Logo and Motto -->
  <div style="margin:20px 0; text-align:center;">
    <img alt="Future Finders Logo"
      src="https://github.com/bony87/my-future-finder-chama-group/blob/main/ChatGPT%20Image%20Sep%2010,%202025,%2005_43_14%20PM.png?raw=true"
      style="width:150px; border-radius:10px; box-shadow:0 2px 6px rgba(0,0,0,0.2);" />
    <p style="margin-top:10px; font-style:italic; color:#555;">Our Identity, Our Strength</p>
  </div>

  <!-- Logout -->
  <button id="logoutBtn" onclick="adminLogout()" style="margin-bottom:15px; padding:10px; background:#d32f2f; color:white; border:none; border-radius:5px; cursor:pointer;">
    ğŸšª Logout
    <span class="spinner" style="display:none; margin-left:8px; border:2px solid #f3f3f3; border-top:2px solid white; border-radius:50%; width:14px; height:14px; animation: spin 1s linear infinite; vertical-align:middle;"></span>
  </button>

  <!-- Quick Tools -->
  <button onclick="showAvailableNumbers()" style="margin-top:10px; padding:8px 14px; background:#388e3c; color:white; border:none; border-radius:5px; cursor:pointer;">
    ğŸ“‹ Show Available Numbers
  </button>

  <!-- SUMMARY CARDS -->
  <div id="adminSummary" style="display:flex; gap:15px; margin:15px 0; flex-wrap:wrap;">
    <div class="summary-card" id="totalMembersCard">ğŸ‘¥ Total Members: 0</div>
    <div class="summary-card" id="totalSavingsCard">ğŸ’° Total Savings: Ksh 0</div>
    <div class="summary-card" id="totalLoansCard">ğŸ“‘ Total Loans: 0</div>
    <div class="summary-card" id="loanBreakdownCard">ğŸ“Š Loan Status: 0 Pending / 0 Approved / 0 Rejected</div>
  </div>

  <!-- ğŸ—’ï¸ Members Notes -->
  <div id="membersNotesPanel" style="margin-top:25px; border-top:1px dashed #ddd; padding-top:15px;">
    <h3>ğŸ—’ï¸ Members Notes</h3>
    <div style="display:flex; gap:10px; flex-wrap:wrap; align-items:flex-start;">
      <input id="noteMemberName" placeholder="Member name (optional)" type="text"
        style="padding:8px; border:1px solid #ccc; border-radius:5px; width:250px;" />
      <textarea id="noteText" placeholder="Type your note here..." rows="3"
        style="flex:1; min-width:260px; padding:8px; border:1px solid #ccc; border-radius:5px;"></textarea>
      <div style="display:flex; flex-direction:column; gap:8px;">
        <button id="saveNoteBtn" onclick="saveMemberNote()" style="padding:10px 14px; background:#1976d2; color:white; border:none; border-radius:5px; cursor:pointer;">ğŸ’¾ Save Note</button>
        <button onclick="clearNoteInputs()" style="padding:8px 12px; background:#9e9e9e; color:white; border:none; border-radius:5px; cursor:pointer;">âœ– Clear</button>
      </div>
    </div>
    <p id="noteMessage" style="color:green; margin-top:8px;"></p>
    <div style="margin-top:12px;">
      <label style="font-weight:600;">Saved Notes (most recent first)</label>
      <button onclick="downloadNotesCSV()" style="margin-left:8px; padding:6px 10px; background:#388e3c; color:white; border:none; border-radius:4px; cursor:pointer;">â¬‡ï¸ Download CSV</button>
      <button onclick="clearAllNotes()" style="margin-left:6px; padding:6px 10px; background:#d32f2f; color:white; border:none; border-radius:4px; cursor:pointer;">ğŸ—‘ï¸ Clear All</button>
      <table id="membersNotesTable" border="1" style="width:100%; border-collapse:collapse; text-align:left; margin-top:10px;">
        <thead style="background:#1976d2; color:white;">
          <tr>
            <th style="width:160px;">Date</th>
            <th style="width:160px;">Member</th>
            <th>Note</th>
            <th style="width:120px; text-align:center;">Actions</th>
          </tr>
        </thead>
        <tbody id="membersNotesBody">
          <tr><td colspan="4" style="color:gray; text-align:center;">No notes yet.</td><td class="saved2025">0</td><td class="reward2025">0</td></tr>
        </tbody>
      </table>
    </div>
  </div>
<!-- ğŸ‘¥ Members Overview Section -->
<div id="membersOverviewPanel" style="margin-top:30px; border-top:1px dashed #ccc; padding-top:20px;">
  <h2 style="color:#1976d2; margin-bottom:15px;">ğŸ‘¥ Members Overview</h2>

  <!-- Search and Export -->
  <div style="display:flex; flex-wrap:wrap; gap:10px; margin-bottom:12px;">
    <input id="memberSearchInput" onkeyup="filterMembersTable()" placeholder="ğŸ” Search by name or phone..."
      style="flex:1; min-width:200px; padding:10px; border:1px solid #bbb; border-radius:6px; font-size:15px;">
    <button onclick="exportMembersCSV()" 
      style="padding:10px 16px; background:#1976d2; color:white; border:none; border-radius:6px; cursor:pointer;">
      â¬‡ï¸ Export CSV
    </button>
  </div>

  <!-- Styled Table -->
  <div style="overflow-x:auto; border:1px solid #ccc; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.1);">
    <table id="membersTable" style="width:100%; border-collapse:collapse; font-size:15px;">
      <thead style="background:#1565c0; color:white; text-align:left; cursor:pointer;">
  <tr>
    <th onclick="sortMembersTable('name')" style="padding:10px;">Name â¬</th>
    <th onclick="sortMembersTable('phone')" style="padding:10px;">Phone â¬</th>
    <th onclick="sortMembersTable('savings')" style="padding:10px;">Total Savings (Ksh) â¬</th>
    <th style="padding:10px;">Monthly Deposits</th>
    <th onclick="sortMembersTable('note')" style="padding:10px;">Note â¬</th>
  </tr>
</thead>

      <tbody id="membersTableBody" style="background:white;">
        <tr>
          <td colspan="5" style="text-align:center; color:gray; padding:20px;">Loading members...</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Summary -->
  <div id="membersSummary" style="margin-top:15px; font-weight:600; color:#333;">
    ğŸ‘¤ Total Members: <span id="totalMembersCount">0</span> |
    ğŸ’° Combined Savings: Ksh <span id="totalSavingsSum">0</span>
  </div>
</div>

<!-- Table Styles -->
<style>
  #membersTable tbody tr:nth-child(even) {
    background: #f9f9f9;
  }
  #membersTable tbody tr:hover {
    background: #e3f2fd;
    transition: 0.2s;
  }
  #membersTable th, #membersTable td {
    border-bottom: 1px solid #ddd;
    padding: 10px;
    vertical-align: top;
  }
  #membersTable td {
    color: #333;
  }
</style>


  <!-- ğŸ‘¤ Member Management -->
  <h3>ğŸ‘¤ Member Management</h3>
  <input id="loanSearch" onkeyup="filterLoans()" placeholder="ğŸ” Search loans by name, phone, or status..." style="width:95%; padding:8px; margin:10px 0; border:1px solid #ccc; border-radius:5px;" type="text" />
  <select id="loanStatusFilter" onchange="filterLoans()" style="padding:8px; margin:10px 0; border:1px solid #ccc; border-radius:5px;">
    <option value="">ğŸ“‚ Show All</option>
    <option value="Pending">â³ Pending</option>
    <option value="Approved">âœ… Approved</option>
    <option value="Rejected">âŒ Rejected</option>
  </select>
  <button onclick="exportLoans()" style="padding:8px 12px; margin:10px 0; background:#1976d2; color:white; border:none; border-radius:5px; cursor:pointer;">
    ğŸ“‚ Export Loans (CSV)
  </button>

  <!-- ğŸ“œ Loan Applications Table -->
  <h3>ğŸ“œ Loan Applications</h3>
  <table border="1" style="width:100%; border-collapse:collapse; text-align:center;">
    <thead style="background:#1976d2; color:white;">
      <tr>
        <th>Name</th>
        <th>Phone</th>
        <th>Qualified Loan</th>
        <th>Requested Amount</th>
        <th>ID Number</th>
        <th>Period</th>
        <th>Repayment</th>
        <th>Date</th>
        <th>Status</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody id="adminLoanBody">
      <tr><td colspan="10" style="color:gray;">No applications yet.</td><td class="saved2025">0</td><td class="reward2025">0</td></tr>
    </tbody>
  </table>

  <!-- ğŸ² Lucky Numbers -->
  <button onclick="togglePickedNumbers()" style="padding:10px; margin:5px; background:#1976d2; color:white; border:none; border-radius:5px; cursor:pointer;">
    ğŸ² View Picked Numbers
  </button>
  <div id="pickedNumbersTable" style="display:none; margin-top:20px;">
    <h3>ğŸ² Picked Lucky Numbers</h3>
    <button onclick="downloadPickedNumbers()" style="margin-bottom:10px; padding:8px 12px; background:#388e3c; color:white; border:none; border-radius:5px; cursor:pointer;">â¬‡ï¸ Download CSV</button>
    <button onclick="resetPickedNumbers()" style="margin-bottom:10px; padding:8px 12px; background:#d32f2f; color:white; border:none; border-radius:5px; cursor:pointer;">ğŸ—‘ï¸ Reset Picked Numbers</button>
    <table border="1" style="width:100%; border-collapse:collapse; text-align:center;">
      <thead style="background:#1976d2; color:white;">
        <tr><th>Member</th><th>Lucky Number</th></tr>
      </thead>
      <tbody id="pickedNumbersBody">
        <tr><td colspan="2" style="color:gray;">No numbers picked yet.</td><td class="saved2025">0</td><td class="reward2025">0</td></tr>
      </tbody>
    </table>
  </div>

  <!-- ğŸ“ Pending Members -->
  <div id="pendingMembersPanel" style="margin-top:20px;">
    <h3>ğŸ“ Pending Member Registrations</h3>
    <table border="1" style="width:100%; border-collapse:collapse; text-align:center;">
      <thead style="background:#00796b; color:white;">
        <tr>
          <th>Name</th>
          <th>Phone</th>
          <th>Email</th>
          <th>Status</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody id="pendingMembersBody">
        <tr><td colspan="5" style="color:gray;">No pending registrations.</td><td class="saved2025">0</td><td class="reward2025">0</td></tr>
      </tbody>
    </table>
  </div>

  <!-- ğŸš€ System Updates -->
  <h3>ğŸš€ System Updates</h3>
  <textarea id="updateMessage" placeholder="Type new update..." style="width:90%; padding:10px; margin-bottom:10px;"></textarea><br />
  <button onclick="postUpdate()" style="padding:10px; background:#1976d2; color:white; border:none; border-radius:5px; cursor:pointer;">ğŸ“¢ Post Update</button>

  <!-- Optional WhatsApp Notifications -->
  <div id="memberSelectionBox" style="display:none; margin-top:8px;">
    <label><b>Select Members:</b></label><br />
    <select id="memberSelectMulti" multiple size="10" style="width:260px; padding:6px;"></select><br />
    <button onclick="selectAllMembers()" style="margin-top:5px; padding:5px 10px; background:#388e3c; color:white; border:none; border-radius:4px; cursor:pointer;">âœ… Select All</button>
    <input id="memberSearch" onkeyup="filterMembers()" placeholder="ğŸ” Search member..." style="width:260px; padding:6px; margin-bottom:6px;" type="text" />
    <button onclick="clearAllMembers()" style="margin-top:5px; padding:5px 10px; background:#d32f2f; color:white; border:none; border-radius:4px; cursor:pointer;">âŒ Clear All</button>
    <p style="font-size:12px; color:gray; margin-top:5px;">(Hold CTRL/SHIFT to select multiple manually)</p>
  </div>

  <label style="display:block; margin-top:8px;">
    <input id="sendWhatsAppUpdate" onchange="toggleMemberSelection()" type="checkbox" /> ğŸ“² Send WhatsApp notification to members
  </label>

  <!-- ğŸ“œ Past Updates -->
  <div style="margin-top:20px;">
    <h4>ğŸ“œ Past Updates</h4>
    <table border="1" style="width:100%; border-collapse:collapse; text-align:center;">
      <thead style="background:#1976d2; color:white;">
        <tr><th>All Updates (Click to Expand/Collapse)</th></tr>
      </thead>
      <tbody id="updateHistoryBody">
        <tr><td style="color:gray;">No updates posted yet.</td><td class="saved2025">0</td><td class="reward2025">0</td></tr>
      </tbody>
    </table>
  </div>
</section>

<!-- Styles for Notes Table -->
<style>
  #membersNotesTable td, #membersNotesTable th {
    padding: 8px;
    vertical-align: top;
  }
  .note-action-btn {
    padding: 6px 8px;
    margin: 0 4px;
    border-radius: 4px;
    border: none;
    cursor: pointer;
  }
  .note-edit { background: #1976d2; color: white; }
  .note-delete { background: #d32f2f; color: white; }
</style>

<section id="membership" style="display:none;"> 
  <h2>ğŸ‘¥ Membership</h2>
  <p>If youâ€™re new read all the rules before registarion. If already a member, log in.</p>

  <!-- Eligibility Info -->
<div style="margin:20px auto; padding:15px; background:#e3f2fd; border-left:6px solid #1976d2; border-radius:8px; max-width:600px;">
  <h3 style="color:#1976d2; margin-bottom:10px;">ğŸ“Œ Membership & Loan Eligibility</h3>
  <p style="line-height:1.6; color:#333;">
    âœ… <b>Loan Qualification:</b> A member must have saved at least <b>Ksh 1,500</b>.<br/><br/>
   âœ… <b>Official Membership:</b> To become an official member, you must be active in the chama for a minimum of <b>4 months</b> and complete the <b>Ksh 200 registration fee</b> payment.<br/><br/>

    âœ… <b>Commitment:</b> Members are expected to contribute consistently and maintain good financial discipline.<br/><br/>
    âœ… <b>Support & Trust:</b> Being a member means supporting one another and upholding transparency within the group.<br/><br/>
    <div style="margin:20px auto; padding:20px; max-width:600px; background:#fff3e0; border-left:6px solid #fb8c00; border-radius:10px; box-shadow:0 4px 12px rgba(0,0,0,0.1); font-family:Arial, sans-serif;">
  <h3 style="color:#fb8c00; margin-bottom:15px; font-size:18px;">ğŸ’° Registration Fee</h3>
  <p style="font-size:16px; color:#333; line-height:1.6;">
    After completing your registration, you are required to pay a 
    <span style="font-weight:bold; color:#d84315;">Ksh 200</span> registration fee to the following till:
  </p>
  <div style="margin-top:10px; padding:15px; background:#fff8e1; border-radius:8px; border:1px dashed #fb8c00; text-align:center;">
    <p style="margin:5px 0; font-size:18px;"><b>Till Number:</b> <span style="color:#e65100;">3591312</span></p>
    <p style="margin:5px 0; font-size:16px;"><b>Account Name for the till:</b> BONIFACE CHELLUGET</p>
  </div>
  <p style="margin-top:10px; font-size:14px; color:#555;">
    âœ… Make sure to pay the fee to activate your membership.
  </p>
</div>

  </p>
</div>
<!-- Registration Form -->
<div id="registerForm" style="max-width:600px; margin:40px auto; padding:30px; background:#f7f9fc; border-radius:12px; box-shadow:0 8px 20px rgba(0,0,0,0.1); font-family:Arial, sans-serif;"> 
  <h3 style="color:#1976d2; text-align:center; margin-bottom:25px;">ğŸ“ New Member Registration</h3>

  <!-- Input fields -->
  <div class="form-group"><input id="regName" placeholder="Full Name" type="text"/></div>
  <div class="form-group"><input id="regPhone" placeholder="Phone Number" type="text"/></div>
  <div class="form-group"><input id="regEmail" placeholder="Email Address" type="email"/></div>
  <div class="form-group"><input id="regDOB" placeholder="Date of Birth" type="date"/></div>
  
  <div class="form-group">
    <input 
      id="regID" 
      placeholder="ID Number (7â€“9 digits)" 
      type="text"
      maxlength="9"
      inputmode="numeric"
      oninput="this.value = this.value.replace(/[^0-9]/g, '')"
    />
  </div>

  <div class="form-group"><input id="regAddress" placeholder="Physical Address / Town" type="text"/></div>
  <div class="form-group"><input id="regOccupation" placeholder="Occupation / Employer" type="text"/></div>
  <div class="form-group"><input id="regSavings" placeholder="Initial Savings Amount (Ksh)" type="number"/></div>
  <div class="form-group"><input id="regPass" placeholder="Set Password" type="password"/></div>
  <div class="form-group"><input id="regPassConfirm" placeholder="Repeat Password" type="password"/></div>

  <div class="form-group">
    <select id="regComm">
      <option value="">Preferred Communication</option>
      <option value="whatsapp">WhatsApp</option>
      <option value="sms">SMS</option>
      <option value="email">Email</option>
    </select>
  </div>

  <!-- Checkboxes -->
  <div class="form-group">
    <label><input type="checkbox" id="regAgree"/> I agree to the <a href="#">Chama Rules & Regulations</a></label>
  </div>
  <div class="form-group">
    <label><input type="checkbox" id="regDeclaration"/> I declare that the information I have provided is true and correct.</label>
  </div>

  <!-- Buttons -->
  <div class="form-group" style="text-align:center;">
    <button onclick="registerMember()" style="background:#1976d2; color:white; margin-bottom:10px;">Register</button>
    <button id="downloadFormBtn" style="display:none; background:#4caf50; margin-right:10px;">Download Registration Form</button>
    <button id="shareWhatsAppBtn" style="display:none; background:#25D366; color:white;">Share on WhatsApp</button>
  </div>
</div>

<!-- Note after registration -->
<p id="nbMessage" style="display:none; color:#d84315; text-align:center; font-style:italic; margin-top:10px;">
  NB: Please download the form first, then click the WhatsApp button to share your registration data.
</p>

<!-- Include jsPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
async function registerMember() {
  const name = document.getElementById("regName").value.trim();
  const phone = document.getElementById("regPhone").value.trim();
  const email = document.getElementById("regEmail").value.trim();
  const dob = document.getElementById("regDOB").value.trim();
  const idNumber = document.getElementById("regID").value.trim();
  const address = document.getElementById("regAddress").value.trim();
  const occupation = document.getElementById("regOccupation").value.trim();
  const savings = document.getElementById("regSavings").value.trim();
  const password = document.getElementById("regPass").value.trim();
  const confirmPassword = document.getElementById("regPassConfirm").value.trim();
  const comm = document.getElementById("regComm").value;
  const agree = document.getElementById("regAgree").checked;
  const declaration = document.getElementById("regDeclaration").checked;

  // Validation
  if (!name || !phone || !email || !dob || !idNumber || !password || !confirmPassword || !agree || !declaration) {
    alert("Please fill all required fields and check both agreements.");
    return;
  }

  // ID restriction
  if (!/^\d{7,9}$/.test(idNumber)) {
    alert("ID Number must be between 7 and 9 digits.");
    return;
  }

  // Phone restriction (Kenya: 10 digits starting with 0)
  if (!/^0\d{9}$/.test(phone)) {
    alert("Phone number must be 10 digits starting with 0.");
    return;
  }

  // Email restriction
  if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
    alert("Please enter a valid email address.");
    return;
  }

  // Password match
  if (password !== confirmPassword) {
    alert("Passwords do not match.");
    return;
  }

  // Save member
  const members = JSON.parse(localStorage.getItem("members")) || [];
  const newMember = { name, phone, email, dob, idNumber, address, occupation, savings, password, comm, timestamp: new Date().toLocaleString() };
  members.push(newMember);
  localStorage.setItem("members", JSON.stringify(members));

  alert("Registration Successful! âœ… You can now download your form or share on WhatsApp.");

  // Show buttons and NB
  document.getElementById("downloadFormBtn").style.display = "inline-block";
  document.getElementById("shareWhatsAppBtn").style.display = "inline-block";
  document.getElementById("nbMessage").style.display = "block";

  // WhatsApp share message
  const adminMessage = `ğŸ“ New Member Registration\n\nğŸ‘¤ Name: ${name}\nğŸ“ Phone: ${phone}\nğŸ“§ Email: ${email}\nğŸ—“ DOB: ${dob}\nğŸ†” ID: ${idNumber}\nğŸ  Address: ${address}\nğŸ’¼ Occupation: ${occupation}\nğŸ’° Initial Savings: ${savings || "N/A"}\nğŸ“¡ Preferred Contact: ${comm || "N/A"}\nğŸ•’ Registered At: ${newMember.timestamp}`;

  document.getElementById("shareWhatsAppBtn").onclick = () => {
    window.open("https://wa.me/254713953004?text=" + encodeURIComponent(adminMessage), "_blank");
  };
}

// Download PDF
document.getElementById("downloadFormBtn").addEventListener("click", () => {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  const logoUrl = "https://raw.githubusercontent.com/bony87/my-future-finder-chama-group/main/ChatGPT%20Image%20Sep%2010,%202025,%2005_43_14%20PM.png";

  const name = document.getElementById("regName").value;
  const phone = document.getElementById("regPhone").value;
  const email = document.getElementById("regEmail").value;
  const dob = document.getElementById("regDOB").value;
  const idNumber = document.getElementById("regID").value;
  const address = document.getElementById("regAddress").value;
  const occupation = document.getElementById("regOccupation").value;
  const savings = document.getElementById("regSavings").value;
  const comm = document.getElementById("regComm").value;

  const img = new Image();
  img.src = logoUrl;

  img.onload = () => {
    // Logo top-right
    doc.addImage(img, 'PNG', 160, 10, 35, 35);

    // Header
    doc.setFont("helvetica", "bold");
    doc.setFontSize(18);
    doc.setTextColor(30, 100, 200);
    doc.text("Future Finders Chama Group", 20, 25);

    doc.setFont("helvetica", "normal");
    doc.setFontSize(14);
    doc.setTextColor(0,0,0);
    doc.text("Membership Registration Form", 20, 35);


    // Decorative line
    doc.setDrawColor(76, 175, 80);
    doc.setLineWidth(1.5);
    doc.line(20, 38, 190, 38);

    // Form fields
   const fields = [
  { label: "Full Name", value: name },
  { label: "Phone Number", value: phone },
  { label: "Email", value: email },
  { label: "Date of Birth", value: dob },
  { label: "ID Number", value: idNumber },
  { label: "Address / Town", value: address },
  { label: "Occupation / Employer", value: occupation },
  { label: "Initial Savings", value: `Ksh ${savings}` },
  { label: "Preferred Communication", value: comm }
];


    let startY = 50;
    const lineHeight = 10;
    const boxHeight = 8;
    const boxWidth = 170;

    fields.forEach((field, i) => {
      const y = startY + i * (boxHeight + 6);
      doc.setFillColor(230, 250, 230);
      doc.rect(15, y - 5, boxWidth, boxHeight, 'F');
      doc.setTextColor(0,0,0);
      doc.text(`${field.label}: ${field.value}`, 18, y);

    });

    // Declaration
    const decY = startY + fields.length * (boxHeight + 6) + 5;
    doc.setFillColor(255, 255, 200);
    doc.rect(15, decY, boxWidth, 20, 'F');
    doc.text("Declaration: I hereby declare that the information provided is true and correct.", 18, decY + 12);

    // Agreement
    const agreeY = decY + 25;
    doc.setFillColor(200, 230, 255);
    doc.rect(15, agreeY, boxWidth, 15, 'F');
    doc.text("Agreement: I agree to the Chama Rules & Regulations.", 18, agreeY + 10);

    // Signatures
    const signY = agreeY + 25;
    doc.setFont("helvetica", "bold");
    doc.text("Signatures:", 20, signY);
    doc.setFont("helvetica", "normal");
    doc.text("1. Judith Kemunto ____________________", 20, signY + 10);
    doc.text("2. Boniface Chelluget ________________", 20, signY + 20);

    // Footer
    doc.setFontSize(10);
    doc.setTextColor(150,150,150);
    doc.text("Generated by Future Finders Chama Group Portal", 20, 290);

    doc.save("New_Member_Registration_Form.pdf");

    setTimeout(() => {
      alert("âœ… Download successful! Please send the downloaded form to the admin.");
    }, 300);
  };
});
</script>




<a class="action-btn" onclick="simulateAction(this,'services')" style="background:#d32f2f; margin-top:15px;">
    â¬…ï¸ Back to Services <span class="spinner"></span>
</a>
</section>
<!-- Member Login -->
<section id="loginForm">
<h2>ğŸ”‘ Member Login</h2>
<h1>Chama Savings &amp; Loan System</h1>
<label for="memberName"><b>Select Your Name:</b></label>
<select id="memberName" required="">
<option value="">-- Choose your name --</option>
<option>BONIFACE CHELLUGET</option>
<option>HILDA ODERO</option>
<option>JOEL EGESA</option>
<option>SHALIK SHIVERENGE</option>
<option>EVERLINE MAINA</option>
<option>ELVIS KAMASH</option>
<option>JULIUS KEBASO</option>
<option>CHRISTINE PIUS</option>
<option>EDNAH NANCY</option>
<option>JACKIE NYARANGI</option>
<option>JUDITH OMWOYO</option>
<option>JANET NYAKUNDI</option>
<option>ANASTANCIA OMWOYO</option>
<option>PIUS NYAKUNDI</option>
<option>SAMUEL OYUGI</option>

<option disabled>PURITY MOMANYI ( account Suspended)</option>
<option disabled>DAVY OMBATI (account Suspended)</option>

<option>KEFFA MOMANYI</option>
<option>KENNEDY MUTAYI</option>
<option>MIKE MORRIS</option>

<option>FAITH MOKOGI</option>
<option>SADLER KARAN</option>

<option disabled>SHARON CHEPTOO (account Suspended)</option>

<option>SHAMIM KAMASH</option>
<option>CLAUDIA MORAA</option>
<option>ESTHER OBEGI</option>
<option>DENNIS KIEYA</option>
<option>BRIGIDE NYABERI</option>
<option>VANICE MOMANYI</option>
<option>ELIZABETH SHIUNDU</option>
<option>LILIAN KERUBO</option>
<option>GRACIOUS KWAMBOKA</option>
<option>SHARON ONDIEKI</option>
<option>CANZEDENA ANYANGO</option>
<option>JAPHETH MULI</option>

</select>
<!-- Member Password -->
<div class="password-container">
  <input id="memberPass" 
         type="password"
         placeholder="Enter your correct password" />

  <span class="toggle-eye" onclick="togglePassword('memberPass', this)">
    ğŸ‘ï¸
  </span>
</div>

<!-- Spinner already inside the button -->
<a class="action-btn" id="memberLoginBtn" onclick="login()">Login <span class="spinner"></span></a>
<p id="loginMessage"></p>

</section>

<!-- Dashboard -->
 
<div id="dashboard">
<h3>Welcome, <span id="memberDisplay"></span>!</h3>
<a class="action-btn" onclick="showCurrentSavings()">ğŸ’° View Current Savings</a>
<a class="action-btn" onclick="showMonthlySavings()">ğŸ“Š View Monthly Savings</a>
<button class="check-loan-btn" onclick="checkLoan()">ğŸ” Check Loan Eligibility</button>
<button class="action-btn" onclick="openNotePopup()">ğŸ—’ï¸ View Note/fines</button>




<!-- ğŸšª Member Logout -->
<button class="action-btn" id="memberLogoutBtn" onclick="memberLogout()" style="background:#d32f2f; margin-top:15px; position:relative;">
  ğŸšª Logout
  <span class="spinner" style="display:none; margin-left:8px; border:2px solid #f3f3f3; border-top:2px solid white; border-radius:50%; width:14px; height:14px; animation: spin 1s linear infinite; vertical-align:middle;"></span>
</button>
<div id="loanMessage" style="margin-top:15px; font-weight:bold; color:#004d40;"></div>
<div id="allContributions" style="margin-top:20px;">
<!-- Eligibility Info Box -->
<div style="margin:20px auto; padding:15px; background:#e3f2fd; border-left:6px solid #1976d2; border-radius:8px; max-width:600px;">
<h3 style="color:#1976d2; margin-bottom:10px;">ğŸ“Œ Membership &amp; Loan Eligibility</h3>
<p style="line-height:1.6; color:#333;">
      âœ… <b>Loan Qualification:</b> A member must have saved at least <b>Ksh 1,500</b>.<br/><br/>
      âœ… <b>Official Membership:</b> To become an official member, you must be active for a minimum of <b>4 months</b> in the chama.<br/><br/>
      âœ… <b>Commitment:</b> Members are expected to contribute consistently and maintain good financial discipline.<br/><br/>
      âœ… <b>Support &amp; Trust:</b> Being a member means supporting one another and upholding transparency within the group.
    </p>
</div>
<button class="download-btn csv download-disabled">
  â¬‡ï¸ Download CSV
</button>

<button class="download-btn pdf download-disabled">
  â¬‡ï¸ Download PDF
</button>


<style>
.download-disabled {
  opacity: 0.5;
  pointer-events: none;
  cursor: not-allowed;
}
</style>




<!-- ğŸ—’ï¸ Personal Member Note Section -->
<div id="memberNoteSection" style="margin-top:30px; background:#e8f5e9; padding:15px; border-radius:8px; display:none;">
  <h3 style="color:#2e7d32;">ğŸ—’ï¸ Your Note / Fines</h3>
  <p id="personalNote" style="font-size:16px; color:#333; font-weight:bold;">
    Welcome! Your note will appear here after login.
  </p>
</div>




<h4>ğŸ“Š Group Contributions for 2025</h4>

<table id="table2025" border="1" style="width:100%; border-collapse:collapse; text-align:center;">

  <thead style="background:#00796b; color:white;">
    <tr>
      <th>NAME</th>
      <th>JAN</th>
      <th>FEB</th>
      <th>MAR</th>
      <th>APR</th>
      <th>MAY</th>
      <th>JUNE</th>
      <th>JULY</th>
      <th>AUG</th>
      <th>SEPT</th>
      <th>OCT</th>
      <th>NOV</th>
      <th>DEC</th>
      
<th style="background:#17da48;">TOTAL</th>
<th style="background:#ff9800;">SAVED 2025</th>
<th style="background:#4caf50;">REWARD BACK</th>
<th style="background:#2196f3; color:white;">PAYMENT STATUS</th>

    </tr>
  </thead>

  <tbody>
    <tr><td>BONIFACE CHELLUGET</td>
      <td><input type="number" value="300"/></td>
      <td><input type="number" value="300"/></td>
      <td><input type="number" value="300"/></td>
      <td><input type="number" value="300"/></td>
      <td><input type="number" value="300"/></td>
      <td><input type="number" value="300"/></td>
      <td><input type="number" value="300"/></td>
      <td><input type="number" value="300"/></td>
      <td><input type="number" value="300"/></td>
      <td><input type="number" value="310"/></td>
      <td><input type="number" value="200"/></td>
      <td><input type="number" value="200"/></td>
      <td class="rowTotal">3000</td>
     <td class="saved2025">0</td>
     <td class="reward2025">0</td>
     <td class="paymentStatus"></td>


    <tr><td>HILDA ODERO</td>
      <td><input type="number" value="400"/>
      </td><td><input type="number" value="200"/></td>
      <td><input type="number" value="100"/></td>
      <td><input type="number" value="200"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td class="rowTotal">900</td><td class="saved2025">0</td><td class="reward2025">0</td></tr>

    <tr><td>JOEL EGESA</td><td>
      <input type="number" value="200"/>
    </td><td><input type="number" value="0"/></td>
    <td><input type="number" value="20"/></td>
    <td><input type="number" value="0"/></td>
    <td><input type="number" value="0"/></td>
    <td><input type="number" value="0"/></td>
    <td><input type="number" value="0"/></td>
    <td><input type="number" value="0"/></td>
    <td><input type="number" value="500"/></td>
    <td><input type="number" value="0"/></td>
    <td><input type="number" value="0"/></td>
    <td><input type="number" value="0"/></td>
    <td class="rowTotal">720</td><td class="saved2025">0</td><td class="reward2025">0</td></tr>

    <tr><td>SHALIK SHIVERENGE</td><td>
      <input type="number" value="250"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td class="rowTotal">250</td><td class="saved2025">0</td><td class="reward2025">0</td></tr>

    <tr><td>EVERLINE MAINA</td><td>
      <input type="number" value="250"/></td>
      <td><input type="number" value="150"/></td>
      <td><input type="number" value="250"/></td>
      <td><input type="number" value="200"/></td>
      <td><input type="number" value="200"/></td>
      <td><input type="number" value="250"/></td>
      <td><input type="number" value="200"/></td>
      <td><input type="number" value="100"/></td>
      <td><input type="number" value="200"/></td>
      <td><input type="number" value="200"/></td>
      <td><input type="number" value="355"/></td>
      <td><input type="number" value="0"/></td>
       <td class="rowTotal">3000</td>
     <td class="saved2025">0</td>
     <td class="reward2025">0</td>
     <td class="paymentStatus"></td>

    <tr><td>ELVIS KAMASH</td><td>
      <input type="number" value="250"/></td>
      <td><input type="number" value="150"/></td>
      <td><input type="number" value="250"/></td>
      <td><input type="number" value="50"/></td>
      <td><input type="number" value="200"/></td>
      <td><input type="number" value="150"/></td>
      <td><input type="number" value="50"/></td>
      <td><input type="number" value="250"/></td>
      <td><input type="number" value="200"/></td>
      <td><input type="number" value="150"/></td>
      <td><input type="number" value="105"/></td>
      <td><input type="number" value="0"/></td>
       <td class="rowTotal">3000</td>
     <td class="saved2025">0</td>
     <td class="reward2025">0</td>
     <td class="paymentStatus"></td>

    <tr><td>JULIUS KEBASO</td><td>
      <input type="number" value="450"/></td>
      <td><input type="number" value="300"/></td>
      <td><input type="number" value="500"/></td>
      <td><input type="number" value="500"/></td>
      <td><input type="number" value="400"/></td>
      <td><input type="number" value="500"/></td>
      <td><input type="number" value="400"/></td>
      <td><input type="number" value="500"/></td>
      <td><input type="number" value="400"/></td>
      <td><input type="number" value="400"/></td>
      <td><input type="number" value="405"/></td>
      <td><input type="number" value="300"/></td>
       <td class="rowTotal">3000</td>
     <td class="saved2025">0</td>
     <td class="reward2025">0</td>
     <td class="paymentStatus"></td>

    <tr><td>CHRISTINE PIUS</td>
      <td><input type="number" value="50"/></td>
      <td><input type="number" value="150"/></td>
      <td><input type="number" value="250"/></td>
      <td><input type="number" value="150"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="100"/></td>
      <td><input type="number" value="700"/></td>
      <td><input type="number" value="205"/></td>
      <td><input type="number" value="150"/></td>
       <td class="rowTotal">3000</td>
     <td class="saved2025">0</td>
     <td class="reward2025">0</td>
     <td class="paymentStatus"></td>

    <tr><td>EDNAH NANCY</td><td>
      <input type="number" value="250"/></td>
      <td><input type="number" value="100"/></td>
      <td><input type="number" value="100"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="100"/></td>
      <td><input type="number" value="200"/></td>
      <td><input type="number" value="200"/></td>
      <td><input type="number" value="150"/></td>
      <td class="rowTotal">600</td><td class="saved2025">0</td><td class="reward2025">0</td></tr>

    <tr><td>JACKIENYARANGI</td><td>
      <input type="number" value="200"/></td>
      <td><input type="number" value="200"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="100"/></td>
      <td><input type="number" value="200"/></td>
      <td><input type="number" value="150"/></td>
      <td><input type="number" value="150"/></td>
      <td class="rowTotal">550</td><td class="saved2025">0</td><td class="reward2025">0</td></tr>

    <tr><td>JUDITH OMWOYO</td><td>
      <input type="number" value="300"/></td>
      <td><input type="number" value="300"/></td>
      <td><input type="number" value="300"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="100"/></td>
      <td><input type="number" value="250"/></td>
      <td><input type="number" value="305"/></td>
      <td><input type="number" value="300"/></td>
      <td><input type="number" value="200"/></td>
       <td class="rowTotal">3000</td>
     <td class="saved2025">0</td>
     <td class="reward2025">0</td>
     <td class="paymentStatus"></td>

    <tr><td>JANET NYAKUNDI</td><td>
      <input type="number" value="150"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="100"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td class="rowTotal">250</td><td class="saved2025">0</td><td class="reward2025">0</td></tr>

    <tr><td>ANASTANCIA OMWOYO</td><td>
      <input type="number" value="250"/></td>
      <td><input type="number" value="150"/></td>
      <td><input type="number" value="200"/></td>
      <td><input type="number" value="200"/></td>
      <td><input type="number" value="200"/></td>
      <td><input type="number" value="150"/></td>
      <td><input type="number" value="100"/></td>
      <td><input type="number" value="250"/></td>
      <td><input type="number" value="200"/></td>
      <td><input type="number" value="200"/></td>
      <td><input type="number" value="205"/></td>
      <td><input type="number" value="150"/></td>
       <td class="rowTotal">0</td>
     <td class="saved2025">0</td>
     <td class="reward2025">0</td>
     <td class="paymentStatus"></td>

    <tr><td>PIUS NYAKUNDI</td><td>
      <input type="number" value="150"/></td>
      <td><input type="number" value="200"/></td>
      <td><input type="number" value="200"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="100"/></td>
      <td><input type="number" value="100"/></td>
      <td><input type="number" value="100"/></td>
      <td><input type="number" value="150"/></td>
      <td><input type="number" value="150"/></td>
      <td><input type="number" value="50"/></td>
      <td><input type="number" value="150"/></td>
      <td><input type="number" value="50"/></td>
      <td class="rowTotal">0</td>
     <td class="saved2025">0</td>
     <td class="reward2025">0</td>
     <td class="paymentStatus"></td>

    <tr><td>SAMUEL OYUGI</td><td>
      <input type="number" value="400"/></td>
      <td><input type="number" value="300"/>
      </td><td><input type="number" value="500"/></td>
      <td><input type="number" value="400"/></td>
      <td><input type="number" value="400"/></td>
      <td><input type="number" value="500"/></td>
      <td><input type="number" value="400"/></td>
      <td><input type="number" value="500"/></td>
      <td><input type="number" value="400"/></td>
      <td><input type="number" value="300"/></td>
      <td><input type="number" value="405"/></td>
      <td><input type="number" value="300"/></td>
      <td class="rowTotal">3000</td>
     <td class="saved2025">0</td>
     <td class="reward2025">0</td>
     <td class="paymentStatus"></td>

      
    

    <tr><td>KEFFA MOMANYI</td><td>
      <input type="number" value="250"/></td>
      <td><input type="number" value="200"/></td>
      <td><input type="number" value="200"/></td>
      <td><input type="number" value="200"/></td>
      <td><input type="number" value="200"/></td>
      <td><input type="number" value="250"/></td>
      <td><input type="number" value="200"/></td>
      <td><input type="number" value="150"/></td>
      <td><input type="number" value="200"/></td>
      
      <td><input type="number" value="200"/></td>
      <td><input type="number" value="200"/></td>
      <td><input type="number" value="150"/></td>
      <td class="rowTotal">3000</td>
     <td class="saved2025">0</td>
     <td class="reward2025">0</td>
     <td class="paymentStatus"></td>

    <tr>
  <td>KENNEDY MUTAYI</td>
  <td><input type="number" value="750"/></td>   <!-- Jan -->
  <td><input type="number" value="450"/></td>   <!-- Feb -->
  <td><input type="number" value="750"/></td>   <!-- Mar -->
  <td><input type="number" value="600"/></td>   <!-- Apr -->
  <td><input type="number" value="600"/></td>   <!-- May -->
  <td><input type="number" value="750"/></td>   <!-- Jun -->
  <td><input type="number" value="600"/></td>   <!-- Jul -->
  <td><input type="number" value="750"/></td>   <!-- Aug -->
  <td><input type="number" value="600"/></td>   <!-- Sept -->
  <td><input type="number" value="600"/></td>   <!-- Oct -->
  <td><input type="number" value="605"/></td>     <!-- Nov -->
  <td><input type="number" value="450"/></td>     <!-- Dec -->
  <td class="rowTotal">3000</td>
     <td class="saved2025">0</td>
     <td class="reward2025">0</td>
     <td class="paymentStatus"></td>


    <tr><td>MIKE MORRIS</td><td>
      <input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="100"/></td>
      <td><input type="number" value="50"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="150"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="50"/></td>
      <td><input type="number" value="150"/></td>
      <td class="rowTotal">0</td><td class="saved2025">0</td><td class="reward2025">0</td></tr>

    <tr><td>FAITH MOKOGI</td><td>
      <input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="500"/></td>
      <td><input type="number" value="200"/></td>
      <td><input type="number" value="250"/></td>
      <td><input type="number" value="50"/></td>
      <td><input type="number" value="100"/></td>
      <td><input type="number" value="50"/></td>
      <td><input type="number" value="350"/></td>
      <td><input type="number" value="970"/></td>
      <td><input type="number" value="100"/></td>
      <td><input type="number" value="100"/></td>
      <td class="rowTotal">3000</td>
     <td class="saved2025">0</td>
     <td class="reward2025">0</td>
     <td class="paymentStatus"></td>

    <tr><td>SADLER KARAN</td><td>
      <input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="200"/></td>
      <td><input type="number" value="200"/></td>
      <td><input type="number" value="150"/></td>
      <td><input type="number" value="50"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td class="rowTotal">600</td><td class="saved2025">0</td><td class="reward2025">0</td></tr>

    

    <tr><td>SHAMIM KAMASH</td><td>
      <input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="200"/></td>
      <td><input type="number" value="150"/></td>
      <td><input type="number" value="50"/></td>
      <td><input type="number" value="250"/></td>
      <td><input type="number" value="200"/></td>
      <td><input type="number" value="150"/></td>
      <td><input type="number" value="100"/></td>
      <td><input type="number" value="0"/></td>
      <td class="rowTotal">900</td><td class="saved2025">0</td><td class="reward2025">0</td></tr>

    <tr><td>CLAUDIA MORAA</td><td>
      <input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="100"/></td>
      <td><input type="number" value="400"/></td>
      <td><input type="number" value="300"/></td>
      <td><input type="number" value="200"/></td>
      <td><input type="number" value="200"/></td>
      <td><input type="number" value="250"/></td>
      <td><input type="number" value="200"/></td>
     <td class="rowTotal">3000</td>
     <td class="saved2025">0</td>
     <td class="reward2025">0</td>
     <td class="paymentStatus"></td>

    <tr><td>ESTHER OBEGI</td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="500"/></td>
      <td><input type="number" value="450"/></td>
      <td><input type="number" value="600"/></td>
      <td><input type="number" value="500"/></td>
      <td><input type="number" value="150"/></td>
      <td class="rowTotal">0</td><td class="saved2025">0</td><td class="reward2025">0</td></tr>

    <tr><td>DENNIS KIEYA</td><td>
      <input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="150"/></td>
      <td><input type="number" value="150"/></td>
      <td><input type="number" value="200"/></td>
      <td><input type="number" value="150"/></td>
      <td class="rowTotal">150</td><td class="saved2025">0</td><td class="reward2025">0</td></tr>

   <tr>
  <td>BRIGIDE NYABERI</td>
  <td><input type="number" value="0"/></td>   <!-- Jan -->
  <td><input type="number" value="0"/></td>   <!-- Feb -->
  <td><input type="number" value="0"/></td>   <!-- Mar -->
  <td><input type="number" value="0"/></td>   <!-- Apr -->
  <td><input type="number" value="0"/></td>   <!-- May -->
  <td><input type="number" value="0"/></td>   <!-- Jun -->
  <td><input type="number" value="0"/></td>   <!-- Jul -->
  <td><input type="number" value="0"/></td>   <!-- Aug -->
  <td><input type="number" value="50"/></td>  <!-- Sep -->
  <td><input type="number" value="100"/></td>  <!-- Oct -->
  <td><input type="number" value="100"/></td>   <!-- Nov -->
  <td><input type="number" value="200"/></td>   <!-- Dec -->
  <td class="rowTotal">50</td><td class="saved2025">0</td><td class="reward2025">0</td></tr>
</tr>


    <tr><td>VANICE MOMANYI</td><td>
      <input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="100"/></td>
      <td><input type="number" value="400"/></td>
      <td><input type="number" value="400"/></td>
      <td><input type="number" value="300"/></td>
      <td class="rowTotal">200</td><td class="saved2025">0</td><td class="reward2025">0</td></tr>
     
     
      <tr><td>ELIZABETH SHIUNDU</td><td>
      <input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="100"/></td>
      <td><input type="number" value="300"/></td>
      <td class="rowTotal">0</td><td class="saved2025">0</td><td class="reward2025">0</td></tr>


      <tr><td>LILIAN KERUBO</td><td>
      <input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="100"/></td>
      <td><input type="number" value="300"/></td>
      <td class="rowTotal">0</td><td class="saved2025">0</td><td class="reward2025">0</td></tr>



   
<tr style="font-weight:bold; background:#e0f2f1;">
  <td colspan="13" style="text-align:right;">GRAND TOTAL</td>
  <td id="grandTotal_2025">0</td>
  <td id="savedTotal_2025">0</td>
  <td id="rewardTotal_2025">0</td>
  <th style="background:#2196f3; color:white;">PAYMENT STATUS</th>

</tr>



  </tbody>
</table>


<script>
const paidMembers = [
  "BONIFACE CHELLUGET",
  "JULIUS KEBASO",
  "KENNEDY MUTAYI",
  "SAMUEL OYUGI",
  "EVERLINE MAINA",
  "JUDITH OMWOYO",
  "ELVIS KAMASH",
  "JULIUS KEBASO",
   "CHRISTINE PIUS",
   "ANASTANCIA OMWOYO",
   "PIUS NYAKUNDI",
  "KEFFA MOMANYI",
  "FAITH MOKOGI",
  "CLAUDIA MORAA"
 
   
  
  
 
  // â• add more names here when paid
];

document.querySelectorAll("#table2025 tbody tr").forEach(row => {
  const nameCell = row.querySelector("td");
  const statusCell = row.querySelector(".paymentStatus");

  if (!nameCell || !statusCell) return;

  const name = nameCell.textContent.trim();

  if (paidMembers.includes(name)) {
    statusCell.innerHTML = "âœ… <b>Paid on 22nd Dec 2025</b>";
    statusCell.style.color = "green";
    statusCell.style.fontWeight = "bold";
  } else {
    statusCell.innerHTML = "â³ Not Paid";
    statusCell.style.color = "#b71c1c";
  }
});
</script>


<h4>ğŸ“Š Group Contributions for 2026</h4>

<table id="table2026" border="1" style="width:100%; border-collapse:collapse; text-align:center;">

  <thead style="background:#00796b; color:white;">
    <tr>
      <th>NAME</th>
      <th>Two Last weeks of Dec25/JAN</th><th>FEB</th><th>MAR</th><th>APR</th><th>MAY</th>
      <th>JUNE</th><th>JULY</th><th>AUG</th><th>SEPT</th>
      <th>OCT</th><th>NOV</th><th>DEC</th>
      <th style="background:#17da48;">TOTAL</th>
      <th style="background:#ff9800;">SAVED 2026</th>
      <th style="background:hsl(263, 39%, 49%);">REWARD BACK</th>
      <th style="background:#2196f3; color:white;">PAYMENT STATUS</th>
    </tr>
  </thead>

  <tbody>

    <!-- TEMPLATE ROW (used for all members) -->
    <!-- Just duplicate and change the name -->

    <tr>
      <td>BONIFACE CHELLUGET</td>
      <td><input type="number" value="100"></td>
      <td><input type="number" value="0"></td>
      <td><input type="number" value="0"></td>
      <td><input type="number" value="0"></td>
      <td><input type="number" value="0"></td>
      <td><input type="number" value="0"></td>
      <td><input type="number" value="0"></td>
      <td><input type="number" value="0"></td>
      <td><input type="number" value="0"></td>
      <td><input type="number" value="0"></td>
      <td><input type="number" value="0"></td>
      <td><input type="number" value="0"></td>
      <td class="rowTotal">0</td>
      <td class="saved2026">0</td>
    <td class="reward2026">0</td>
    </tr>
    

    
 <tr><td>SHALIK SHIVERENGE</td><td>
      <input type="number" value="200"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td class="rowTotal">0</td><td class="saved2026">0</td><td class="reward2026">0</td></tr>
  

    <tr><td>JULIUS KEBASO</td><td>
      <input type="number" value="200"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
       <td class="rowTotal">0</td>
     <td class="saved2026">0</td>
     <td class="reward2026">0</td>
   

    <tr><td>CHRISTINE PIUS</td>
      <td><input type="number" value="100"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
       <td class="rowTotal">0</td>
     <td class="saved2026">0</td>
     <td class="reward2026">0</td>
   

    <tr><td>EDNAH NANCY</td><td>
      <input type="number" value="100"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td class="rowTotal">0</td><td class="saved2026">0</td><td class="reward2026">0</td></tr>

    <tr><td>JACKIENYARANGI</td><td>
      <input type="number" value="100"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td class="rowTotal">0</td><td class="saved2026">0</td><td class="reward2026">0</td></tr>

    

   

    <tr><td>ANASTANCIA OMWOYO</td><td>
      <input type="number" value="100"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
       <td class="rowTotal">0</td>
     <td class="saved2025">0</td>
     <td class="reward2025">0</td>
     

    <tr><td>PIUS NYAKUNDI</td><td>
      <input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td class="rowTotal">0</td>
     <td class="saved2026">0</td>
     <td class="reward2026">0</td>
    

    <tr><td>SAMUEL OYUGI</td><td>
      <input type="number" value="200"/></td>
      <td><input type="number" value="0"/>
      </td><td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td class="rowTotal">0</td>
     <td class="saved2026">0</td>
     <td class="reward2026">0</td>
     
      
    

    <tr><td>KEFFA MOMANYI</td><td>
      <input type="number" value="100"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td class="rowTotal">0</td>
     <td class="saved2026">0</td>
     <td class="reward2026">0</td>
     

    <tr>
  <td>KENNEDY MUTAYI</td>
  <td><input type="number" value="300"/></td>   <!-- Jan -->
  <td><input type="number" value="0"/></td>   <!-- Feb -->
  <td><input type="number" value="0"/></td>   <!-- Mar -->
  <td><input type="number" value="0"/></td>   <!-- Apr -->
  <td><input type="number" value="0"/></td>   <!-- May -->
  <td><input type="number" value="0"/></td>   <!-- Jun -->
  <td><input type="number" value="0"/></td>   <!-- Jul -->
  <td><input type="number" value="0"/></td>   <!-- Aug -->
  <td><input type="number" value="0"/></td>   <!-- Sept -->
  <td><input type="number" value="0"/></td>   <!-- Oct -->
  <td><input type="number" value="0"/></td>     <!-- Nov -->
  <td><input type="number" value="0"/></td>     <!-- Dec -->
  <td class="rowTotal">00</td>
     <td class="saved2026">0</td>
     <td class="reward2026">0</td>
     


   

    <tr><td>FAITH MOKOGI</td><td>
      <input type="number" value="50"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td class="rowTotal">0</td>
     <td class="saved2026">0</td>
     <td class="reward2026">0</td>
    

   
    

   

    <tr><td>CLAUDIA MORAA</td><td>
      <input type="number" value="100"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
     <td class="rowTotal">0</td>
     <td class="saved2025">0</td>
     <td class="reward2025">0</td>
     

    <tr><td>ESTHER OBEGI</td>
      <td><input type="number" value="100"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td class="rowTotal">0</td><td class="saved2026">0</td><td class="reward2026">0</td></tr>

    <tr><td>DENNIS KIEYA</td><td>
      <input type="number" value="100"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td class="rowTotal">0</td><td class="saved2026">0</td><td class="reward2026">0</td></tr>

   


    <tr><td>VANICE MOMANYI</td><td>
      <input type="number" value="150"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td class="rowTotal">200</td><td class="saved2026">0</td><td class="reward2026">0</td></tr>
     
     
      <tr><td>ELIZABETH SHIUNDU</td><td>
      <input type="number" value="200"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td class="rowTotal">0</td><td class="saved2026">0</td><td class="reward2026">0</td></tr>


      <tr><td>LILIAN KERUBO</td><td>
      <input type="number" value="200"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value="0"/></td>
      <td><input type="number" value=""/></td>
      <td class="rowTotal">0</td><td class="saved2025">0</td><td class="reward2025">0</td></tr>



   


    

    <!-- ğŸ‘‰ Repeat the same row structure for ALL remaining members -->

   <tr style="font-weight:bold; background:#e0f2f1;">
  <td colspan="13" style="text-align:right;">GRAND TOTAL</td>
  <td id="grandTotal_2026">0</td>
  <td id="savedTotal_2026">0</td>
  <td id="rewardTotal_2026">0</td>
</tr>


  </tbody>
</table> 




<!-- Toast -->
<div class="toast" id="toast"></div>
<!-- Loan Applications History -->
<div id="loanHistory" style="margin-top:30px;">
<h3>ğŸ“œ Loan Applications History</h3>
<table border="1" style="width:100%; border-collapse:collapse; text-align:center;">
<thead style="background:#00796b; color:white;">
<tr>
<th>Name</th>
<th>Phone</th>
<th>Qualified Loan</th>
<th>Requested Amount</th>
<th>ID Number</th>
<th>Date</th>
<th>Status</th>
<th>Receipt</th> <!-- âœ… Added -->
</tr>
</thead>
<tbody id="loanHistoryBody">

<!-- Default row if no applications -->
<tr><td colspan="8" style="color:gray;">No loan applications yet.</td><td class="saved2025">0</td><td class="reward2025">0</td></tr>
</tbody>
</table>
</div>
</div>
</div>


<footer style="position:fixed; bottom:0; width:100%; background:#111; padding:10px 0; text-align:center; color:white; z-index:1000;">
<div class="footer-marquee">
<span class="glow">ğŸŒŸ FOUNDER: BONIFACE KAISER ğŸŒŸ</span>
</div>
</footer>
<script>
 



const members = {
  "BONIFACE CHELLUGET": {
    phone: "0713953004",
    password: "0713953004",
    savings: 1364,
  
    monthly:  [300, 300, 300, 300, 300, 300, 300, 300, 300],
    

    note: "Consistent saver â€” eligible for next loan review. Fines: nil as of 17th Nov 2025."
  




  },
  "HILDA ODERO": {
    phone: "0795341320",
    password: "0795341320",
    savings: 900,
    monthly: [400,200,100,200],
    note: "Missed March payment â€” follow up on consistency.",
    
  },
  "JOEL EGESA": {
    phone: "0768039551",
    password: "0768039551",
    savings: 720,
    monthly: [200,0,20,500],
    note: "New member; low savings but improving gradually.",
    
  },
  "SHALIK SHIVERENGE": {
    phone: "0746277086",
    password: "0746277086",
    savings: 250,
    monthly: [250,0,0],
    note: "Needs encouragement to make regular deposits.",
    
  },
  "EVERLINE MAINA": {
    phone: "0701360180",
    password: "0701360180",
    savings: 1177,
    monthly: [250,150,250,200,200,250,200,100,200,50],
    note: "Active and consistent member â€” good standing.",
    fines: ""
  },
  "ELVIS KAMASH": {
    phone: "0798577851",
    password: "0798577851",
    savings: 902,
    monthly: [250,150,250,50,200,150,50,250,200,50],
    note: "Slightly irregular, but maintains contributions.",
    fines: ""
  },
  "JULIUS KEBASO": {
    phone: "0705296154",
    password: "0705296154",
    savings: 2022,
    monthly: [450,300,500,500,400,500,400,500,400,100],
    note: "Very reliable saver â€” possible leadership candidate.Fines: 30 as of 17nd Nov 25 paid 25",
    fines: ""
  },
  "CHRISTINE PIUS": {
    phone: "0115603500",
    password: "0115603500",
    savings: 877,
    monthly: [50,150,250,150,0,0,0,0,100,50],
    note: "Inconsistent months; encourage steady saving.",
    fines: ""
  },
  "EDNAH NANCY": {
    phone: "0717684177",
    password: "0717684177",
    savings: 1100,
    monthly: [250,100,100,0,0,0,0,0,100,50],
    note: "Low activity; may need reminder of savings goals."
  },
  "JACKIENYARANGI": {
    phone: "0790206224",
    password: "0790206224",
    savings: 1000,
    monthly: [200,200,0,0,0,0,0,0,100,50],
    note: "Missed several months; check commitment level.",
    fines: ""
  },
  "JUDITH OMWOYO": {
    phone: "0741939235",
    password: "0741939235",
    savings: 1027,
    monthly: [300,300,300,0,0,0,0,100,250],
    note: "1.Consistent saver, possible for small loan soon. 2.sent 1500 on 20 october as a patial payment for mery-go-round.240-as of 2nd Nov 25, paid 180 not paid 60",
   
  },
  "JANET NYAKUNDI": {
    phone: "0706753288",
    password: "0706753288",
    savings: 250,
    monthly: [150,0,100,0,0,0,0,0,0],
    note: "you have a debt payment of 850 .90-as of 2nd nov 25 paid 0 not paid 60",
   
  },
  "ANASTANCIA OMWOYO": {
    phone: "0748442547",
    password: "0748442547",
    savings: 902,
    monthly: [250,150,200,200,200,150,100,250,200,50],
    note: "fines: 0-as of 2nd nov 25 ",
    
  },
  "PIUS NYAKUNDI": {
    phone: "0716845165",
    password: "0716845165",
    savings: 700,
    monthly: [150,200,200,0,100,100,100,150,150,50],
    note: "fines:120-as of 2nd nov 25 paid 0 not paid 120 on 13 oct requested for no exchange with judy - request approved.",
   
  },
  "SAMUEL OYUGI": {
    phone: "0796860412",
    password: "0796860412",
    savings: 2022,
    monthly: [400,300,500,400,400,500,400,500,400,100],
    note: "fines:360-as of 2nd nov 25 paid 0 not paid 360 1.Very active; good candidate for larger loans.",

  
   
  },
  "KEFFA MOMANYI": {
    phone: "0759237482",
    password: "0759237482",
    savings: 960,
    monthly: [250,200,200,200,200,250,200,150,200,50],
    note: "1. on 4th nov borrowered 300.60-as of 2nd nov 25 paid 0 not paid 60 ",
    fines: ""
  },
  "KENNEDY MUTAYI": {
    phone: "0724124735",
    password: "0724124735",
    savings: 3002,
    monthly: [750,450,750,600,600,750,600,750,600,150],
    note: " ",
   
  },
  "MIKE MORRIS": {
    phone: "0115570301",
    password: "0115570301",
    savings: 500,
    monthly: [0,0,100,50,0,0,0,150,0],
    note: " fines:150-as of 2nd nov 25 paid 120 not paid 30",
    
 
    
  },
 "FAITH MOKOGI": {
  phone: "0706918919",
  password: "0706918919",
  savings:1335,
  monthly: [0,0,500,200,250,50,100,50,350,800],
  note: "fines:90-as of 2nd nov 25 paid 0 not paid 30 1) On 13TH October, borrowed a loan of 1500 (repayment amount 1680, period 7 days).\n2) Loan successfully paid on 24th October (full payment).",
 
},


  "SADLER KARAN": {
    phone: "0791730719",
    password: "0791730719",
    savings: 600,
    monthly: [0,0,200,200,150,50,0,0,0],
    note: "fines: 240-as of 17th nov 25 paid 120 not paid 150",
   
  
    
  },
  "SHAMIM KAMASH": {
    phone: "0725979420",
    password: "0725979420",
    savings: 1100,
    monthly: [0,0,0,0,200,150,50,250,200,50],
    note: " ",
    
  },
  "CLAUDIA MORAA": {
    phone: "0741520782",
    password: "0741520782",
    savings: 825,
    monthly: [0,0,0,0,0,100,400,300,200,50],
    note: " ",
 
  },
  "ESTHER OBEGI": {
    phone: "0748845363",
    password: "0748845363",
    savings: 2200,
    monthly: [0,0,0,0,0,0,0,500,0],
    note: " ",
  
  },
  "DENNIS KIEYA": {
    phone: "0706150465",
    password: "@dennis12",
    savings: 650,
    monthly: [0,0,0,0,0,0,0,0,100,50],
    note: " ",
    
  },
  "BRIGIDE NYABERI": {
    phone: "0716011603",
    password: "Brigide",
    savings: 450,
    monthly: [0,0,0,0,0,0,0,0,50],
    note: " "
  },
  "VANICE MOMANYI": {
    phone: "0769552081",
    password: "41362859",
    savings: 1200,
    monthly: [0,0,0,0,0,0,0,0,100,100],
    note: " "
  },
  
  "ELIZABETH SHIUNDU": {
    phone: "0745078964",
    password: "0745078964",
    savings: 400,
    monthly: [0,0,0,0,0,0,0,0,100,],
    note: " "
  },
   "LILIAN KERUBO": {
    phone: "0796476808",
    password: "kerubo",
    savings: 400,
    monthly: [0,0,0,0,0,0,0,0,100,],
    note: " "
  },

 "GRACIOUS KWAMBOKA": {
    phone: "0727428906",
    password: "halima254",
    savings: 0,
    monthly: [0,0,0,0,0,0,0,0,0,],
    note: " "
 },
    "SHARON ONDIEKI": {
    phone: "0769976297",
    password: "Sharon7",
    savings: 0,
    monthly: [0,0,0,0,0,0,0,0,0,],
    note: " "
  },
  "CANZEDENA ANYANGO": {
    phone: "0716031999",
    password: "Phinas",
    savings: 0,
    monthly: [0,0,0,0,0,0,0,0,0,],
    note: " "
  },
 "JAPHETH MULI": {
    phone: "0746989737",
    password: "0746989737",
    savings: 0,
    monthly: [0,0,0,0,0,0,0,0,0,],
    note: " "
  },
};


// ğŸ”„ Simulate loading action (button + spinner + section switch)
function simulateAction(button, sectionId) {
  let spinner = button.querySelector(".spinner");

  // Show spinner
  if (spinner) spinner.style.display = "inline-block";
  button.style.pointerEvents = "none";

  setTimeout(() => {
    if (spinner) spinner.style.display = "none";
    button.style.pointerEvents = "auto";

    // Hide all sections
    document.querySelectorAll("section, #dashboard, #admin, #newsSection").forEach(sec => {
      sec.style.display = "none";
    });

    // Hide all nav buttons except the clicked one
    document.querySelectorAll("#navButtons .nav-btn").forEach(btn => {
      btn.style.display = "none";
    });
    button.style.display = "inline-block"; // keep clicked one

    // Show selected section
    let target = document.getElementById(sectionId);
    if (target) {
      target.style.display = "block";

      // âœ… Special handling for News Section
      if (sectionId === "newsSection") {
        loadNews();
        markNewsRead();
      }
    } else {
      console.error("âŒ Section not found:", sectionId);
    }

    // âœ… Show Back button
    document.getElementById("backBtn").style.display = "inline-block";
  }, 800); // 0.8 sec loading effect
}


function showAllButtons() {
  // Show all nav buttons again
  document.querySelectorAll("#navButtons .nav-btn").forEach(btn => {
    btn.style.display = "inline-block";
  });

  // Hide the back button
  document.getElementById("backBtn").style.display = "none";

  // Hide all sections except Home
  document.querySelectorAll("section, #dashboard, #admin, #newsSection").forEach(sec => {
    sec.style.display = "none";
  });
  document.getElementById("home").style.display = "block"; // default back to Home
}

function delayedShowAllButtons(btn) {
  // Add loading effect
  btn.querySelector(".spinner").textContent = " â³";

  // Disable button while loading
  btn.style.pointerEvents = "none";

  // Wait 2 seconds, then run the function
  setTimeout(() => {
    btn.querySelector(".spinner").textContent = "";
    btn.style.pointerEvents = "auto";
    showAllButtons();
  }, 2000);
}

// ğŸ”” Show Popup
function showPopup(type, title, message) {
  const popup = document.getElementById("popup");
  const box = document.getElementById("popupBox");

  document.getElementById("popupTitle").innerText = title;
  document.getElementById("popupMessage").innerText = message;

  // Reset styles
  box.className = "popup-box";

  if (type === "success") {
    box.classList.add("popup-success");
  } else if (type === "error") {
    box.classList.add("popup-error");
  }

  popup.style.display = "flex";

  // Auto-close after 5s
  setTimeout(() => {
    closePopup();
  }, 5000);
}

// âŒ Close Popup
function closePopup() {
  document.getElementById("popup").style.display = "none";
}
// ğŸŒ Global variable to track logged-in user
let loggedInUser = "";

// ğŸ” Member Login    
function login() { 
  let btn = document.getElementById("memberLoginBtn");
  let spinner = btn.querySelector(".spinner");
  let name = document.getElementById("memberName").value.trim();
  let pass = document.getElementById("memberPass").value.trim();
  let msg = document.getElementById("loginMessage");

  spinner.style.display = "inline-block";

  setTimeout(() => {
    spinner.style.display = "none";

    if (!name || !pass) {
      msg.innerText = "âš ï¸ Please select your name and enter your password.";
      return;
    }

    // âœ… Check hardcoded members
    if (members[name] && members[name].password === pass) {
      loggedInUser = name; // âœ… store clean name
      msg.innerText = "";
      document.getElementById("loginForm").style.display = "none";
      document.getElementById("dashboard").style.display = "block";
      document.getElementById("memberDisplay").innerText = name;

      // Load loan history
      loadMemberLoanHistory(name);

      // ===========================
      // ğŸ” Table Edit Permissions Only
      // ===========================
      let rows = document.querySelectorAll("table tbody tr");
      let badge = document.createElement("span");
      badge.style.marginLeft = "10px";
      badge.style.padding = "4px 10px";
      badge.style.borderRadius = "12px";
      badge.style.fontSize = "12px";
      badge.style.fontWeight = "bold";

      rows.forEach(row => {
        const inputs = row.querySelectorAll("input[type='number']");
        
        if (name.toUpperCase() === "BONIFACE CHELLUGET") {
          // ğŸ”“ Boniface can edit contributions
          inputs.forEach(input => {
            input.disabled = false;
            input.addEventListener("input", () => updateRowTotal(row));
          });
          updateRowTotal(row);

          badge.textContent = "Editor Mode âœ…";
          badge.style.background = "#4CAF50";
          badge.style.color = "white";
        } else {
          // ğŸ”’ Others view-only (disable editing, keep other features working)
          inputs.forEach(input => {
            input.disabled = true;
          });

          badge.textContent = "View-Only ğŸ”’";
          badge.style.background = "#9E9E9E";
          badge.style.color = "white";
        }
      });

      // Attach badge
      document.getElementById("memberDisplay").appendChild(badge);

      calculateGrandTotal();
      showPopup("success", "Welcome ğŸ‰", `Hello ${name}, glad to see you again!`);
      return;
    }
    
    // ğŸ” Check approved members from localStorage
    let approved = JSON.parse(localStorage.getItem("approvedMembers")) || [];
    let member = approved.find(m => m.name === name);

    if (!member) {
      msg.innerText = "âŒ You are not approved yet. Please wait for admin approval.";
      return;
    }

    if (member.password !== pass) {   
      msg.innerText = "âŒ Invalid password.";
      return;
    }

    // âœ… Successful login for approved member
    loggedInUser = name; // âœ… store clean name
    msg.innerText = "";
    document.getElementById("loginForm").style.display = "none";
    document.getElementById("dashboard").style.display = "block";
    document.getElementById("memberDisplay").innerText = name;

    loadMemberLoanHistory(name);
 // âœ… Show only their note
  const noteSection = document.getElementById("memberNoteSection");
  const noteParagraph = document.getElementById("personalNote");
  noteParagraph.innerText = member.note || "No note available for this member yet.";
  noteSection.style.display = "block";
// ğŸ’¸ Show their fines
const finesSection = document.getElementById("memberFinesSection");
const finesParagraph = document.getElementById("personalFines");
finesParagraph.innerText = (member.fines && member.fines.trim() !== "")
  ? member.fines
  : "No fines recorded for this member.";
finesSection.style.display = "block";

    // ===========================
    // ğŸ” Table Edit Permissions Only
    // ===========================
    let rows = document.querySelectorAll("table tbody tr");
    let badge = document.createElement("span");
    badge.style.marginLeft = "10px";
    badge.style.padding = "4px 10px";
    badge.style.borderRadius = "12px";
    badge.style.fontSize = "12px";
    badge.style.fontWeight = "bold";

    rows.forEach(row => {
      const inputs = row.querySelectorAll("input[type='number']");
      
      if (name.toUpperCase() === "BONIFACE CHELLUGET") {
        inputs.forEach(input => {
          input.disabled = false;
          input.addEventListener("input", () => updateRowTotal(row));
        });
        updateRowTotal(row);

        badge.textContent = "Editor Mode âœ…";
        badge.style.background = "#4CAF50";
        badge.style.color = "white";
      } else {
        inputs.forEach(input => {
          input.disabled = true;
        });

        badge.textContent = "View-Only ğŸ”’";
        badge.style.background = "#9E9E9E";
        badge.style.color = "white";
      }
    });

    document.getElementById("memberDisplay").appendChild(badge);

    calculateGrandTotal();
    showPopup("success", "Welcome ğŸ‰", `Hello ${name}, you are now logged in!`);
  }, 1000);
}


// ğŸ’° Show current savings
function showCurrentSavings() {
  if (!loggedInUser || !members[loggedInUser]) {
    alert("âš ï¸ Please log in first.");
    return;
  }
  alert("ğŸ’° Current Savings for 2025: KES " + members[loggedInUser].savings);
}

// ğŸ“Š Show monthly contributions
function showMonthlySavings() {
  if (!loggedInUser || !members[loggedInUser]) {
    alert("âš ï¸ Please log in first.");
    return;
  }
  alert("ğŸ“Š Monthly Contributions: " + members[loggedInUser].monthly.join(", "));
}

// ========================= ğŸ¦ Loan Eligibility Check =========================
function checkLoan() { 
  if (!loggedInUser || !members[loggedInUser]) {
    alert("âš ï¸ Please log in first.");
    return;
  }

  const totalSavings = members[loggedInUser].savings;
  const loanResult = document.getElementById("loanMessage");
  loanResult.innerHTML = ""; 

  let loanAmount = 0, repaymentPeriod = "";

  if (totalSavings < 1000) {
    loanResult.innerHTML = `âŒ Sorry, ${loggedInUser}, you are not yet eligible for a loan. Please keep saving.`;
    return;
  } 
  else if (totalSavings < 2000) loanAmount = 1000, repaymentPeriod = "Up to 2 months";
  else if (totalSavings < 3000) loanAmount = 1800, repaymentPeriod = "Up to 2 months";
  else if (totalSavings < 4000) loanAmount = 2800, repaymentPeriod = "Up to 3 months";
  else if (totalSavings < 5000) loanAmount = 3500, repaymentPeriod = "Up to 4 months";
  else if (totalSavings < 6500) loanAmount = 4100, repaymentPeriod = "Up to 4 months";
  else if (totalSavings < 7600) loanAmount = 5000, repaymentPeriod = "Up to 4 months";
  else {
    const steps = Math.floor((totalSavings - 7600) / 400);
    loanAmount = 5000 + (steps * 200);
    repaymentPeriod = "Up to 4 months";
  }

  loanResult.innerHTML = `
    <div style="padding:15px; background:#e3f2fd; border-radius:10px; box-shadow:0 3px 6px rgba(0,0,0,0.1);">
      âœ… <b>Congratulations, ${loggedInUser}!</b><br><br>
      <b>Maximum Loan:</b> Ksh ${loanAmount}<br>
      <b>Repayment Period:</b> ${repaymentPeriod}<br><br>

      <button onclick="showLoanForm('${loggedInUser}', ${loanAmount})"
        style="padding:10px 15px; background:#1976d2; color:white; border:none; border-radius:5px; cursor:pointer;">
        ğŸ‘‰ Apply for Loan
      </button>
    </div>
  `;
}

// ========================= ğŸ“ Styled Loan Application Form =========================
function showLoanForm(name, maxAmount) {
  const phone = members[name].phone;
  const loanResult = document.getElementById("loanMessage");

  loanResult.innerHTML = `
    <div style="background:#ffffff; padding:20px; border-radius:12px; box-shadow:0 4px 8px rgba(0,0,0,0.1); max-width:500px; margin:auto;">
      <h3 style="color:#1976d2; text-align:center;">ğŸ“ Loan Application Form</h3>

      <form onsubmit="submitLoan(event, '${name}', ${maxAmount}, '${phone}')">

        <label><b>Name</b></label><br>
        <input type="text" value="${name}" readonly style="width:100%; padding:10px; border-radius:5px; border:1px solid #ccc; margin-bottom:10px;"><br>

        <label><b>Phone Number</b></label><br>
        <input type="text" value="${phone}" readonly style="width:100%; padding:10px; border-radius:5px; border:1px solid #ccc; margin-bottom:10px;"><br>

        <label><b>Maximum Loan</b></label><br>
        <input type="text" value="Ksh ${maxAmount}" readonly style="width:100%; padding:10px; border-radius:5px; border:1px solid #ccc; margin-bottom:10px;"><br>

        <label><b>Repayment Period</b></label><br>
        <select id="repaymentPeriod" onchange="updateLoanSummary(${maxAmount})"
          style="width:100%; padding:10px; border-radius:5px; border:1px solid #ccc; margin-bottom:10px;">
          <option value="">-- Select Period --</option>
          <option value="1">1 Month (12%)</option>
          <option value="2">2 Months (15%)</option>
          <option value="3">3 Months (17%)</option>
          <option value="4">4 Months (20%)</option>
        </select><br>

        <label><b>Loan Amount</b></label><br>
        <input type="number" id="applyAmount" min="500" max="${maxAmount}" required
          placeholder="Enter amount"
          oninput="updateLoanSummary(${maxAmount})"
          style="width:100%; padding:10px; border-radius:5px; border:1px solid #ccc; margin-bottom:10px;"><br>

        <label><b>Reason for Borrowing</b></label><br>
        <textarea id="loanReason" required placeholder="Explain why you are borrowing this loan"
          style="width:100%; padding:10px; border-radius:5px; border:1px solid #ccc; margin-bottom:15px; resize:vertical;" rows="3"></textarea><br>

        <div id="loanSummary" style="font-weight:bold; color:#00796b; margin-bottom:15px;">
          ğŸ’³ Total Repayment: Ksh 0 <br>
          ğŸ“Œ Monthly Installment: Ksh 0
        </div>

        <label><b>ID Number:</b></label><br>
        <input type="number" id="loanId" required placeholder="Enter your ID Number" 
               minlength="7" maxlength="8" 
               oninput="if(this.value.length > 8) this.value = this.value.slice(0, 8);" 
               style="width:100%; padding:10px; border-radius:5px; border:1px solid #ccc; margin-bottom:20px;"><br>

        <button type="submit"
          style="width:100%; padding:12px; background:#388e3c; color:white; border:none; border-radius:8px; font-size:16px; cursor:pointer;">
          Submit Application
        </button>

      </form>
    </div>
  `;
}


// ========================= ğŸ“¤ Submit Loan + PDF + Notification =========================
function submitLoan(event, name, maxAmount, phone) {
  event.preventDefault();

  const amount = parseInt(document.getElementById("applyAmount").value);
  const months = parseInt(document.getElementById("repaymentPeriod").value);
  const id = document.getElementById("loanId").value.trim();
  const reason = document.getElementById("loanReason").value.trim();

  if (isNaN(amount) || amount < 500 || amount > maxAmount) { alert("âŒ Enter a valid loan amount."); return; }
  if (!/^[0-9]{7,8}$/.test(id)) { alert("âŒ Enter a valid ID number (7â€“8 digits)."); return; }
  if (isNaN(months)) { alert("âŒ Please select a repayment period."); return; }
  if (!reason) { alert("âŒ Please provide a reason for borrowing."); return; }

  let interest = months === 1 ? 0.12 : months === 2 ? 0.15 : months === 3 ? 0.17 : 0.20;
  const totalRepayment = Math.round(amount * (1 + interest));
  const monthlyRepayment = Math.round(totalRepayment / months);
  const applyDate = new Date().toLocaleDateString("en-KE", { year: "numeric", month: "long", day: "numeric" });

  const { jsPDF } = window.jspdf;
  const doc = new jsPDF("p", "mm", "a4");
  const logo = new Image();
  logo.crossOrigin = "anonymous";
  logo.src = "https://raw.githubusercontent.com/bony87/my-future-finder-chama-group/main/ChatGPT%20Image%20Sep%2010%2C%202025%2C%2005_43_14%20PM.png";

  logo.onload = function () {
    // ==================== Background & Decoration ====================
    doc.setFillColor(240, 248, 255); // light background
    doc.rect(10, 10, 190, 277, 'F'); // filled rectangle as background

    // Logo
    doc.addImage(logo, "PNG", 80, 10, 50, 30);

    // Title
    doc.setFontSize(18); 
    doc.setFont("helvetica", "bold");
    doc.setTextColor(0, 70, 140);
    doc.text("LOAN APPLICATION FORM", 105, 50, { align: "center" });

    // Divider
    doc.setLineWidth(0.7);
    doc.setDrawColor(0, 70, 140);
    doc.line(20, 55, 190, 55);

    // ==================== Body ====================
    doc.setFontSize(12);
    doc.setFont("helvetica", "bold");
    let y = 70, lineGap = 10;

    doc.setTextColor(0);
    doc.text("Applicant Details:", 20, y); y += lineGap;
    doc.setFont("helvetica", "normal");
    doc.text(`Name: ${name}`, 25, y); y += lineGap;
    doc.text(`Phone: ${phone}`, 25, y); y += lineGap;
    doc.text(`ID Number: ${id}`, 25, y); y += lineGap;

    y += lineGap / 2;
    doc.setFont("helvetica", "bold");
    doc.text("Loan Details:", 20, y); y += lineGap;
    doc.setFont("helvetica", "normal");
    doc.text(`Requested Amount: Ksh ${amount}`, 25, y); y += lineGap;
    doc.text(`Interest Rate: ${interest*100}%`, 25, y); y += lineGap;
    doc.text(`Repayment Period: ${months} month(s)`, 25, y); y += lineGap;
    doc.text(`Monthly Installment: Ksh ${monthlyRepayment}`, 25, y); y += lineGap;
    doc.text(`Total Repayment: Ksh ${totalRepayment}`, 25, y); y += lineGap;

    y += lineGap / 2;
    doc.setFont("helvetica", "bold");
    doc.text("Reason for Borrowing:", 20, y); y += lineGap;
    doc.setFont("helvetica", "normal");
    // Wrap long text
    const splitReason = doc.splitTextToSize(reason, 160);
    doc.text(splitReason, 25, y); 
    y += splitReason.length * lineGap;

    doc.text(`Application Date: ${applyDate}`, 25, y); y += lineGap*2;

    // ==================== Signatures ====================
    const sigY = 240; 
    doc.setFont("helvetica", "bolditalic");
    doc.setFontSize(12);
    doc.text("_________________________", 40, sigY);
    doc.text("Judith Kemunto", 50, sigY + 6);
    doc.text("_________________________", 130, sigY);
    doc.text("Boniface Chelluget", 140, sigY + 6);

    // Footer
    doc.setFontSize(9);
    doc.setFont("helvetica", "normal");
    doc.setTextColor(80);
    doc.text("Future Finders â€“ Empowering our members through savings, merry-go-round and loans", 105, 285, { align: "center" });

    // ==================== Save PDF & Notification ====================
    doc.save(`Future_Finders_Loan_${name.replaceAll(" ", "_")}.pdf`);
    showNotification("âœ… Your form has been downloaded and sent to admin!");
  };
}


// ==================== Notification Function ====================
function showNotification(message) {
  const notif = document.createElement("div");
  notif.innerHTML = message;
  notif.style.position = "fixed";
  notif.style.bottom = "20px";
  notif.style.right = "20px";
  notif.style.background = "#388e3c";
  notif.style.color = "white";
  notif.style.padding = "15px 20px";
  notif.style.borderRadius = "8px";
  notif.style.boxShadow = "0 3px 6px rgba(0,0,0,0.2)";
  notif.style.zIndex = 9999;
  notif.style.fontWeight = "bold";
  notif.style.opacity = "0";
  notif.style.transition = "opacity 0.5s";

  document.body.appendChild(notif);
  setTimeout(()=>notif.style.opacity="1",50);
  setTimeout(()=>notif.style.opacity="0",4000);
  setTimeout(()=>notif.remove(),4500);
}







function updateLoanSummary(maxAmount) {

  let amount = parseInt(document.getElementById("applyAmount").value);
  let months = parseInt(document.getElementById("repaymentPeriod").value);

  if (isNaN(amount) || amount < 500 || amount > maxAmount) {
    document.getElementById("loanSummary").innerHTML =
      "âš ï¸ Enter amount between 500 and " + maxAmount;
    return;
  }

  if (isNaN(months)) {
    document.getElementById("loanSummary").innerHTML =
      "âš ï¸ Select repayment period";
    return;
  }

  let interest = 0;
  if (months === 1) interest = 0.12;
  else if (months === 2) interest = 0.15;
  else if (months === 3) interest = 0.17;
  else if (months === 4) interest = 0.20;

  let total = Math.round(amount * (1 + interest));
  let monthly = Math.round(total / months);

  document.getElementById("loanSummary").innerHTML = `
    ğŸ’³ Total Repayment: Ksh ${total}<br>
    ğŸ“Œ Monthly Installment: Ksh ${monthly}<br>
    ğŸ“ˆ Interest: ${interest * 100}%
  `;
}


// =========================
// ğŸ”„ Contributions Totals
// =========================
function updateRowTotal(row) {
  let inputs = row.querySelectorAll("input[type='number']");
  let sum = 0;
  inputs.forEach(input => sum += parseInt(input.value) || 0);
  row.querySelector(".rowTotal").textContent = sum;
  calculateGrandTotal();
}

function calculateGrandTotal() {
  let total = 0;
  document.querySelectorAll(".rowTotal").forEach(cell => {
    total += parseInt(cell.textContent) || 0;
  });
  document.querySelector("#grandTotalRow td:last-child").textContent = total;
}


// ğŸ”‘ Admin Login with Spinner
function adminLogin() {
  let usernameInput = document.getElementById("adminUser");
  let passwordInput = document.getElementById("adminPass");
  let username = usernameInput.value.trim().toLowerCase();
  let password = passwordInput.value.trim();
  let message = document.getElementById("adminLoginMessage");
  let loginBtn = document.getElementById("adminBtn");
  let spinner = loginBtn.querySelector(".spinner");

  spinner.style.display = "inline-block";
  message.innerHTML = "";
  loginBtn.style.pointerEvents = "none";

  setTimeout(() => {
    spinner.style.display = "none";
    loginBtn.style.pointerEvents = "auto";

    if (username === "bony" && password === "2025") {
      // âœ… Success
      message.style.color = "green";
      message.innerHTML = "âœ… Login successful! Welcome, Admin.";

      document.getElementById("adminLogin").style.display = "none";
      document.getElementById("admin").style.display = "block";

      localStorage.setItem("adminLoggedIn", "true");

      // Load loan applications immediately
      loadLoanApplications();
    } else {
      // âŒ Fail
      message.style.color = "red";
      message.innerHTML = "âŒ Incorrect username or password!";
    }
  }, 2000);
}


// ğŸšª Admin Logout
function adminLogout() {
  let logoutBtn = document.getElementById("logoutBtn");
  let spinner = logoutBtn.querySelector(".spinner");

  spinner.style.display = "inline-block";
  logoutBtn.style.pointerEvents = "none";

  setTimeout(() => {
    localStorage.removeItem("adminLoggedIn");

    document.getElementById("admin").style.display = "none";
    document.getElementById("adminLogin").style.display = "block";

    spinner.style.display = "none";
    logoutBtn.style.pointerEvents = "auto";

    alert("âœ… You have been logged out.");
  }, 2000);
}
function loadLoanApplications() {
  let applications = JSON.parse(localStorage.getItem("loanApplications")) || [];
  let body = document.getElementById("adminLoanBody");

  if (applications.length === 0) {
    body.innerHTML = `<tr><td colspan="11" style="color:gray;">No applications yet.</td><td class="saved2025">0</td><td class="reward2025">0</td></tr>`;
    return;
  }

  body.innerHTML = "";
  applications.forEach((app, index) => {
    let row = document.createElement("tr");
    row.innerHTML = `
      <td>${app.name}</td>
      <td>${app.phone}</td>
      <td>Ksh ${app.qualifiedAmount}</td>
      <td>Ksh ${app.requestedAmount}</td>
      <td>${app.idNumber}</td>
      <td>${app.repaymentPeriod}</td>
      <td>Ksh ${app.repaymentAmount}</td>
      <td>${app.date}</td>
      <td style="font-weight:bold; color:${app.status.includes("Pending") ? "orange" : app.status.includes("Approved") ? "green" : "red"};">
        ${app.status}${app.reason ? `<br><small style="color:gray;">${app.reason}</small>` : ""}
      </td>
      <td>
        <button onclick="approveLoan(${index})" style="background:#388e3c; color:white; padding:5px; border:none; border-radius:3px; cursor:pointer;">Approve</button>
        <button onclick="rejectLoan(${index})" style="background:#d32f2f; color:white; padding:5px; border:none; border-radius:3px; cursor:pointer;">Reject</button>
        <button onclick="deleteLoan(${index})" style="background:#757575; color:white; padding:5px; border:none; border-radius:3px; cursor:pointer;">Delete</button>
      </td>
    `;
    body.appendChild(row);
  });
}

// ğŸ“² Send WhatsApp Notification (to Admin)
function sendWhatsAppNotification(message) {
  let adminPhone = "254713953004";  // Adminâ€™s WhatsApp number
  let url = `https://wa.me/${adminPhone}?text=${encodeURIComponent(message)}`;
  window.open(url, "_blank");
}
function approveLoan(index) {
  let applications = JSON.parse(localStorage.getItem("loanApplications")) || [];
  if (applications[index]) {
    applications[index].status = "Approved âœ…";
    localStorage.setItem("loanApplications", JSON.stringify(applications));
    loadLoanApplications();
    loadMemberLoanHistory(applications[index].name);

    // âœ… Refresh stats
    updateAdminSummary();
    loadLoanApplications();
    loadMemberLoanHistory(applications[index].name);
    populateMemberDropdown();
    // âœ… WhatsApp Notification
    let msg = `Hello ${applications[index].name},\n\nğŸ‰ Good news! Your loan of Ksh ${applications[index].requestedAmount} has been *APPROVED*.\n\nğŸ“… Repayment Period: ${applications[index].repaymentPeriod}\nğŸ’° Total Repayment: Ksh ${applications[index].repaymentAmount}\n\nâœ… Thank you for trusting Future Finders Chama.`;
    sendWhatsAppNotification(msg);

    alert(`ğŸ‰ Loan for ${applications[index].name} has been approved!`);
  }
}


// âŒ Reject Loan
function rejectLoan(index) {
  let applications = JSON.parse(localStorage.getItem("loanApplications")) || [];
  
  if (applications[index]) {
    // Ask for rejection reason
    let reason = prompt("âš ï¸ Enter reason for rejection:");
    if (!reason) {
      alert("âŒ Rejection reason is required.");
      return;
    }

    applications[index].status = "Rejected âŒ";
    applications[index].reason = reason;
    localStorage.setItem("loanApplications", JSON.stringify(applications));

    // Refresh views
    updateAdminSummary();
    loadLoanApplications();
    loadMemberLoanHistory(applications[index].name);

    // Notify Admin via WhatsApp
    let msg = `âŒ Loan Rejected\n\nğŸ‘¤ Member: ${applications[index].name}\nğŸ’° Amount: Ksh ${applications[index].requestedAmount}\nğŸ“ Phone: ${applications[index].phone}\nğŸ“… Date: ${applications[index].date}\nReason: ${reason}`;
    sendWhatsAppNotification(msg);

    alert(`âš ï¸ Loan for ${applications[index].name} has been rejected.`);
  }
}



function deleteLoan(index) {
  let applications = JSON.parse(localStorage.getItem("loanApplications")) || [];

  if (applications[index]) {
    if (applications[index].status.includes("Pending")) {
      alert("âš ï¸ You cannot delete a pending loan.");
      return;
    }

    if (confirm(`ğŸ—‘ Are you sure you want to delete this ${applications[index].status} loan?`)) {
      applications.splice(index, 1);
      localStorage.setItem("loanApplications", JSON.stringify(applications));

      loadLoanApplications();
      let memberName = document.getElementById("memberDisplay").innerText;
      if (memberName) {
        loadMemberLoanHistory(memberName);
      }

      

      alert("âœ… Loan deleted successfully.");
    }
  }
}

// ğŸ” Filter loans by search + status
function filterLoans() {
  let input = document.getElementById("loanSearch").value.toLowerCase();
  let statusFilter = document.getElementById("loanStatusFilter").value;
  let rows = document.querySelectorAll("#adminLoanBody tr");

  rows.forEach(row => {
    let text = row.innerText.toLowerCase();
    let matchesSearch = text.includes(input);
    let matchesStatus = !statusFilter || text.includes(statusFilter.toLowerCase());

    row.style.display = (matchesSearch && matchesStatus) ? "" : "none";
  });
}
// ğŸ“‚ Export Loans to CSV
function exportLoans() {
  let applications = JSON.parse(localStorage.getItem("loanApplications")) || [];

  if (applications.length === 0) {
    alert("âš ï¸ No loans to export.");
    return;
  }

  // CSV Header
  let csvContent = "data:text/csv;charset=utf-8,Name,Phone,Qualified Amount,Requested Amount,ID Number,Repayment Period,Repayment Amount,Date,Status,Reason\n";

  // CSV Rows
  applications.forEach(app => {
    let row = [
      app.name,
      app.phone,
      "Ksh " + app.qualifiedAmount,
      "Ksh " + app.requestedAmount,
      app.idNumber,
      app.repaymentPeriod,
      "Ksh " + app.repaymentAmount,
      app.date,
      app.status,
      app.reason || ""
    ];
    csvContent += row.join(",") + "\n";
  });

  // Download File
  let encodedUri = encodeURI(csvContent);
  let link = document.createElement("a");
  link.setAttribute("href", encodedUri);
  link.setAttribute("download", "loan_applications.csv");
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
}




// ğŸ“‹ Show Pending Members in Admin Panel
function updatePendingMembersTable() {
  let pending = JSON.parse(localStorage.getItem("pendingMembers")) || [];
  let tbody = document.getElementById("pendingMembersBody");

  tbody.innerHTML = "";

  if (pending.length === 0) {
    tbody.innerHTML = `<tr><td colspan="4" style="color:gray;">No pending registrations.</td><td class="saved2025">0</td><td class="reward2025">0</td></tr>`;
    return;
  }

  pending.forEach((m, index) => {
    let row = `
      <tr>
        <td>${m.name}</td>
        <td>${m.phone}</td>
        <td>
          <button onclick="approveMember(${index})" style="background:green; color:white; padding:5px; border:none; border-radius:4px; cursor:pointer;">âœ… Approve</button>
          <button onclick="rejectMember(${index})" style="background:red; color:white; padding:5px; border:none; border-radius:4px; cursor:pointer;">âŒ Reject</button>
        </td>
      </tr>
    `;
    tbody.innerHTML += row;
  });
}
function approveMember(index) {
  let pending = JSON.parse(localStorage.getItem("pendingMembers")) || [];
  let member = pending[index];

  // âœ… Add to approved members
  members[member.name] = { phone: member.phone, savings: 0, monthly: [] };

  // Remove from pending
  pending.splice(index, 1);
  localStorage.setItem("pendingMembers", JSON.stringify(pending));

  // Add to login dropdown
  let dropdown = document.getElementById("memberName");
  let option = document.createElement("option");
  option.value = member.name;
  option.textContent = member.name;
  dropdown.appendChild(option);

  // âœ… Add to WhatsApp member selection instantly
  populateMemberDropdown();

  // âœ… WhatsApp Notification to User
  let message = `ğŸ‰ Hello ${member.name}, your registration to Future Finders Chama has been APPROVED âœ…. You can now log in with your phone number: ${member.phone}. Welcome aboard!`;
  window.open("https://wa.me/" + member.phone.replace(/^0/, "254") + "?text=" + encodeURIComponent(message), "_blank");

  alert(`âœ… ${member.name} approved and added to members list!`);
  updatePendingMembersTable();
}

function rejectMember(index) {
  let pending = JSON.parse(localStorage.getItem("pendingMembers")) || [];
  let member = pending[index];

  // Remove from pending
  pending.splice(index, 1);
  localStorage.setItem("pendingMembers", JSON.stringify(pending));

  // âŒ Refresh dropdown just in case
  populateMemberDropdown();

  // âŒ WhatsApp Notification to User
  let message = `âš ï¸ Hello ${member.name}, unfortunately your registration to Future Finders Chama has been REJECTED âŒ. Please contact the admin for more details.`;
  window.open("https://wa.me/" + member.phone.replace(/^0/, "254") + "?text=" + encodeURIComponent(message), "_blank");

  alert(`âŒ ${member.name} has been rejected.`);
  updatePendingMembersTable();
}

// ğŸ“¢ Show System Banner
function showBanner(message, time) {
  document.getElementById("bannerMessage").innerHTML =
    `ğŸ“¢ ${message} <br><small style="font-weight:normal;">ğŸ•’ Posted on ${time}</small>`;

  let banner = document.getElementById("systemBanner");
  banner.style.display = "block";

  // Smooth fade-in
  setTimeout(() => banner.classList.add("show"), 50);

  // Auto-hide after 8 seconds
  setTimeout(() => {
    closeBanner();
  }, 8000);
}

// âŒ Close Banner
function closeBanner() {
  let banner = document.getElementById("systemBanner");
  banner.classList.remove("show");
  setTimeout(() => (banner.style.display = "none"), 600);
}
function loadNews() {
  let updates = JSON.parse(localStorage.getItem("systemUpdates")) || [];
  let contentDiv = document.getElementById("newsFeed"); // âœ… fixed
  if (!contentDiv) return;

  if (updates.length === 0) {
    contentDiv.innerHTML = "<p style='color:gray;'>No news yet.</p>";
    return;
  }

  contentDiv.innerHTML = "";
  updates.slice().reverse().forEach(update => {
    contentDiv.innerHTML += `
      <div style="border-bottom:1px solid #ddd; padding:10px 0;">
        <b style="color:#333;">${update.time}</b><br>
        <span>${update.message}</span>
      </div>
    `;
  });
}


function markNewsRead() {
  let updates = JSON.parse(localStorage.getItem("systemUpdates")) || [];
  if (updates.length > 0) {
    let lastUpdateTime = updates[updates.length - 1].time;
    localStorage.setItem("lastReadUpdate", lastUpdateTime);
  }

  let badge = document.getElementById("newsBadge");
  if (badge) badge.style.display = "none";
}

// âœ… Post New Update (Admin)
function postUpdate() {
  let msg = document.getElementById("updateMessage").value.trim();
  if (!msg) {
    alert("âš ï¸ Please enter a message before posting.");
    return;
  }

  let now = new Date();
  let dateStr = now.toLocaleString("en-KE", {
    weekday: "long", year: "numeric", month: "long", day: "numeric",
    hour: "2-digit", minute: "2-digit"
  });

  let newUpdate = { message: msg, time: dateStr };

  let updates = JSON.parse(localStorage.getItem("systemUpdates")) || [];
  updates.push(newUpdate);
  localStorage.setItem("systemUpdates", JSON.stringify(updates));

  showBanner(msg, dateStr);
  loadNews();

  // âœ… Show red dot badge
  document.getElementById("newsBadge").style.display = "inline";

  alert("âœ… Update posted successfully!");
  document.getElementById("updateMessage").value = "";
  document.getElementById("sendWhatsAppUpdate").checked = false;
  document.getElementById("memberSelectionBox").style.display = "none";
}

// âœ… Check Badge on Page Load
function checkNewsBadge() {
  let updates = JSON.parse(localStorage.getItem("systemUpdates")) || [];
  let lastRead = localStorage.getItem("lastReadUpdate");

  if (updates.length > 0) {
    let lastUpdateTime = updates[updates.length - 1].time;
    if (lastUpdateTime !== lastRead) {
      document.getElementById("newsBadge").style.display = "inline"; // show red dot
    }
  }
}

// Run check when dashboard loads
checkNewsBadge();

// ğŸ“œ Update History (Admin Only) 
function updateUpdateHistory() {
  let updates = JSON.parse(localStorage.getItem("systemUpdates")) || [];
  let body = document.getElementById("updateHistoryBody");

  if (!body) return; // Skip if table not present

  body.innerHTML = "";

  if (updates.length === 0) {
    body.innerHTML = `<tr><td colspan="2" style="color:gray;">No updates posted yet.</td><td class="saved2025">0</td><td class="reward2025">0</td></tr>`;
    return;
  }

  // Show most recent first
  updates.slice().reverse().forEach((update, index) => {
    let row = document.createElement("tr");
    row.innerHTML = `
      <td colspan="2" style="text-align:left;">
        <button onclick="toggleUpdate(${index})" 
                style="background:#1976d2; color:white; border:none; padding:5px 10px; border-radius:4px; cursor:pointer;">
          ğŸ“¢ ${update.time} ${index === 0 ? "(Latest)" : ""}
        </button>
        <button onclick="deleteUpdate(${updates.length - 1 - index})" 
                style="background:#d32f2f; color:white; border:none; padding:5px 10px; border-radius:4px; margin-left:5px; cursor:pointer;">
          ğŸ—‘ï¸ Delete
        </button>
        <div id="update-${index}" class="update-content" 
             style="display:${index === 0 ? "block" : "none"}; margin-top:5px; padding:8px; border:1px solid #ccc; border-radius:5px;">
          ${update.message}
        </div>
      </td>
    `;
    body.appendChild(row);
  });
}

// Toggle update visibility
function toggleUpdate(index) {
  let content = document.getElementById(`update-${index}`);
  content.style.display = (content.style.display === "none") ? "block" : "none";
}



// ğŸ—‘ï¸ Delete a Single Update
function deleteUpdate(index) {
  let password = prompt("ğŸ”‘ Enter Admin Password to delete this update:");

  if (password === "2025") {
    let updates = JSON.parse(localStorage.getItem("systemUpdates")) || [];

    // Remove the update
    updates.splice(index, 1);
    localStorage.setItem("systemUpdates", JSON.stringify(updates));

    // Refresh history
    updateUpdateHistory();

    // âœ… If latest was deleted â†’ hide banner
    if (index === updates.length) { 
      closeBanner();
    } else if (updates.length > 0) {
      // Show new latest update as banner
      let latest = updates[updates.length - 1];
      showBanner(latest.message, latest.time);
    } else {
      // No updates left â†’ hide banner
      closeBanner();
    }

    alert("âœ… Update deleted successfully!");
  } else if (password !== null) {
    alert("âŒ Incorrect password. You are not allowed to delete.");
  }
}

// ğŸ§¹ Clear All Updates
function clearUpdateHistory() {
  if (confirm("âš ï¸ Are you sure you want to clear all updates? This cannot be undone.")) {
    localStorage.removeItem("systemUpdates");
    updateUpdateHistory();
    closeBanner(); // âœ… Hide banner too
    alert("âœ… All updates cleared!");
  }
}
// ğŸ“ Post New Update (Admin Only)
function postUpdate() {
  let msg = document.getElementById("updateMessage").value.trim();
  if (!msg) {
    alert("âš ï¸ Please enter a message before posting.");
    return;
  }

  let now = new Date();
  let dateStr = now.toLocaleString("en-KE", {
    weekday: "long", year: "numeric", month: "long", day: "numeric",
    hour: "2-digit", minute: "2-digit"
  });

  let newUpdate = { message: msg, time: dateStr };

  let updates = JSON.parse(localStorage.getItem("systemUpdates")) || [];
  updates.push(newUpdate);
  localStorage.setItem("systemUpdates", JSON.stringify(updates));

  // Show banner immediately
  showBanner(msg, dateStr);

  // Update history table
  updateUpdateHistory();

  // âœ… If checkbox checked â†’ send WhatsApp
  if (document.getElementById("sendWhatsAppUpdate").checked) {
    let selected = Array.from(document.getElementById("memberSelectMulti").selectedOptions).map(o => o.value);

    if (selected.length === 0) {
      // If none selected â†’ send to ALL
      broadcastWhatsAppUpdate(msg, dateStr);
    } else {
      // Send only to selected members
      broadcastWhatsAppUpdate(msg, dateStr, selected);
    }
  }

  alert("âœ… Update posted successfully!");
  document.getElementById("updateMessage").value = "";
  document.getElementById("sendWhatsAppUpdate").checked = false;
  document.getElementById("memberSelectionBox").style.display = "none";
}

// ğŸ“¢ Send Update to Members on WhatsApp (Sequential with Delay)
function broadcastWhatsAppUpdate(message, time, selectedMembers = null) {
  let fullMsg = `ğŸ“¢ Future Finders Update\n\n${message}\n\nğŸ•’ Posted on: ${time}\n\n- Admin`;

  // Use selected list, or all members
  let targetMembers = selectedMembers || Object.keys(members);

  let index = 0;

  function sendNext() {
    if (index >= targetMembers.length) {
      alert("âœ… WhatsApp notifications sent to all selected members!");
      return;
    }

    let memberName = targetMembers[index];
    if (members[memberName]) {
      let phone = members[memberName].phone.replace(/^0/, "254");
      let url = `https://wa.me/${phone}?text=${encodeURIComponent(fullMsg)}`;
      window.open(url, "_blank");
    }

    index++;
    setTimeout(sendNext, 2000); // â³ 2 sec delay per message
  }

  sendNext();
}


// ğŸ¯ Show/Hide Member Selection when checkbox toggled
function toggleMemberSelection() {
  let box = document.getElementById("memberSelectionBox");
  let checkbox = document.getElementById("sendWhatsAppUpdate");

  if (checkbox.checked) {
    box.style.display = "block";

    // Populate members if empty
    let select = document.getElementById("memberSelectMulti");
    if (select.options.length === 0) {
      Object.keys(members).forEach(name => {
        let opt = document.createElement("option");
        opt.value = name;
        opt.textContent = name;
        select.appendChild(opt);
      });
    }
  } else {
    box.style.display = "none";
  }
}
// âœ… Select All Members
function selectAllMembers() {
  let select = document.getElementById("memberSelectMulti");
  for (let i = 0; i < select.options.length; i++) {
    select.options[i].selected = true;
  }
}

// ğŸ”„ Populate Member Dropdown from `members` object
function populateMemberDropdown() {
  let select = document.getElementById("memberSelectMulti");
  if (!select) return;

  // Clear old options
  select.innerHTML = "";

  // Add members dynamically
  Object.keys(members).forEach(name => {
    let opt = document.createElement("option");
    opt.value = name;
    opt.textContent = name;
    select.appendChild(opt);
  });
}

// ğŸ” Filter Members in Dropdown
function filterMembers() {
  let input = document.getElementById("memberSearch").value.toLowerCase();
  let select = document.getElementById("memberSelectMulti");

  for (let i = 0; i < select.options.length; i++) {
    let option = select.options[i];
    let text = option.textContent.toLowerCase();
    option.style.display = text.includes(input) ? "" : "none";
  }
}
// ğŸ“Š Update Admin Summary Stats
function updateAdminSummary() {
  // Members
  let totalMembers = Object.keys(members).length;

  // Total savings
  let totalSavings = Object.values(members).reduce((sum, m) => sum + (m.savings || 0), 0);

  // Loans
  let applications = JSON.parse(localStorage.getItem("loanApplications")) || [];
  let totalLoans = applications.length;

  let pendingCount = applications.filter(a => a.status.includes("Pending")).length;
  let approvedCount = applications.filter(a => a.status.includes("Approved")).length;
  let rejectedCount = applications.filter(a => a.status.includes("Rejected")).length;

  // Update UI
  document.getElementById("totalMembersCard").innerText = `ğŸ‘¥ Total Members: ${totalMembers}`;
  document.getElementById("totalSavingsCard").innerText = `ğŸ’° Total Savings: Ksh ${totalSavings}`;
  document.getElementById("totalLoansCard").innerText = `ğŸ“‘ Total Loans: ${totalLoans}`;
  document.getElementById("loanBreakdownCard").innerText = `ğŸ“Š Loan Status: ${pendingCount} Pending / ${approvedCount} Approved / ${rejectedCount} Rejected`;
}
// ğŸ¯ Show/Hide Member Selection when checkbox toggled
function toggleMemberSelection() {
  let box = document.getElementById("memberSelectionBox");
  let checkbox = document.getElementById("sendWhatsAppUpdate");

  if (checkbox.checked) {
    box.style.display = "block";

    // Populate members if empty
    let select = document.getElementById("memberSelectMulti");
    if (select.options.length === 0) {
      Object.keys(members).forEach(name => {
        let opt = document.createElement("option");
        opt.value = name;
        opt.textContent = name;
        select.appendChild(opt);
      });
    }
  } else {
    box.style.display = "none";
  }
}
// âœ… Select All Members
function selectAllMembers() {
  let select = document.getElementById("memberSelectMulti");
  for (let i = 0; i < select.options.length; i++) {
    select.options[i].selected = true;
  }
}

// âŒ Clear All Members
function clearAllMembers() {
  let select = document.getElementById("memberSelectMulti");
  for (let i = 0; i < select.options.length; i++) {
    select.options[i].selected = false;
  }
}






window.onload = function () {
  let updates = JSON.parse(localStorage.getItem("systemUpdates")) || [];
  if (updates.length > 0) {
    let latest = updates[updates.length - 1];
    showBanner(latest.message, latest.time);
    updateUpdateHistory();
  }

  // âœ… Populate members when page loads
  populateMemberDropdown();
};


const diceFaces = ["âš€","âš","âš‚","âšƒ","âš„","âš…"];

// Load from localStorage or create fresh
let usedNumbers = JSON.parse(localStorage.getItem("usedNumbers")) || [];
let luckyNumbers = JSON.parse(localStorage.getItem("luckyNumbers")) || {}; 

// ğŸ² Pick Number
function pickNumber() {
  let member = document.getElementById("memberSelect").value;
  let dice = document.getElementById("diceBox");
  let result = document.getElementById("result");
  let diceSound = document.getElementById("diceSound"); // ğŸµ sound element

  if (!member) {
    alert("âš ï¸ Please select your name first.");
    return;
  }

  // Play sound
  diceSound.currentTime = 0; 
  diceSound.play();

  // Start rolling
  dice.classList.add("roll");
  result.innerHTML = "ğŸ² Rolling your lucky number...";

  let rollInterval = setInterval(() => {
    dice.innerHTML = diceFaces[Math.floor(Math.random() * diceFaces.length)];
    let colors = ["#ffeb3b","#4caf50","#f44336","#2196f3","#9c27b0","#ff9800"];
    dice.style.background = colors[Math.floor(Math.random() * colors.length)];
  }, 200);

  // Stop after 4s
  setTimeout(() => {
    clearInterval(rollInterval);
    dice.classList.remove("roll");
    dice.style.background = "white"; 

    // Check if already has number
    if (luckyNumbers[member]) {
      dice.innerHTML = luckyNumbers[member].number; 
     result.innerHTML = `
  âŒ Sorry ${member}, you already picked your lucky number: 
  <b>${luckyNumbers[member].number}</b><br><br>
  <button onclick="resendNumber('${member}')"
    style="padding:8px 12px; background:#00796b; color:white; border:none; border-radius:5px; cursor:pointer;">
    ğŸ” Resend Number
  </button>
  <p style="margin-top:10px; color:#d32f2f; font-weight:bold;">
    âš ï¸ Please make sure your number was sent to the admin immediately!
  </p>
`;

      return;
    }

    // Generate unique number
    let number;
    do {
      number = Math.floor(Math.random() * 25) + 1;
    } while (usedNumbers.includes(number));

    // Save number with timestamp
    luckyNumbers[member] = { 
      number: number, 
      time: new Date().toLocaleString() 
    };
    usedNumbers.push(number);

    localStorage.setItem("luckyNumbers", JSON.stringify(luckyNumbers));
    localStorage.setItem("usedNumbers", JSON.stringify(usedNumbers));

    // Show number
    dice.innerHTML = number; 
   result.innerHTML = `
  ğŸ‰ Congratulations ${member}, your lucky number is: 
  <b>${number}</b><br><br>
  <button onclick="resendNumber('${member}')"
    style="padding:8px 12px; background:#1976d2; color:white; border:none; border-radius:5px; cursor:pointer;">
    ğŸ” Resend Number
  </button>
  <p style="margin-top:10px; color:#d32f2f; font-weight:bold;">
    âš ï¸ Please send your number to the admin immediately after picking!
  </p>
`;


    // âœ… Auto-send to admin WhatsApp
    let message = `ğŸ‰ Hello Admin, ${member} just picked lucky number: ${number}`;
    window.open("https://wa.me/254713953004?text=" + encodeURIComponent(message), "_blank");

  }, 4000);
}

// ğŸ” Resend number (Admin forwarding again)
function resendNumber(member) {
  let number = luckyNumbers[member].number;
  let method = document.querySelector('input[name="sendOption"]:checked')?.value || "whatsapp";

  let message = `ğŸ‰ Hello ${member}, your lucky number is: ${number}`;

  if (method === "whatsapp") {
    window.open("https://wa.me/254713953004?text=" + encodeURIComponent(message), "_blank");
  } else {
    window.location.href = "mailto:?subject=Lucky Number&body=" + encodeURIComponent(message);
  }
}

// ğŸ“Š Show Picked Numbers (Admin Only)
function showPickedNumbers() {
  let table = document.getElementById("pickedNumbersTable");
  let body = document.getElementById("pickedNumbersBody");

  body.innerHTML = "";

  if (Object.keys(luckyNumbers).length === 0) {
    body.innerHTML = `<tr><td colspan="3" style="color:gray;">No numbers picked yet.</td><td class="saved2025">0</td><td class="reward2025">0</td></tr>`;
  } else {
    for (let member in luckyNumbers) {
      let row = document.createElement("tr");
      row.innerHTML = `
        <td>${member}</td>
        <td>${luckyNumbers[member].number}</td>
        <td>${luckyNumbers[member].time}</td>
      `;
      body.appendChild(row);
    }
  }
  table.style.display = "block";
}

// ğŸ‘ Toggle picked numbers table
function togglePickedNumbers() {
  let table = document.getElementById("pickedNumbersTable");
  let btn = document.querySelector('button[onclick="togglePickedNumbers()"]');

  if (table.style.display === "none" || table.style.display === "") {
    showPickedNumbers();
    table.style.display = "block";
    btn.innerText = "ğŸ™ˆ Hide Picked Numbers";
  } else {
    table.style.display = "none";
    btn.innerText = "ğŸ² View Picked Numbers";
  }
}

// ğŸ“¥ Download as CSV
function downloadPickedNumbers() {
  if (Object.keys(luckyNumbers).length === 0) {
    alert("âš ï¸ No picked numbers to download.");
    return;
  }

  let csvContent = "data:text/csv;charset=utf-8,Member,Lucky Number,Picked At\n";
  for (let member in luckyNumbers) {
    csvContent += `${member},${luckyNumbers[member].number},${luckyNumbers[member].time}\n`;
  }

  let encodedUri = encodeURI(csvContent);
  let link = document.createElement("a");
  link.setAttribute("href", encodedUri);
  link.setAttribute("download", "picked_numbers.csv");
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
}

// ğŸ”„ Reset all picked numbers (Admin only)
function resetPickedNumbers() {
  let password = prompt("ğŸ”’ Enter admin password to reset picked numbers:");

  if (password !== "2025") {
    alert("âŒ Incorrect password. Reset cancelled.");
    return;
  }

  if (confirm("âš ï¸ Are you sure you want to reset all picked numbers? This action cannot be undone.")) {
    localStorage.removeItem("luckyNumbers");
    localStorage.removeItem("usedNumbers");
    luckyNumbers = {};
    usedNumbers = [];

    document.getElementById("pickedNumbersBody").innerHTML = 
      `<tr><td colspan="3" style="color:gray;">No numbers picked yet.</td><td class="saved2025">0</td><td class="reward2025">0</td></tr>`;

    alert("âœ… All picked numbers have been reset successfully.");
    showAvailableNumbers(); // âœ… refresh available numbers too
  }
}

// ğŸŸ¢ Show Available Numbers (Admin)
function showAvailableNumbers() {
  let allNumbers = Array.from({ length: 25 }, (_, i) => i + 1); // [1..25]
  let available = allNumbers.filter(n => !usedNumbers.includes(n));

  // âœ… Ensure container exists inside Admin panel
  let adminPanel = document.getElementById("admin");
  let box = document.getElementById("availableNumbersBox");

  if (!box) {
    box = document.createElement("div");
    box.id = "availableNumbersBox";
    adminPanel.appendChild(box); // put it inside #admin
  }

  // âœ… Render content with refresh button
  box.innerHTML = `
    <h3>ğŸ“‹ Available Numbers (${available.length}/25)</h3>
    <p style="margin:5px 0;">
      ${available.length > 0 ? available.join(", ") : "ğŸ‰ All numbers have been taken!"}
    </p>
    <button onclick="showAvailableNumbers()" 
            style="margin-top:5px; padding:6px 12px; background:#1976d2; color:white; border:none; border-radius:4px; cursor:pointer;">
      ğŸ”„ Refresh Available Numbers
    </button>
  `;

  // âœ… Styling
  box.style.border = "1px solid #ccc";
  box.style.padding = "10px";
  box.style.marginTop = "15px";
  box.style.background = "#f9f9f9";
  box.style.borderRadius = "6px";
}


function resendNumber(member) {
  let number = luckyNumbers[member];
  let method = document.querySelector('input[name="sendOption"]:checked')?.value || "whatsapp";

  let message = `ğŸ‰ Hello ${member}, your lucky number is: ${number}`;

  if (method === "whatsapp") {
    window.open("https://wa.me/254713953004?text=" + encodeURIComponent(message), "_blank");
  } else {
    window.location.href = "mailto:?subject=Lucky Number&body=" + encodeURIComponent(message);
  }
}
function loadMemberLoanHistory(name) {
  let applications = JSON.parse(localStorage.getItem("loanApplications")) || [];
  let memberLoans = applications.filter(app => app.name === name);

  let historyDiv = document.getElementById("loanHistory");
  if (!historyDiv) return;

  if (memberLoans.length === 0) {
    historyDiv.innerHTML = `<p style="color:gray;">No loan history yet.</p>`;
    return;
  }

  historyDiv.innerHTML = "<h3>ğŸ“‘ Loan History</h3>";
  memberLoans.forEach(app => {
    historyDiv.innerHTML += `
      <div style="border:1px solid #ccc; margin:5px 0; padding:8px;">
        <b>Amount:</b> Ksh ${app.requestedAmount}<br>
        <b>Status:</b> ${app.status}<br>
        <b>Date:</b> ${app.date}
      </div>
    `;
  });
}
function togglePassword(fieldId, eyeIcon) {
  let passField = document.getElementById(fieldId);

  if (passField.type === "password") {
    passField.type = "text";
    eyeIcon.innerText = "ğŸ™ˆ Hide password";  // when visible
  } else {
    passField.type = "password";
    eyeIcon.innerText = "ğŸ‘ï¸ Show password"; // when hidden
  }
}
function memberLogout() {
  let btn = document.getElementById("memberLogoutBtn");
  let spinner = btn.querySelector(".spinner");
  let dashboard = document.getElementById("dashboard");

  // Show spinner
  spinner.style.display = "inline-block";
  btn.disabled = true;

  setTimeout(() => {
    spinner.style.display = "none";
    btn.disabled = false;

    // Add fade-out animation
    dashboard.classList.add("fade-out");

    // Wait for animation to finish before hiding completely
    setTimeout(() => {
      dashboard.style.display = "none";
      dashboard.classList.remove("fade-out"); // reset for next login

      // Show login form
      document.getElementById("loginForm").style.display = "block";

      // Clear member name
      document.getElementById("memberDisplay").innerText = "";

      // Show popup
      showPopup("success", "Logged Out âœ…", "You have successfully logged out.");

      // Redirect to Home section
      document.querySelectorAll("section").forEach(sec => sec.style.display = "none");
      document.getElementById("home").style.display = "block";

    }, 600); // match fadeOut animation duration
  }, 1000); // logout spinner time
}
// âœ… Successful login for hardcoded or approved members
msg.innerText = "";
document.getElementById("loginForm").style.display = "none";
let dashboard = document.getElementById("dashboard");
dashboard.style.display = "block";

// Add fade-in animation
dashboard.classList.add("fade-in");
setTimeout(() => dashboard.classList.remove("fade-in"), 600); // reset after animation

document.getElementById("memberDisplay").innerText = name;

// Load loan history
loadMemberLoanHistory(name);

// Welcome popup
showPopup("success", "Welcome ğŸ‰", `Hello ${name}, glad to see you again!`);

/// ğŸ“§ Email Contact (with delay + success + fallback)
function contactEmail() {
  let email = "bonychelly@gmail.com";
  let subject = "Inquiry from Future Finders";
  let body = "Hello, I would like to know more about...";
  let url = `mailto:${email}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;

  // Show success popup
  showPopup("success", "Opening Email ğŸ“§", "We are opening your email client...");

  setTimeout(() => {
    let win = window.open(url, "_self");

    setTimeout(() => {
      if (!win || win.closed || typeof win.closed === "undefined") {
        showPopup("error", "Email Error âš ï¸", `Unable to open email client.<br>Please send an email manually to: <b>${email}</b>`);
      }
    }, 1500);
  }, 500); // âœ… 0.5s delay before redirect
}

// ğŸ“ Phone Contact (with delay + success + fallback)
function contactPhone() {
  let phone = "0713953004";
  let url = `tel:${phone}`;

  // Show success popup
  showPopup("success", "Opening Phone ğŸ“", "We are opening your dialer...");

  setTimeout(() => {
    let win = window.open(url, "_self");

    setTimeout(() => {
      if (!win || win.closed || typeof win.closed === "undefined") {
        showPopup("error", "Phone Error ğŸ“", `Unable to open dialer.<br>Please call manually: <b>${phone}</b>`);
      }
    }, 1500);
  }, 500); // âœ… 0.5s delay
}

// Open WhatsApp form (popup)
function contactWhatsApp() {
  document.getElementById("whatsappOverlay").style.display = "flex";

  let textarea = document.getElementById("whatsappMessage");

  // Restore saved message if exists
  let savedMsg = localStorage.getItem("whatsappDraft");
  if (savedMsg) {
    textarea.value = savedMsg;
  }

  // âœ… Auto-focus input
  setTimeout(() => textarea.focus(), 100);
}

// Close the WhatsApp form
function closeWhatsAppForm() {
  document.getElementById("whatsappOverlay").style.display = "none";

  // Save draft before closing
  let msg = document.getElementById("whatsappMessage").value.trim();
  if (msg) {
    localStorage.setItem("whatsappDraft", msg);
  }
}

// Send WhatsApp message
function sendWhatsApp() {
  let phoneNumber = "254713953004"; // âœ… international format
  let message = document.getElementById("whatsappMessage").value.trim();

  if (!message) {
    showPopup("error", "Message Required âš ï¸", "Please type your issue before sending.");
    return;
  }

  let url = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;

  // Show success popup and redirect
  showPopup("success", "Opening WhatsApp ğŸ’¬", "Redirecting you to WhatsApp...");
  setTimeout(() => {
    window.open(url, "_blank");
    closeWhatsAppForm();

    // âœ… Clear draft after successful send
    localStorage.removeItem("whatsappDraft");
    document.getElementById("whatsappMessage").value = "";
  }, 500);
}
let formCallback = null; // store function for submit action

// Open universal form popup
function openFormPopup(title, placeholder, btnText, callback) {
  document.getElementById("formOverlay").style.display = "flex";
  document.getElementById("formTitle").innerText = title;
  document.getElementById("formMessage").placeholder = placeholder;
  document.getElementById("formSubmitBtn").innerText = btnText;

  // Restore draft if exists
  let savedMsg = localStorage.getItem("formDraft");
  if (savedMsg) {
    document.getElementById("formMessage").value = savedMsg;
  }

  // Auto-focus textarea
  setTimeout(() => document.getElementById("formMessage").focus(), 100);

  // Set callback for submit
  formCallback = callback;
}

// Close the popup
function closeFormPopup() {
  document.getElementById("formOverlay").style.display = "none";

  // Save draft
  let msg = document.getElementById("formMessage").value.trim();
  if (msg) {
    localStorage.setItem("formDraft", msg);
  }
}

// Handle submit
document.getElementById("formSubmitBtn").addEventListener("click", () => {
  let msg = document.getElementById("formMessage").value.trim();

  if (!msg) {
    showPopup("error", "Message Required âš ï¸", "Please type your message before submitting.");
    return;
  }

  if (formCallback) {
    formCallback(msg); // run custom action
  }

  // Clear and close after submit
  localStorage.removeItem("formDraft");
  document.getElementById("formMessage").value = "";
  closeFormPopup();
});


// ===========================
// ğŸ”¹ Keyboard Shortcuts
// ===========================

// Enter = Submit (Shift+Enter = newline)
document.getElementById("formMessage").addEventListener("keydown", function(event) {
  if (event.key === "Enter" && !event.shiftKey) {
    event.preventDefault(); // stop newline
    document.getElementById("formSubmitBtn").click(); // submit
  }
});

// Escape = Close popup
document.addEventListener("keydown", function(event) {
  if (event.key === "Escape" && document.getElementById("formOverlay").style.display === "flex") {
    closeFormPopup();
  }
});
// ===========================
// ğŸ”¹ Keyboard Support for Admin Login
// ===========================
document.querySelectorAll("#adminLoginForm input").forEach(input => {
  input.addEventListener("keydown", function(event) {
    if (event.key === "Enter") {
      event.preventDefault();
      adminLogin(); // call your admin login function
    }
    if (event.key === "Escape") {
      document.getElementById("adminPass").value = ""; // clear
    }
  });
});

// âœ… Toast Notification
function showToast(message, color = "#323232") {
  const toast = document.getElementById("toast");
  toast.innerText = message;
  toast.style.background = color;
  toast.className = "toast show";
  setTimeout(() => { toast.className = toast.className.replace("show", ""); }, 3000);
}





function downloadContributionsPDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF("l", "pt", "a4");

  doc.text("Future Finders Chama â€“ Contributions Report", 40, 40);

  doc.autoTable({
    html: "#contributionsTable",
    startY: 60,
    styles: {
      fontSize: 9
    },
    headStyles: {
      fillColor: [0, 121, 107]
    }
  });

  doc.save("Contributions_Full_Table.pdf");
}




function downloadContributionsCSV() {
  if (!downloadsEnabled) {
    alert("âš ï¸ Downloads are temporarily disabled by admin.");
    return;
  }

  const table = document.getElementById("contributionsTable");
  let csv = [];

  for (let row of table.rows) {
    let cols = [];
    for (let cell of row.cells) {
      cols.push('"' + cell.innerText.replace(/"/g, '""') + '"');
    }
    csv.push(cols.join(","));
  }

  const blob = new Blob([csv.join("\n")], { type: "text/csv" });
  const link = document.createElement("a");
  link.href = URL.createObjectURL(blob);
  link.download = "Future_Finders_Contributions.csv";
  link.click();
}
function downloadContributionsPDF() {
  if (!downloadsEnabled) {
    alert("âš ï¸ Downloads are temporarily disabled by admin.");
    return;
  }

  const { jsPDF } = window.jspdf;
  const doc = new jsPDF("l", "pt", "a4");

  doc.text("Future Finders Chama â€“ Contributions Report", 40, 40);
  doc.autoTable({
    html: "#contributionsTable",
    startY: 60,
    styles: { fontSize: 9 },
    headStyles: { fillColor: [0, 121, 107] }
  });

  doc.save("Future_Finders_Contributions.pdf");
}


function downloadContributionsPDF() {
    const { jsPDF } = window.jspdf;
    let doc = new jsPDF();

    let table = document.querySelector("table");
    let rows = [];
    let headers = [];

    // extract headers
    table.querySelectorAll("thead th").forEach(th => {
        headers.push(th.innerText.trim());
    });

    // extract rows
    table.querySelectorAll("tbody tr").forEach(tr => {
        let rowData = [];
        tr.querySelectorAll("td").forEach(td => {
            let input = td.querySelector("input");
            if (input) {
                rowData.push(input.value);
            } else {
                rowData.push(td.innerText.trim());
            }
        });
        rows.push(rowData);
    });

    doc.autoTable({
        head: [headers],
        body: rows
    });

    doc.save("Group_Contributions.pdf");
}


// Countdown target: every Sunday midnight
function getNextSundayMidnight() {
  const now = new Date();
  const result = new Date();

  // set to Sunday midnight
  result.setDate(now.getDate() + (7 - now.getDay())); 
  result.setHours(24, 0, 0, 0); 
  return result;
}

let countdownInterval;




</script>
<script>
function updateCountdown() {
  const now = new Date();
  const countdownBox = document.getElementById("countdown");
  const progressBar = document.getElementById("progressBar");

  // ğŸ•’ Define Sunday midnight deadline
  const deadline = new Date(now);
  const day = now.getDay(); // 0=Sunday, 1=Monday, ... 6=Saturday
  deadline.setDate(now.getDate() + (7 - day)); // Next Sunday
  deadline.setHours(23, 59, 59, 999);

  // ğŸ•’ Define Monday 8 AM pause end
  const monday8am = new Date(deadline);
  monday8am.setDate(deadline.getDate() + 1); // Monday after deadline
  monday8am.setHours(8, 0, 0, 0);

  // If we're between Sunday midnight and Monday 8 AM â†’ PAY FINE
  if (now > deadline && now < monday8am) {
    countdownBox.innerText =
      "âš ï¸ Please pay fine of Ksh 30 before countdown resumes.";
    countdownBox.className = "red";

    if (progressBar) {
      progressBar.style.width = "0%";
      progressBar.innerText = "0%";
      progressBar.className = "progress-bar progress-red";
    }
    return;
  }

  // If it's already Monday 8 AM or later â†’ roll deadline to next Sunday
  if (now >= monday8am) {
    deadline.setDate(deadline.getDate() + 7);
  }

  // ğŸ•’ Normal countdown
  const timeDiff = deadline - now;
  if (timeDiff <= 0) {
    countdownBox.innerText =
      "âš ï¸ The deadline has passed! Late fine of Ksh 30 applies.";
    countdownBox.className = "red";
    if (progressBar) {
      progressBar.style.width = "0%";
      progressBar.innerText = "0%";
      progressBar.className = "progress-bar progress-red";
    }
    return;
  }

  const d = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
  const h = Math.floor((timeDiff / (1000 * 60 * 60)) % 24);
  const m = Math.floor((timeDiff / (1000 * 60)) % 60);
  const s = Math.floor((timeDiff / 1000) % 60);

  countdownBox.innerText =
    `Time left: ${d} days, ${h} hours, ${m} minutes, ${s} seconds`;

  // ğŸ“Š Progress calculation
  const weekStart = new Date(now);
  weekStart.setDate(now.getDate() - (day - 1 < 0 ? 6 : day - 1)); // Monday morning
  weekStart.setHours(0, 0, 0, 0);

  const weekDuration = deadline - weekStart;
  const weekPassed = now - weekStart;
  const percentLeft = Math.max(
    0,
    Math.min(100, ((weekDuration - weekPassed) / weekDuration) * 100)
  );

  if (progressBar) {
    progressBar.style.width = percentLeft.toFixed(1) + "%";
    progressBar.innerText = percentLeft.toFixed(1) + "%";

    // ğŸš¦ Color by urgency
    if (percentLeft > 40) {
      countdownBox.className = "green";
      progressBar.className = "progress-bar progress-green";
    } else if (percentLeft > 20) {
      countdownBox.className = "yellow";
      progressBar.className = "progress-bar progress-yellow";
    } else {
      countdownBox.className = "red";
      progressBar.className = "progress-bar progress-red";
    }
  }
}

// Run immediately and update every second
updateCountdown();
setInterval(updateCountdown, 1000);
</script>

<script>
function calculateGrandTotal() {
  let total = 0;
  document.querySelectorAll(".rowTotal").forEach(cell => {
    total += parseInt(cell.textContent) || 0;
  });
  document.querySelector("#grandTotalRow td:last-child").textContent = total;
}

document.querySelectorAll("table tbody tr").forEach(row => {
  let inputs = row.querySelectorAll("input[type='number']");
  if (inputs.length > 0) {
    inputs.forEach(input => {
      input.addEventListener("input", () => updateRowTotal(row));
    });
    updateRowTotal(row);
  }
});

calculateGrandTotal();



// ğŸ”„ Recalculate row totals & grand total
function recalcTotals() {
  const rows = document.querySelectorAll("#dashboard table tbody tr");
  let grandTotal = 0;

  rows.forEach(row => {
    const inputs = row.querySelectorAll("td input[type='number']");
    let rowSum = 0;

    inputs.forEach(input => {
      rowSum += Number(input.value) || 0;
    });

    const totalCell = row.querySelector(".rowTotal");
    if (totalCell) {
      totalCell.textContent = rowSum;
      grandTotal += rowSum;
    }
  });

  // update GRAND TOTAL row
  const grandRow = document.getElementById("grandTotalRow");
  if (grandRow) {
    grandRow.querySelector("td:last-child").textContent = grandTotal;
  }
}

// âœ… Show success popup
function showSuccessPopup(message = "âœ… Download successful!") {
  const popup = document.getElementById("successPopup");
  popup.textContent = message;
  popup.style.display = "block";

  setTimeout(() => {
    popup.style.display = "none";
  }, 2500); // hide after 2.5 sec
}

// ğŸ“¥ Export Group Contributions Table as CSV
function downloadTableCSV() {
  recalcTotals();

  const table = document.querySelector("#dashboard table");
  let rows = table.querySelectorAll("tr");
  let csv = [];

  rows.forEach(row => {
    let cols = row.querySelectorAll("th, td");
    let rowData = [];
    cols.forEach(col => {
      const input = col.querySelector("input");
      rowData.push('"' + (input ? input.value : col.innerText).replace(/"/g, '""') + '"');
    });
    csv.push(rowData.join(","));
  });

  let csvFile = new Blob([csv.join("\n")], { type: "text/csv" });
  let downloadLink = document.createElement("a");
  downloadLink.download = "GroupContributions.csv";
  downloadLink.href = window.URL.createObjectURL(csvFile);
  downloadLink.click();

  showSuccessPopup("âœ… CSV downloaded successfully!");
}

// ğŸ“¥ Export Group Contributions Table as PDF
function downloadTablePDF() {
  recalcTotals();

  const { jsPDF } = window.jspdf;
  let doc = new jsPDF();
  doc.text("ğŸ“Š Group Contributions", 14, 14);

  let table = document.querySelector("#dashboard table");
  let headers = [];
  table.querySelectorAll("thead th").forEach(th => headers.push(th.innerText));

  let data = [];
  table.querySelectorAll("tbody tr").forEach(tr => {
    let rowData = [];
    tr.querySelectorAll("td").forEach(td => {
      const input = td.querySelector("input");
      rowData.push(input ? input.value : td.innerText);
    });
    data.push(rowData);
  });

  doc.autoTable({
    head: [headers],
    body: data,
    startY: 20
  });

  doc.save("GroupContributions.pdf");

  showSuccessPopup("âœ… PDF downloaded successfully!");
}

// ğŸ”„ Auto-update totals when inputs change
document.addEventListener("input", function(e) {
  if (e.target.matches("td input[type='number']")) {
    recalcTotals();
  }
});

// Run once on page load
window.onload = recalcTotals;
function downloadLoanPDF(index) {
  let applications = JSON.parse(localStorage.getItem("loanApplications")) || [];
  let loan = applications[index];
  if (!loan) {
    alert("âŒ Loan application not found.");
    return;
  }

  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();

  doc.setFontSize(16);
  doc.text("ğŸ“‘ Loan Application Form", 20, 20);

  doc.setFontSize(12);
  doc.text(`Name: ${loan.name}`, 20, 40);
  doc.text(`Phone: ${loan.phone}`, 20, 50);
  doc.text(`ID Number: ${loan.idNumber}`, 20, 60);
  doc.text(`Qualified Loan: Ksh ${loan.qualifiedAmount}`, 20, 70);
  doc.text(`Requested Amount: Ksh ${loan.requestedAmount}`, 20, 80);
  doc.text(`Repayment Period: ${loan.repaymentPeriod}`, 20, 90);
  doc.text(`Total Repayment: Ksh ${loan.repaymentAmount}`, 20, 100);
  doc.text(`Monthly Installment: Ksh ${loan.monthlyRepay}`, 20, 110);
  doc.text(`Date Submitted: ${loan.date}`, 20, 120);
  doc.text(`Status: ${loan.status}`, 20, 130);

  doc.save(`Loan_Application_${loan.name}_${loan.date}.pdf`);
}
function loadMemberLoanHistory(name) {
  let applications = JSON.parse(localStorage.getItem("loanApplications")) || [];
  let userLoans = applications.filter(app => app.name === name);

  let loanMessage = document.getElementById("loanMessage");
  if (userLoans.length === 0) {
    loanMessage.innerHTML = "ğŸ“­ No past loan applications found.";
    return;
  }

  let html = `<h3>ğŸ“œ Loan History</h3>
  <table border="1" style="width:100%; border-collapse:collapse; text-align:center;">
    <thead style="background:#1976d2; color:white;">
      <tr>
        <th>Date</th>
        <th>Requested</th>
        <th>Repayment</th>
        <th>Status</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>`;

  userLoans.forEach((loan, index) => {
    html += `
      <tr>
        <td>${loan.date}</td>
        <td>Ksh ${loan.requestedAmount}</td>
        <td>Ksh ${loan.repaymentAmount} (${loan.repaymentPeriod})</td>
        <td>${loan.status}</td>
        <td>
          <button onclick="downloadLoanPDF(${applications.indexOf(loan)})" 
            style="padding:5px 10px; background:#1976d2; color:white; border:none; border-radius:4px; cursor:pointer;">
            â¬‡ï¸ Download PDF
          </button>
        </td>
      </tr>`;
  });

  html += `</tbody></table>`;
  loanMessage.innerHTML = html;
}

function toggleNote() {
  const noteSection = document.getElementById("memberNoteSection");
  const name = document.getElementById("memberDisplay").innerText;
  const member = members[name];

  if (!member) {
    alert("Please log in to view your note.");
    return;
  }

  // Toggle visibility
  if (noteSection.style.display === "none") {
    document.getElementById("personalNote").innerText = member.note || "No note available yet.";
    noteSection.style.display = "block";
  } else {
    noteSection.style.display = "none";
  }
}
function openNotePopup() {
  // Get currently logged in user
  const name = loggedInUser || document.getElementById("memberDisplay").innerText.trim();
  if (!name) {
    alert("âš ï¸ Please log in first.");
    return;
  }

  // Check both hardcoded and approved members
  const approved = JSON.parse(localStorage.getItem("approvedMembers")) || [];
  let member = members[name] || approved.find(m => m.name === name);

  if (!member) {
    alert("âš ï¸ Member record not found. Please contact admin.");
    return;
  }

  // Display note
  const noteText = member.note && member.note.trim() !== "" ? member.note : "No personal note yet. Please check back later.";
  document.getElementById("noteText").innerText = noteText;

  // Show popup
  document.getElementById("notePopup").style.display = "flex";
}


function closeNotePopup() {
  document.getElementById("notePopup").style.display = "none";
}
window.onclick = function(event) {
  const popup = document.getElementById("notePopup");
  if (event.target === popup) {
    popup.style.display = "none";
  }
};

 


 
</script>

<script>
document.addEventListener("DOMContentLoaded", loadNotes);
let editIndex = null;

// ğŸ”” Popup message helper
function showPopup(message, color = "#4CAF50") {
  let popup = document.createElement("div");
  popup.textContent = message;
  popup.style.position = "fixed";
  popup.style.bottom = "20px";
  popup.style.right = "20px";
  popup.style.background = color;
  popup.style.color = "white";
  popup.style.padding = "10px 18px";
  popup.style.borderRadius = "6px";
  popup.style.boxShadow = "0 2px 8px rgba(0,0,0,0.3)";
  popup.style.zIndex = "9999";
  popup.style.fontWeight = "bold";
  popup.style.transition = "opacity 0.5s";
  document.body.appendChild(popup);

  setTimeout(() => { popup.style.opacity = "0"; }, 2000);
  setTimeout(() => popup.remove(), 2500);
}

// ğŸ’¾ Save or Update Note
function saveMemberNote() {
  const name = document.getElementById("noteMemberName").value.trim();
  const note = document.getElementById("noteText").value.trim();
  const message = document.getElementById("noteMessage");

  if (!note) {
    showPopup("âš ï¸ Please type a note before saving.", "#d32f2f");
    return;
  }

  let notes = JSON.parse(localStorage.getItem("membersNotes") || "[]");

  if (editIndex !== null) {
    // Update existing note
    notes[editIndex].name = name || "â€”";
    notes[editIndex].note = note;
    notes[editIndex].date = new Date().toLocaleString();
    editIndex = null;
    showPopup("âœï¸ Note updated successfully!", "#1976d2");
  } else {
    // Add new note
    notes.unshift({
      date: new Date().toLocaleString(),
      name: name || "â€”",
      note
    });
    showPopup("âœ… Note saved successfully!");
  }

  localStorage.setItem("membersNotes", JSON.stringify(notes));
  renderNotes();
  clearNoteInputs();
  message.textContent = "";
}

// ğŸ§¹ Clear inputs
function clearNoteInputs() {
  document.getElementById("noteMemberName").value = "";
  document.getElementById("noteText").value = "";
  editIndex = null;
}

// ğŸ–‹ Render Notes Table
function renderNotes() {
  const tbody = document.getElementById("membersNotesBody");
  const notes = JSON.parse(localStorage.getItem("membersNotes") || "[]");

  if (!tbody) return;
  if (notes.length === 0) {
    tbody.innerHTML = `<tr><td colspan="4" style="color:gray; text-align:center;">No notes yet.</td><td class="saved2025">0</td><td class="reward2025">0</td></tr>`;
    return;
  }

  tbody.innerHTML = notes
    .map(
      (n, i) => `
      <tr>
        <td>${n.date}</td>
        <td>${n.name}</td>
        <td>${n.note}</td>
        <td style="text-align:center;">
          <button class="note-action-btn note-edit" onclick="editNote(${i})">âœï¸ Edit</button>
          <button class="note-action-btn note-delete" onclick="deleteNote(${i})">ğŸ—‘ï¸ Delete</button>
        </td>
      </tr>
    `
    )
    .join("");
}

// âœï¸ Edit an Existing Note
function editNote(i) {
  const notes = JSON.parse(localStorage.getItem("membersNotes") || "[]");
  const n = notes[i];
  document.getElementById("noteMemberName").value = n.name === "â€”" ? "" : n.name;
  document.getElementById("noteText").value = n.note;
  editIndex = i;
  showPopup("âœï¸ Edit mode: make changes and click Save Note.", "#1976d2");
}

// ğŸ—‘ Delete One Note
function deleteNote(i) {
  if (!confirm("Are you sure you want to delete this note?")) return;
  let notes = JSON.parse(localStorage.getItem("membersNotes") || "[]");
  notes.splice(i, 1);
  localStorage.setItem("membersNotes", JSON.stringify(notes));
  renderNotes();
  showPopup("ğŸ—‘ï¸ Note deleted.", "#d32f2f");
}

// ğŸ§¹ Clear All Notes
function clearAllNotes() {
  if (confirm("âš ï¸ This will delete ALL notes. Continue?")) {
    localStorage.removeItem("membersNotes");
    renderNotes();
    showPopup("ğŸ§¹ All notes cleared.", "#d32f2f");
  }
}

// â¬‡ï¸ Download CSV
function downloadNotesCSV() {
  const notes = JSON.parse(localStorage.getItem("membersNotes") || "[]");
  if (notes.length === 0) {
    showPopup("No notes to download.", "#d32f2f");
    return;
  }
  let csv = "Date,Member,Note\n" + notes.map(n =>
    `"${n.date}","${n.name}","${n.note.replace(/"/g, '""')}"`
  ).join("\n");
  const blob = new Blob([csv], { type: "text/csv" });
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "members_notes.csv";
  a.click();
  URL.revokeObjectURL(url);
}

// ğŸ§  Load existing notes on startup
function loadNotes() {
  renderNotes();
}





// ğŸ§¾ Render members table
function renderMembersTable() {
  const tbody = document.getElementById("membersTableBody");
  const totalMembers = Object.keys(members).length;
  let totalSavings = 0;

  if (totalMembers === 0) {
    tbody.innerHTML = `<tr><td colspan="5" style="text-align:center; color:gray;">No members data available.</td><td class="saved2025">0</td><td class="reward2025">0</td></tr>`;
    return;
  }

  tbody.innerHTML = Object.entries(members).map(([name, data]) => {
    totalSavings += data.savings || 0;
    const months = (data.monthly || []).join(", ");
    return `
      <tr>
        <td>${name}</td>
        <td>${data.phone}</td>
        <td>Ksh ${data.savings.toLocaleString()}</td>
        <td>${months}</td>
        <td>${data.note || ""}</td>
      </tr>
    `;
  }).join("");

  // âœ… Update summary
  document.getElementById("totalMembersCount").textContent = totalMembers;
  document.getElementById("totalSavingsSum").textContent = totalSavings.toLocaleString();
}

// ğŸ” Search filter
function filterMembersTable() {
  const query = document.getElementById("memberSearchInput").value.toLowerCase();
  const rows = document.querySelectorAll("#membersTableBody tr");
  rows.forEach(row => {
    const text = row.textContent.toLowerCase();
    row.style.display = text.includes(query) ? "" : "none";
  });
}

// â¬‡ï¸ Export CSV
function exportMembersCSV() {
  const rows = [["Name", "Phone", "Total Savings", "Monthly Deposits", "Note"]];
  Object.entries(members).forEach(([name, data]) => {
    rows.push([
      name,
      data.phone,
      data.savings,
      (data.monthly || []).join(" | "),
      data.note || ""
    ]);
  });

  const csv = rows.map(r => r.map(c => `"${String(c).replace(/"/g, '""')}"`).join(",")).join("\n");
  const blob = new Blob([csv], { type: "text/csv" });
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "members_data.csv";
  document.body.appendChild(a);
  a.click();
  a.remove();
  URL.revokeObjectURL(url);
}

// ğŸ§  Load members automatically
document.addEventListener("DOMContentLoaded", renderMembersTable);


// =============================
// ğŸ”½ SORTING FUNCTIONALITY BELOW
// =============================

let sortDirection = 1; // 1 = ascending, -1 = descending
let currentSortKey = null;

function sortMembersTable(key) {
  const entries = Object.entries(members);

  // Toggle sorting direction
  if (currentSortKey === key) sortDirection *= -1;
  else {
    sortDirection = 1;
    currentSortKey = key;
  }

  entries.sort((a, b) => {
    const memberA = a[1];
    const memberB = b[1];

    switch (key) {
      case "name":
        return a[0].localeCompare(b[0]) * sortDirection;
      case "phone":
        return (memberA.phone || "").localeCompare(memberB.phone || "") * sortDirection;
      case "savings":
        return ((memberA.savings || 0) - (memberB.savings || 0)) * sortDirection;
      case "note":
        return (memberA.note || "").localeCompare(memberB.note || "") * sortDirection;
      default:
        return 0;
    }
  });

  // Render sorted data
  const sortedMembers = Object.fromEntries(entries);
  renderSortedMembers(sortedMembers);
}

function renderSortedMembers(sortedData) {
  const tbody = document.getElementById("membersTableBody");
  let totalSavings = 0;

  tbody.innerHTML = Object.entries(sortedData).map(([name, data]) => {
    totalSavings += data.savings || 0;
    const months = (data.monthly || []).join(", ");
    return `
      <tr>
        <td>${name}</td>
        <td>${data.phone}</td>
        <td>Ksh ${data.savings.toLocaleString()}</td>
        <td>${months}</td>
        <td>${data.note || ""}</td>
      </tr>
    `;
  }).join("");

  // âœ… Update summary
  document.getElementById("totalMembersCount").textContent = Object.keys(sortedData).length;
  document.getElementById("totalSavingsSum").textContent = totalSavings.toLocaleString();
}


  const tooltipWrappers = document.querySelectorAll('span[style*="position:relative"]');
  tooltipWrappers.forEach(wrapper => {
    const tooltip = wrapper.querySelector('span:nth-child(2)');
    wrapper.addEventListener('mouseenter', () => tooltip.style.visibility = 'visible');
    wrapper.addEventListener('mouseleave', () => tooltip.style.visibility = 'hidden');
  });

function showFinePopup(fines) {
  const finePopup = document.getElementById("finePopup");
  const fineText = document.getElementById("fineText");

  fineText.innerText = (fines && fines.trim() !== "")
    ? fines
    : "No fines recorded.";

  finePopup.style.display = "flex";
}

function closeFinePopup() {
  document.getElementById("finePopup").style.display = "none";
}




</script>

<script>
function calculate2025() { 
  const table2025 = document.getElementById("table2025"); // make sure your table has id="table2025"
  if (!table2025) return;

  let grandTotal = 0;
  let totalSaved = 0;
  let totalReward = 0;

  table2025.querySelectorAll("tbody tr").forEach(row => {
    const inputs = row.querySelectorAll("input[type='number']");
    const rowTotalCell = row.querySelector(".rowTotal");
    const savedCell = row.querySelector(".saved2025");
    const rewardCell = row.querySelector(".reward2025");

    if (!rowTotalCell) return;

    let totalSavings = 0;
    let activeMonths = 0;

    inputs.forEach(input => {
      const val = Number(input.value) || 0;
      totalSavings += val;
      if (val > 0) activeMonths++;
    });

    let reward = 0;
    let saved = totalSavings;

    // RULE 1: 12 months + >=1500
    if (totalSavings >= 1500 && activeMonths >= 12) {
      reward = Math.round(totalSavings * 0.60);
      saved = totalSavings - reward;
    }
    // RULE 2: >=1200 + >=6 months
    else if (totalSavings >= 1200 && activeMonths >= 6) {
      reward = Math.round(totalSavings * 0.50);
      saved = totalSavings - reward;
    }

    rowTotalCell.textContent = totalSavings;
    savedCell.textContent = saved;
    rewardCell.textContent = reward;

    grandTotal += totalSavings;
    totalSaved += saved;
    totalReward += reward;
  });

  document.getElementById("grandTotal_2025").textContent = grandTotal;
  document.getElementById("savedTotal_2025").textContent = totalSaved;
  document.getElementById("rewardTotal_2025").textContent = totalReward;
}

// Listen for changes in the table
const table2025 = document.getElementById("table2025");
if (table2025) {
  table2025.addEventListener("input", e => {
    if (e.target.type === "number") calculate2025();
  });
}

// Initial calculation
calculate2025();
</script>



<script>
(function () {
  const table2026 = document.getElementById("table2026");
  if (!table2026) return;

  function calculate2026() {
    let grandTotal = 0;
    let totalSaved = 0;
    let totalReward = 0;

    table2026.querySelectorAll("tbody tr").forEach(row => {
      const inputs = row.querySelectorAll("input[type='number']");
      const rowTotalCell = row.querySelector(".rowTotal");
      const savedCell = row.querySelector(".saved2026");
      const rewardCell = row.querySelector(".reward2026");

      if (!rowTotalCell) return;

      let totalSavings = 0;
      let activeMonths = 0;

      inputs.forEach(input => {
        const val = Number(input.value) || 0;
        totalSavings += val;
        if (val > 0) activeMonths++;
      });

      let reward = 0;
      let saved = totalSavings;

      // RULE 1: 12 months + >=1500
      if (totalSavings >= 1500 && activeMonths >= 12) {
        reward = Math.round(totalSavings * 0.60);
        saved = totalSavings - reward;
      }
      // RULE 2: >=1200 + >=6 months
      else if (totalSavings >= 1200 && activeMonths >= 6) {
        reward = Math.round(totalSavings * 0.50);
        saved = totalSavings - reward;
      }

      rowTotalCell.textContent = totalSavings;
      if (savedCell) savedCell.textContent = saved;
      if (rewardCell) rewardCell.textContent = reward;

      grandTotal += totalSavings;
      totalSaved += saved;
      totalReward += reward;
    });

    document.getElementById("grandTotal_2026").textContent = grandTotal;
    if (document.getElementById("savedTotal_2026")) 
      document.getElementById("savedTotal_2026").textContent = totalSaved;
    if (document.getElementById("rewardTotal_2026")) 
      document.getElementById("rewardTotal_2026").textContent = totalReward;
  }

  table2026.addEventListener("input", e => {
    if (e.target.type === "number") calculate2026();
  });

  calculate2026(); // initial load
})();
</script>

<script>
  window.addEventListener("load", function () {

    const today = new Date();

    // START: 29 December (current year)
    const startDate = new Date(today.getFullYear(), 11, 29); // December = 11

    // END: 15 January 2026
    const endDate = new Date(2026, 0, 15, 23, 59, 59); // January = 0

    // Check date range
    if (today >= startDate && today <= endDate) {
      document.getElementById("newYearPopup").style.display = "flex";
    }
  });
</script>
 <script>
  function closeNewYearPopup() {
    const popupBox = document.querySelector("#newYearPopup .popup-box");

    // Add boom + fade animation
    popupBox.classList.add("boom-fade");

    // Remove popup after animation finishes
    setTimeout(() => {
      document.getElementById("newYearPopup").style.display = "none";
      popupBox.classList.remove("boom-fade");
    }, 600); // match animation duration
  }
</script>








</body>
</html>